import{A as yt,a as M,b as ye,c as q_,d as sf,e as m,f as z_,g as zu,h as H_,i as G_,j as W_,k as af,l as K_,m as Ds,n as uf,o as Hu,p as Q_,q as Y_,r as cf,s as ve,t as Lr,u as an,v as Gu,w as Ts,x as Z_,y as J_,z as Jn}from"./chunk-JPE6FXMD.js";var X_=null;var lf=1,eI=Symbol("SIGNAL");function oe(t){let e=X_;return X_=t,e}var tI={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Lx(t){if(!(ff(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===lf)){if(!t.producerMustRecompute(t)&&!df(t)){t.dirty=!1,t.lastCleanEpoch=lf;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=lf}}function nI(t){return t&&(t.nextProducerIndex=0),oe(t)}function rI(t,e){if(oe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ff(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)hf(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function df(t){Wu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Lx(n),r!==n.version))return!0}return!1}function iI(t){if(Wu(t),ff(t))for(let e=0;e<t.producerNode.length;e++)hf(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function hf(t,e){if(Vx(t),Wu(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)hf(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Wu(i),i.producerIndexOfThis[r]=e}}function ff(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Wu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Vx(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function jx(){throw new Error}var Ux=jx;function oI(t){Ux=t}function U(t){return typeof t=="function"}function ji(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ku=ji(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Vr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var be=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(U(r))try{r()}catch(o){e=o instanceof Ku?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{sI(o)}catch(s){e=e??[],s instanceof Ku?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ku(e)}}add(e){var n;if(e&&e!==this)if(this.closed)sI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Vr(n,e)}remove(e){let{_finalizers:n}=this;n&&Vr(n,e),e instanceof t&&e._removeParent(this)}};be.EMPTY=(()=>{let t=new be;return t.closed=!0,t})();var pf=be.EMPTY;function Qu(t){return t instanceof be||t&&"closed"in t&&U(t.remove)&&U(t.add)&&U(t.unsubscribe)}function sI(t){U(t)?t():t.unsubscribe()}var zt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ui={setTimeout(t,e,...n){let{delegate:r}=Ui;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ui;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Yu(t){Ui.setTimeout(()=>{let{onUnhandledError:e}=zt;if(e)e(t);else throw t})}function Cs(){}var aI=gf("C",void 0,void 0);function uI(t){return gf("E",void 0,t)}function cI(t){return gf("N",t,void 0)}function gf(t,e,n){return{kind:t,value:e,error:n}}var jr=null;function Bi(t){if(zt.useDeprecatedSynchronousErrorHandling){let e=!jr;if(e&&(jr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=jr;if(jr=null,n)throw r}}else t()}function lI(t){zt.useDeprecatedSynchronousErrorHandling&&jr&&(jr.errorThrown=!0,jr.error=t)}var Ur=class extends be{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Qu(e)&&e.add(this)):this.destination=qx}static create(e,n,r){return new Pn(e,n,r)}next(e){this.isStopped?yf(cI(e),this):this._next(e)}error(e){this.isStopped?yf(uI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?yf(aI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Bx=Function.prototype.bind;function mf(t,e){return Bx.call(t,e)}var vf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Zu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Zu(r)}else Zu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Zu(n)}}},Pn=class extends Ur{constructor(e,n,r){super();let i;if(U(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&zt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&mf(e.next,o),error:e.error&&mf(e.error,o),complete:e.complete&&mf(e.complete,o)}):i=e}this.destination=new vf(i)}};function Zu(t){zt.useDeprecatedSynchronousErrorHandling?lI(t):Yu(t)}function $x(t){throw t}function yf(t,e){let{onStoppedNotification:n}=zt;n&&Ui.setTimeout(()=>n(t,e))}var qx={closed:!0,next:Cs,error:$x,complete:Cs};var $i=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ut(t){return t}function wf(...t){return _f(t)}function _f(t){return t.length===0?ut:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var J=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Hx(n)?n:new Pn(n,r,i);return Bi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=dI(r),new r((i,o)=>{let s=new Pn({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[$i](){return this}pipe(...n){return _f(n)(this)}toPromise(n){return n=dI(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function dI(t){var e;return(e=t??zt.Promise)!==null&&e!==void 0?e:Promise}function zx(t){return t&&U(t.next)&&U(t.error)&&U(t.complete)}function Hx(t){return t&&t instanceof Ur||zx(t)&&Qu(t)}function If(t){return U(t?.lift)}function K(t){return e=>{if(If(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Y(t,e,n,r,i){return new Ef(t,e,n,r,i)}var Ef=class extends Ur{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function qi(){return K((t,e)=>{let n=null;t._refCount++;let r=Y(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var zi=class extends J{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,If(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new be;let n=this.getSubject();e.add(this.source.subscribe(Y(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=be.EMPTY)}return e}refCount(){return qi()(this)}};var hI=ji(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Se=(()=>{class t extends J{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ju(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new hI}next(n){Bi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Bi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Bi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?pf:(this.currentObservers=null,o.push(n),new be(()=>{this.currentObservers=null,Vr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new J;return n.source=this,n}}return t.create=(e,n)=>new Ju(e,n),t})(),Ju=class extends Se{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:pf}};var We=class extends Se{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var bs={now(){return(bs.delegate||Date).now()},delegate:void 0};var Xu=class extends Se{constructor(e=1/0,n=1/0,r=bs){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var ec=class extends be{constructor(e,n){super()}schedule(e,n=0){return this}};var Ss={setInterval(t,e,...n){let{delegate:r}=Ss;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ss;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Hi=class extends ec{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Ss.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ss.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Vr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Gi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Gi.now=bs.now;var Wi=class extends Gi{constructor(e,n=Gi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var As=new Wi(Hi);var tc=class extends Hi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var nc=class extends Wi{};var Df=new nc(tc);var ct=new J(t=>t.complete());function fI(t){return t&&U(t.schedule)}function Tf(t){return t[t.length-1]}function pI(t){return U(Tf(t))?t.pop():void 0}function un(t){return fI(Tf(t))?t.pop():void 0}function gI(t,e){return typeof Tf(t)=="number"?t.pop():e}var rc=t=>t&&typeof t.length=="number"&&typeof t!="function";function ic(t){return U(t?.then)}function oc(t){return U(t[$i])}function sc(t){return Symbol.asyncIterator&&U(t?.[Symbol.asyncIterator])}function ac(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Gx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var uc=Gx();function cc(t){return U(t?.[uc])}function lc(t){return H_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield zu(n.read());if(i)return yield zu(void 0);yield yield zu(r)}}finally{n.releaseLock()}})}function dc(t){return U(t?.getReader)}function we(t){if(t instanceof J)return t;if(t!=null){if(oc(t))return Wx(t);if(rc(t))return Kx(t);if(ic(t))return Qx(t);if(sc(t))return mI(t);if(cc(t))return Yx(t);if(dc(t))return Zx(t)}throw ac(t)}function Wx(t){return new J(e=>{let n=t[$i]();if(U(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Kx(t){return new J(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Qx(t){return new J(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Yu)})}function Yx(t){return new J(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function mI(t){return new J(e=>{Jx(t,e).catch(n=>e.error(n))})}function Zx(t){return mI(lc(t))}function Jx(t,e){var n,r,i,o;return z_(this,void 0,void 0,function*(){try{for(n=G_(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function vt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function kt(t,e=0){return K((n,r)=>{n.subscribe(Y(r,i=>vt(r,t,()=>r.next(i),e),()=>vt(r,t,()=>r.complete(),e),i=>vt(r,t,()=>r.error(i),e)))})}function Ht(t,e=0){return K((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function yI(t,e){return we(t).pipe(Ht(e),kt(e))}function vI(t,e){return we(t).pipe(Ht(e),kt(e))}function wI(t,e){return new J(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function _I(t,e){return new J(n=>{let r;return vt(n,e,()=>{r=t[uc](),vt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>U(r?.return)&&r.return()})}function hc(t,e){if(!t)throw new Error("Iterable cannot be null");return new J(n=>{vt(n,e,()=>{let r=t[Symbol.asyncIterator]();vt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function II(t,e){return hc(lc(t),e)}function EI(t,e){if(t!=null){if(oc(t))return yI(t,e);if(rc(t))return wI(t,e);if(ic(t))return vI(t,e);if(sc(t))return hc(t,e);if(cc(t))return _I(t,e);if(dc(t))return II(t,e)}throw ac(t)}function se(t,e){return e?EI(t,e):we(t)}function k(...t){let e=un(t);return se(t,e)}function Ki(t,e){let n=U(t)?t:()=>t,r=i=>i.error(n());return new J(e?i=>e.schedule(r,0,i):r)}function Cf(t){return!!t&&(t instanceof J||U(t.lift)&&U(t.subscribe))}var kn=ji(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function V(t,e){return K((n,r)=>{let i=0;n.subscribe(Y(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:Xx}=Array;function eM(t,e){return Xx(e)?t(...e):t(e)}function DI(t){return V(e=>eM(t,e))}var{isArray:tM}=Array,{getPrototypeOf:nM,prototype:rM,keys:iM}=Object;function TI(t){if(t.length===1){let e=t[0];if(tM(e))return{args:e,keys:null};if(oM(e)){let n=iM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function oM(t){return t&&typeof t=="object"&&nM(t)===rM}function CI(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function xs(...t){let e=un(t),n=pI(t),{args:r,keys:i}=TI(t);if(r.length===0)return se([],e);let o=new J(sM(r,e,i?s=>CI(i,s):ut));return n?o.pipe(DI(n)):o}function sM(t,e,n=ut){return r=>{bI(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)bI(e,()=>{let c=se(t[u],e),l=!1;c.subscribe(Y(r,d=>{o[u]=d,l||(l=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function bI(t,e,n){t?vt(n,t,e):e()}function SI(t,e,n,r,i,o,s,a){let u=[],c=0,l=0,d=!1,h=()=>{d&&!u.length&&!c&&e.complete()},f=y=>c<r?v(y):u.push(y),v=y=>{o&&e.next(y),c++;let w=!1;we(n(y,l++)).subscribe(Y(e,T=>{i?.(T),o?f(T):e.next(T)},()=>{w=!0},void 0,()=>{if(w)try{for(c--;u.length&&c<r;){let T=u.shift();s?vt(e,s,()=>v(T)):v(T)}h()}catch(T){e.error(T)}}))};return t.subscribe(Y(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Pe(t,e,n=1/0){return U(e)?Pe((r,i)=>V((o,s)=>e(r,o,i,s))(we(t(r,i))),n):(typeof e=="number"&&(n=e),K((r,i)=>SI(r,i,t,n)))}function Xn(t=1/0){return Pe(ut,t)}function AI(){return Xn(1)}function Qi(...t){return AI()(se(t,un(t)))}function fc(t){return new J(e=>{we(t()).subscribe(e)})}function bf(...t){let e=un(t),n=gI(t,1/0),r=t;return r.length?r.length===1?we(r[0]):Xn(n)(se(r,e)):ct}function Be(t,e){return K((n,r)=>{let i=0;n.subscribe(Y(r,o=>t.call(e,o,i++)&&r.next(o)))})}function er(t){return K((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Y(n,void 0,void 0,s=>{o=we(t(s,er(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function xI(t,e,n,r,i){return(o,s)=>{let a=n,u=e,c=0;o.subscribe(Y(s,l=>{let d=c++;u=a?t(u,l,d):(a=!0,l),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function tr(t,e){return U(e)?Pe(t,e,1):Pe(t,1)}function nr(t){return K((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function On(t){return t<=0?()=>ct:K((e,n)=>{let r=0;e.subscribe(Y(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Sf(t){return V(()=>t)}function Af(t,e=ut){return t=t??aM,K((n,r)=>{let i,o=!0;n.subscribe(Y(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function aM(t,e){return t===e}function pc(t=uM){return K((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function uM(){return new kn}function Yi(t){return K((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Dt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Be((i,o)=>t(i,o,r)):ut,On(1),n?nr(e):pc(()=>new kn))}function Zi(t){return t<=0?()=>ct:K((e,n)=>{let r=[];e.subscribe(Y(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function xf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Be((i,o)=>t(i,o,r)):ut,Zi(1),n?nr(e):pc(()=>new kn))}function Ms(){return K((t,e)=>{let n,r=!1;t.subscribe(Y(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function Br(t,e){return K(xI(t,e,arguments.length>=2,!0))}function MI(t={}){let{connector:e=()=>new Se,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,c=0,l=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=u=void 0,l=d=!1},v=()=>{let y=s;f(),y?.unsubscribe()};return K((y,w)=>{c++,!d&&!l&&h();let T=u=u??e();w.add(()=>{c--,c===0&&!d&&!l&&(a=Mf(v,i))}),T.subscribe(w),!s&&c>0&&(s=new Pn({next:L=>T.next(L),error:L=>{d=!0,h(),a=Mf(f,n,L),T.error(L)},complete:()=>{l=!0,h(),a=Mf(f,r),T.complete()}}),we(y).subscribe(s))})(o)}}function Mf(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Pn({next:()=>{r.unsubscribe(),t()}});return we(e(...n)).subscribe(r)}function gc(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,MI({connector:()=>new Xu(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function $r(...t){let e=un(t);return K((n,r)=>{(e?Qi(t,n,e):Qi(t,n)).subscribe(r)})}function _e(t,e){return K((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Y(r,u=>{i?.unsubscribe();let c=0,l=o++;we(t(u,l)).subscribe(i=Y(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function mc(t,e){return U(e)?_e(()=>t,e):_e(()=>t)}function Rf(t){return K((e,n)=>{we(t).subscribe(Y(n,()=>n.complete(),Cs)),!n.closed&&e.subscribe(n)})}function Ae(t,e,n){let r=U(t)||e||n?{next:t,error:e,complete:n}:t;return r?K((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Y(o,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),o.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):ut}var gE="https://g.co/ng/security#xss",F=class extends Error{constructor(e,n){super(Xc(e,n)),this.code=e}};function Xc(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Ws(t){return{toString:t}.toString()}var yc="__parameters__";function cM(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function mE(t,e,n){return Ws(()=>{let r=cM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,c,l){let d=u.hasOwnProperty(yc)?u[yc]:Object.defineProperty(u,yc,{value:[]})[yc];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Tt=globalThis;function de(t){for(let e in t)if(t[e]===de)return e;throw Error("Could not find renamed property on target object.")}function Ct(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ct).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function RI(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var lM=de({__forward_ref__:de});function yE(t){return t.__forward_ref__=yE,t.toString=function(){return Ct(this())},t}function Ot(t){return vE(t)?t():t}function vE(t){return typeof t=="function"&&t.hasOwnProperty(lM)&&t.__forward_ref__===yE}function P(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function tt(t){return{providers:t.providers||[],imports:t.imports||[]}}function el(t){return NI(t,_E)||NI(t,IE)}function wE(t){return el(t)!==null}function NI(t,e){return t.hasOwnProperty(e)?t[e]:null}function dM(t){let e=t&&(t[_E]||t[IE]);return e||null}function PI(t){return t&&(t.hasOwnProperty(kI)||t.hasOwnProperty(hM))?t[kI]:null}var _E=de({\u0275prov:de}),kI=de({\u0275inj:de}),IE=de({ngInjectableDef:de}),hM=de({ngInjectorDef:de}),R=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=P({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function EE(t){return t&&!!t.\u0275providers}var fM=de({\u0275cmp:de}),pM=de({\u0275dir:de}),gM=de({\u0275pipe:de}),mM=de({\u0275mod:de}),bc=de({\u0275fac:de}),Ns=de({__NG_ELEMENT_ID__:de}),OI=de({__NG_ENV_ID__:de});function Pp(t){return typeof t=="string"?t:t==null?"":String(t)}function yM(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Pp(t)}function vM(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new F(-200,t)}function kp(t,e){throw new F(-201,!1)}var Z=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Z||{}),zf;function DE(){return zf}function wt(t){let e=zf;return zf=t,e}function TE(t,e,n){let r=el(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Z.Optional)return null;if(e!==void 0)return e;kp(t,"Injector")}var wM={},ks=wM,Hf="__NG_DI_FLAG__",Sc="ngTempTokenPath",_M="ngTokenPath",IM=/\n/gm,EM="\u0275",FI="__source",no;function DM(){return no}function rr(t){let e=no;return no=t,e}function TM(t,e=Z.Default){if(no===void 0)throw new F(-203,!1);return no===null?TE(t,void 0,e):no.get(t,e&Z.Optional?null:void 0,e)}function D(t,e=Z.Default){return(DE()||TM)(Ot(t),e)}function E(t,e=Z.Default){return D(t,tl(e))}function tl(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Gf(t){let e=[];for(let n=0;n<t.length;n++){let r=Ot(t[n]);if(Array.isArray(r)){if(r.length===0)throw new F(900,!1);let i,o=Z.Default;for(let s=0;s<r.length;s++){let a=r[s],u=CM(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(D(i,o))}else e.push(D(r))}return e}function CE(t,e){return t[Hf]=e,t.prototype[Hf]=e,t}function CM(t){return t[Hf]}function bM(t,e,n,r){let i=t[Sc];throw e[FI]&&i.unshift(e[FI]),t.message=SM(`
`+t.message,i,n,r),t[_M]=i,t[Sc]=null,t}function SM(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==EM?t.slice(2):t;let i=Ct(e);if(Array.isArray(e))i=e.map(Ct).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ct(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(IM,`
  `)}`}var ao=CE(mE("Optional"),8);var Op=CE(mE("SkipSelf"),4);function zr(t,e){let n=t.hasOwnProperty(bc);return n?t[bc]:null}function Fp(t,e){t.forEach(n=>Array.isArray(n)?Fp(n,e):e(n))}function bE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ac(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Os={},Wt=[],Hr=new R(""),SE=new R("",-1),AE=new R(""),xc=class{get(e,n=ks){if(n===ks){let r=new Error(`NullInjectorError: No provider for ${Ct(e)}!`);throw r.name="NullInjectorError",r}return n}},xE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(xE||{}),ln=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ln||{}),ar=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(ar||{});function AM(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Wf(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];MM(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function xM(t){return t===3||t===4||t===6}function MM(t){return t.charCodeAt(0)===64}function Lp(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?LI(t,n,i,null,e[++r]):LI(t,n,i,null,null))}}return t}function LI(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var ME="ng-template";function RM(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&AM(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Vp(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Vp(t){return t.type===4&&t.value!==ME}function NM(t,e,n){let r=t.type===4&&!n?ME:t.value;return e===r}function PM(t,e,n){let r=4,i=t.attrs,o=i!==null?FM(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Gt(r)&&!Gt(u))return!1;if(s&&Gt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!NM(t,u,n)||u===""&&e.length===1){if(Gt(r))return!1;s=!0}}else if(r&8){if(i===null||!RM(t,i,u,n)){if(Gt(r))return!1;s=!0}}else{let c=e[++a],l=kM(u,i,Vp(t),n);if(l===-1){if(Gt(r))return!1;s=!0;continue}if(c!==""){let d;if(l>o?d="":d=i[l+1].toLowerCase(),r&2&&c!==d){if(Gt(r))return!1;s=!0}}}}return Gt(r)||s}function Gt(t){return(t&1)===0}function kM(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return LM(e,t)}function OM(t,e,n=!1){for(let r=0;r<e.length;r++)if(PM(t,e[r],n))return!0;return!1}function FM(t){for(let e=0;e<t.length;e++){let n=t[e];if(xM(n))return e}return t.length}function LM(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function VI(t,e){return t?":not("+e.trim()+")":e}function VM(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Gt(s)&&(e+=VI(o,i),i=""),r=s,o=o||!Gt(r);n++}return i!==""&&(e+=VI(o,i)),e}function jM(t){return t.map(VM).join(",")}function UM(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Gt(i))break;i=o}r++}return{attrs:e,classes:n}}function nl(t){return Ws(()=>{let e=FE(t),n=ye(M({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===xE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ln.Emulated,styles:t.styles||Wt,_:null,schemas:t.schemas||null,tView:null,id:""});LE(n);let r=t.dependencies;return n.directiveDefs=UI(r,!1),n.pipeDefs=UI(r,!0),n.id=qM(n),n})}function BM(t){return ur(t)||NE(t)}function $M(t){return t!==null}function nt(t){return Ws(()=>({type:t.type,bootstrap:t.bootstrap||Wt,declarations:t.declarations||Wt,imports:t.imports||Wt,exports:t.exports||Wt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function jI(t,e){if(t==null)return Os;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=ar.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==ar.None?[r,a]:r,e[o]=s):n[o]=r}return n}function rl(t){return Ws(()=>{let e=FE(t);return LE(e),e})}function RE(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function ur(t){return t[fM]||null}function NE(t){return t[pM]||null}function PE(t){return t[gM]||null}function kE(t){let e=ur(t)||NE(t)||PE(t);return e!==null?e.standalone:!1}function OE(t,e){let n=t[mM]||null;if(!n&&e===!0)throw new Error(`Type ${Ct(t)} does not have '\u0275mod' property.`);return n}function FE(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Os,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Wt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jI(t.inputs,e),outputs:jI(t.outputs),debugInfo:null}}function LE(t){t.features?.forEach(e=>e(t))}function UI(t,e){if(!t)return null;let n=e?PE:BM;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter($M)}function qM(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ks(t){return{\u0275providers:t}}function zM(...t){return{\u0275providers:VE(!0,t),\u0275fromNgModule:!0}}function VE(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Fp(e,s=>{let a=s;Kf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&jE(i,o),n}function jE(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];jp(i,o=>{e(o,r)})}}function Kf(t,e,n,r){if(t=Ot(t),!t)return!1;let i=null,o=PI(t),s=!o&&ur(t);if(!o&&!s){let u=t.ngModule;if(o=PI(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of u)Kf(c,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{Fp(o.imports,l=>{Kf(l,e,n,r)&&(c||=[],c.push(l))})}finally{}c!==void 0&&jE(c,e)}if(!a){let c=zr(i)||(()=>new i);e({provide:i,useFactory:c,deps:Wt},i),e({provide:AE,useValue:i,multi:!0},i),e({provide:Hr,useValue:()=>D(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let c=t;jp(u,l=>{e(l,c)})}}else return!1;return i!==t&&t.providers!==void 0}function jp(t,e){for(let n of t)EE(n)&&(n=n.\u0275providers),Array.isArray(n)?jp(n,e):e(n)}var HM=de({provide:String,useValue:de});function UE(t){return t!==null&&typeof t=="object"&&HM in t}function GM(t){return!!(t&&t.useExisting)}function WM(t){return!!(t&&t.useFactory)}function Qf(t){return typeof t=="function"}var il=new R(""),Ic={},KM={},Nf;function Up(){return Nf===void 0&&(Nf=new xc),Nf}var bt=class{},Fs=class extends bt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zf(e,s=>this.processProvider(s)),this.records.set(SE,Ji(void 0,this)),i.has("environment")&&this.records.set(bt,Ji(void 0,this));let o=this.records.get(il);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(AE,Wt,Z.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=rr(this),r=wt(void 0),i;try{return e()}finally{rr(n),wt(r)}}get(e,n=ks,r=Z.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(OI))return e[OI](this);r=tl(r);let i,o=rr(this),s=wt(void 0);try{if(!(r&Z.SkipSelf)){let u=this.records.get(e);if(u===void 0){let c=eR(e)&&el(e);c&&this.injectableDefInScope(c)?u=Ji(Yf(e),Ic):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&Z.Self?Up():this.parent;return n=r&Z.Optional&&n===ks?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Sc]=a[Sc]||[]).unshift(Ct(e)),o)throw a;return bM(a,e,"R3InjectorError",this.source)}else throw a}finally{wt(s),rr(o)}}resolveInjectorInitializers(){let e=oe(null),n=rr(this),r=wt(void 0),i;try{let o=this.get(Hr,Wt,Z.Self);for(let s of o)s()}finally{rr(n),wt(r),oe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ct(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new F(205,!1)}processProvider(e){e=Ot(e);let n=Qf(e)?e:Ot(e&&e.provide),r=YM(e);if(!Qf(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ji(void 0,Ic,!0),i.factory=()=>Gf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=oe(null);try{return n.value===Ic&&(n.value=KM,n.value=n.factory()),typeof n.value=="object"&&n.value&&XM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{oe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ot(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Yf(t){let e=el(t),n=e!==null?e.factory:zr(t);if(n!==null)return n;if(t instanceof R)throw new F(204,!1);if(t instanceof Function)return QM(t);throw new F(204,!1)}function QM(t){if(t.length>0)throw new F(204,!1);let n=dM(t);return n!==null?()=>n.factory(t):()=>new t}function YM(t){if(UE(t))return Ji(void 0,t.useValue);{let e=ZM(t);return Ji(e,Ic)}}function ZM(t,e,n){let r;if(Qf(t)){let i=Ot(t);return zr(i)||Yf(i)}else if(UE(t))r=()=>Ot(t.useValue);else if(WM(t))r=()=>t.useFactory(...Gf(t.deps||[]));else if(GM(t))r=()=>D(Ot(t.useExisting));else{let i=Ot(t&&(t.useClass||t.provide));if(JM(t))r=()=>new i(...Gf(t.deps));else return zr(i)||Yf(i)}return r}function Ji(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function JM(t){return!!t.deps}function XM(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function eR(t){return typeof t=="function"||typeof t=="object"&&t instanceof R}function Zf(t,e){for(let n of t)Array.isArray(n)?Zf(n,e):n&&EE(n)?Zf(n.\u0275providers,e):e(n)}function fn(t,e){t instanceof Fs&&t.assertNotDestroyed();let n,r=rr(t),i=wt(void 0);try{return e()}finally{rr(r),wt(i)}}function BE(){return DE()!==void 0||DM()!=null}function tR(t){if(!BE())throw new F(-203,!1)}function nR(t){let e=Tt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function rR(t){return typeof t=="function"}var St=0,Q=1,j=2,Ke=3,Kt=4,Yt=5,Lt=6,BI=7,Ft=8,io=9,Qt=10,je=11,Ls=12,$I=13,Qs=14,At=15,ol=16,Xi=17,oo=18,sl=19,$E=20,or=21,Pf=22,Gr=23,et=25,qE=1,Vs=6,Fn=7,Mc=8,Rc=9,Xe=10,Bp=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Bp||{});function sr(t){return Array.isArray(t)&&typeof t[qE]=="object"}function pn(t){return Array.isArray(t)&&t[qE]===!0}function zE(t){return(t.flags&4)!==0}function Ys(t){return t.componentOffset>-1}function HE(t){return(t.flags&1)===1}function Zs(t){return!!t.template}function GE(t){return(t[j]&512)!==0}var Jf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function WE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function al(){return KE}function KE(t){return t.type.prototype.ngOnChanges&&(t.setInput=oR),iR}al.ngInherit=!0;function iR(){let t=YE(this),e=t?.current;if(e){let n=t.previous;if(n===Os)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function oR(t,e,n,r,i){let o=this.declaredInputs[r],s=YE(t)||sR(t,{previous:Os,current:null}),a=s.current||(s.current={}),u=s.previous,c=u[o];a[o]=new Jf(c&&c.currentValue,n,u===Os),WE(t,e,i,n)}var QE="__ngSimpleChanges__";function YE(t){return t[QE]||null}function sR(t,e){return t[QE]=e}var qI=null;var ir=function(t,e,n){qI?.(t,e,n)},ZE="svg",aR="math",uR=!1;function cR(){return uR}function dn(t){for(;Array.isArray(t);)t=t[St];return t}function lR(t,e){return dn(e[t])}function Zt(t,e){return dn(e[t.index])}function $p(t,e){return t.data[e]}function dR(t,e){return t[e]}function uo(t,e){let n=e[t];return sr(n)?n:n[St]}function qp(t){return(t[j]&128)===128}function hR(t){return pn(t[Ke])}function Nc(t,e){return e==null?null:t[e]}function JE(t){t[Xi]=0}function fR(t){t[j]&1024||(t[j]|=1024,qp(t)&&js(t))}function zp(t){return!!(t[j]&9216||t[Gr]?.dirty)}function Xf(t){t[Qt].changeDetectionScheduler?.notify(1),zp(t)?js(t):t[j]&64&&(cR()?(t[j]|=1024,js(t)):t[Qt].changeDetectionScheduler?.notify())}function js(t){t[Qt].changeDetectionScheduler?.notify();let e=Us(t);for(;e!==null&&!(e[j]&8192||(e[j]|=8192,!qp(e)));)e=Us(e)}function XE(t,e){if((t[j]&256)===256)throw new F(911,!1);t[or]===null&&(t[or]=[]),t[or].push(e)}function pR(t,e){if(t[or]===null)return;let n=t[or].indexOf(e);n!==-1&&t[or].splice(n,1)}function Us(t){let e=t[Ke];return pn(e)?e[Ke]:e}var te={lFrame:s0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function gR(){return te.lFrame.elementDepthCount}function mR(){te.lFrame.elementDepthCount++}function yR(){te.lFrame.elementDepthCount--}function e0(){return te.bindingsEnabled}function Js(){return te.skipHydrationRootTNode!==null}function vR(t){return te.skipHydrationRootTNode===t}function wR(t){te.skipHydrationRootTNode=t}function _R(){te.skipHydrationRootTNode=null}function Ie(){return te.lFrame.lView}function Zr(){return te.lFrame.tView}function Ln(){let t=t0();for(;t!==null&&t.type===64;)t=t.parent;return t}function t0(){return te.lFrame.currentTNode}function IR(){let t=te.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Xs(t,e){let n=te.lFrame;n.currentTNode=t,n.isParent=e}function n0(){return te.lFrame.isParent}function ER(){te.lFrame.isParent=!1}function Hp(){let t=te.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function DR(t){return te.lFrame.bindingIndex=t}function Gp(){return te.lFrame.bindingIndex++}function TR(){return te.lFrame.inI18n}function CR(t,e){let n=te.lFrame;n.bindingIndex=n.bindingRootIndex=t,ep(e)}function bR(){return te.lFrame.currentDirectiveIndex}function ep(t){te.lFrame.currentDirectiveIndex=t}function r0(t){te.lFrame.currentQueryIndex=t}function SR(t){let e=t[Q];return e.type===2?e.declTNode:e.type===1?t[Yt]:null}function i0(t,e,n){if(n&Z.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&Z.Host);)if(i=SR(o),i===null||(o=o[Qs],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=te.lFrame=o0();return r.currentTNode=e,r.lView=t,!0}function Wp(t){let e=o0(),n=t[Q];te.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function o0(){let t=te.lFrame,e=t===null?null:t.child;return e===null?s0(t):e}function s0(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function a0(){let t=te.lFrame;return te.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var u0=a0;function Kp(){let t=a0();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ul(){return te.lFrame.selectedIndex}function Wr(t){te.lFrame.selectedIndex=t}function AR(){let t=te.lFrame;return $p(t.tView,t.selectedIndex)}function co(){te.lFrame.currentNamespace=ZE}function ea(){xR()}function xR(){te.lFrame.currentNamespace=null}function c0(){return te.lFrame.currentNamespace}var l0=!0;function Qp(){return l0}function gn(t){l0=t}function MR(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=KE(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Yp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function Ec(t,e,n){d0(t,e,3,n)}function Dc(t,e,n,r){(t[j]&3)===n&&d0(t,e,n,r)}function kf(t,e){let n=t[j];(n&3)===e&&(n&=16383,n+=1,t[j]=n)}function d0(t,e,n,r){let i=r!==void 0?t[Xi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Xi]+=65536),(a<o||o==-1)&&(RR(t,n,e,u),t[Xi]=(t[Xi]&4294901760)+u+2),u++}function zI(t,e){ir(4,t,e);let n=oe(null);try{e.call(t)}finally{oe(n),ir(5,t,e)}}function RR(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[j]>>14<t[Xi]>>16&&(t[j]&3)===e&&(t[j]+=16384,zI(a,o)):zI(a,o)}var ro=-1,Bs=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function NR(t){return t instanceof Bs}function PR(t){return(t.flags&8)!==0}function kR(t){return(t.flags&16)!==0}function h0(t){return t!==ro}function Pc(t){return t&32767}function OR(t){return t>>16}function kc(t,e){let n=OR(t),r=e;for(;n>0;)r=r[Qs],n--;return r}var tp=!0;function Oc(t){let e=tp;return tp=t,e}var FR=256,f0=FR-1,p0=5,LR=0,cn={};function VR(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ns)&&(r=n[Ns]),r==null&&(r=n[Ns]=LR++);let i=r&f0,o=1<<i;e.data[t+(i>>p0)]|=o}function g0(t,e){let n=m0(t,e);if(n!==-1)return n;let r=e[Q];r.firstCreatePass&&(t.injectorIndex=e.length,Of(r.data,t),Of(e,null),Of(r.blueprint,null));let i=Zp(t,e),o=t.injectorIndex;if(h0(i)){let s=Pc(i),a=kc(i,e),u=a[Q].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|u[s+c]}return e[o+8]=i,o}function Of(t,e){t.push(0,0,0,0,0,0,0,0,e)}function m0(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Zp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=I0(i),r===null)return ro;if(n++,i=i[Qs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ro}function jR(t,e,n){VR(t,e,n)}function y0(t,e,n){if(n&Z.Optional||t!==void 0)return t;kp(e,"NodeInjector")}function v0(t,e,n,r){if(n&Z.Optional&&r===void 0&&(r=null),!(n&(Z.Self|Z.Host))){let i=t[io],o=wt(void 0);try{return i?i.get(e,r,n&Z.Optional):TE(e,r,n&Z.Optional)}finally{wt(o)}}return y0(r,e,n)}function w0(t,e,n,r=Z.Default,i){if(t!==null){if(e[j]&2048&&!(r&Z.Self)){let s=zR(t,e,n,r,cn);if(s!==cn)return s}let o=_0(t,e,n,r,cn);if(o!==cn)return o}return v0(e,n,r,i)}function _0(t,e,n,r,i){let o=$R(n);if(typeof o=="function"){if(!i0(e,t,r))return r&Z.Host?y0(i,n,r):v0(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&Z.Optional))kp(n);else return s}finally{u0()}}else if(typeof o=="number"){let s=null,a=m0(t,e),u=ro,c=r&Z.Host?e[At][Yt]:null;for((a===-1||r&Z.SkipSelf)&&(u=a===-1?Zp(t,e):e[a+8],u===ro||!GI(r,!1)?a=-1:(s=e[Q],a=Pc(u),e=kc(u,e)));a!==-1;){let l=e[Q];if(HI(o,a,l.data)){let d=UR(a,e,n,s,r,c);if(d!==cn)return d}u=e[a+8],u!==ro&&GI(r,e[Q].data[a+8]===c)&&HI(o,a,e)?(s=l,a=Pc(u),e=kc(u,e)):a=-1}}return i}function UR(t,e,n,r,i,o){let s=e[Q],a=s.data[t+8],u=r==null?Ys(a)&&tp:r!=s&&(a.type&3)!==0,c=i&Z.Host&&o===a,l=BR(a,s,n,u,c);return l!==null?$s(e,s,l,a):cn}function BR(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,c=t.directiveEnd,l=o>>20,d=r?a:a+l,h=i?a+l:c;for(let f=d;f<h;f++){let v=s[f];if(f<u&&n===v||f>=u&&v.type===n)return f}if(i){let f=s[u];if(f&&Zs(f)&&f.type===n)return u}return null}function $s(t,e,n,r){let i=t[n],o=e.data;if(NR(i)){let s=i;s.resolving&&vM(yM(o[n]));let a=Oc(s.canSeeViewProviders);s.resolving=!0;let u,c=s.injectImpl?wt(s.injectImpl):null,l=i0(t,r,Z.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&MR(n,o[n],e)}finally{c!==null&&wt(c),Oc(a),s.resolving=!1,u0()}}return i}function $R(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ns)?t[Ns]:void 0;return typeof e=="number"?e>=0?e&f0:qR:e}function HI(t,e,n){let r=1<<t;return!!(n[e+(t>>p0)]&r)}function GI(t,e){return!(t&Z.Self)&&!(t&Z.Host&&e)}var qr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return w0(this._tNode,this._lView,e,tl(r),n)}};function qR(){return new qr(Ln(),Ie())}function Jp(t){return Ws(()=>{let e=t.prototype.constructor,n=e[bc]||np(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[bc]||np(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function np(t){return vE(t)?()=>{let e=np(Ot(t));return e&&e()}:zr(t)}function zR(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[j]&2048&&!(s[j]&512);){let a=_0(o,s,n,r|Z.Self,cn);if(a!==cn)return a;let u=o.parent;if(!u){let c=s[$E];if(c){let l=c.get(n,cn,r);if(l!==cn)return l}u=I0(s),s=s[Qs]}o=u}return i}function I0(t){let e=t[Q],n=e.type;return n===2?e.declTNode:n===1?t[Yt]:null}function WI(t,e=null,n=null,r){let i=E0(t,e,n,r);return i.resolveInjectorInitializers(),i}function E0(t,e=null,n=null,r,i=new Set){let o=[n||Wt,zM(t)];return r=r||(typeof t=="object"?void 0:Ct(t)),new Fs(o,e||Up(),r||null,i)}var Jt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return WI({name:""},i,r,"");{let o=r.name??"";return WI({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=ks,e.NULL=new xc,e.\u0275prov=P({token:e,providedIn:"any",factory:()=>D(SE)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var HR="ngOriginalError";function Ff(t){return t[HR]}var hn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Ff(e);for(;n&&Ff(n);)n=Ff(n);return n||null}},D0=new R("",{providedIn:"root",factory:()=>E(hn).handleError.bind(void 0)}),Xp=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=GR,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),rp=class extends Xp{constructor(e){super(),this._lView=e}onDestroy(e){return XE(this._lView,e),()=>pR(this._lView,e)}};function GR(){return new rp(Ie())}function WR(){return cl(Ln(),Ie())}function cl(t,e){return new ll(Zt(t,e))}var ll=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=WR;let t=e;return t})();var ip=class extends Se{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,BE()&&(this.destroyRef=E(Xp,{optional:!0})??void 0)}emit(e){let n=oe(null);try{super.next(e)}finally{oe(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=Lf(o),i&&(i=Lf(i)),s&&(s=Lf(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof be&&e.add(a),a}};function Lf(t){return e=>{setTimeout(t,void 0,e)}}var lt=ip;var KR="ngSkipHydration",QR="ngskiphydration";function T0(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===QR)return!0}return!1}function C0(t){return t.hasAttribute(KR)}function Fc(t){return(t.flags&128)===128}function YR(t){if(Fc(t))return!0;let e=t.parent;for(;e;){if(Fc(t)||T0(e))return!0;e=e.parent}return!1}var b0=new Map,ZR=0;function JR(){return ZR++}function XR(t){b0.set(t[sl],t)}function eN(t){b0.delete(t[sl])}var KI="__ngContext__";function Kr(t,e){sr(e)?(t[KI]=e[sl],XR(e)):t[KI]=e}function S0(t){return x0(t[Ls])}function A0(t){return x0(t[Kt])}function x0(t){for(;t!==null&&!pn(t);)t=t[Kt];return t}var op;function M0(t){op=t}function dl(){if(op!==void 0)return op;if(typeof document<"u")return document;throw new F(210,!1)}var ta=new R("",{providedIn:"root",factory:()=>tN}),tN="ng",eg=new R(""),rt=new R("",{providedIn:"platform",factory:()=>"unknown"});var tg=new R("",{providedIn:"root",factory:()=>dl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function nN(){let t=new Jr;return E(rt)==="browser"&&(t.store=rN(dl(),E(ta))),t}var Jr=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(r,i){return this.store[r]!==void 0?this.store[r]:i}set(r,i){this.store[r]=i}remove(r){delete this.store[r]}hasKey(r){return this.store.hasOwnProperty(r)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(r,i){this.onSerializeCallbacks[r]=i}toJson(){for(let r in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(r))try{this.store[r]=this.onSerializeCallbacks[r]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=P({token:e,providedIn:"root",factory:nN});let t=e;return t})();function rN(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var R0="h",N0="b",sp=function(t){return t.FirstChild="f",t.NextSibling="n",t}(sp||{}),iN="e",oN="t",ng="c",P0="x",Lc="r",sN="i",aN="n",uN="d",cN="__nghData__",k0=cN,Vf="ngh",lN="nghm",O0=()=>null;function dN(t,e,n=!1){let r=t.getAttribute(Vf);if(r==null)return null;let[i,o]=r.split("|");if(r=n?o:i,!r)return null;let s=o?`|${o}`:"",a=n?i:s,u={};if(r!==""){let l=e.get(Jr,null,{optional:!0});l!==null&&(u=l.get(k0,[])[Number(r)])}let c={data:u,firstChild:t.firstChild??null};return n&&(c.firstChild=t,hl(c,0,t.nextSibling)),a?t.setAttribute(Vf,a):t.removeAttribute(Vf),c}function hN(){O0=dN}function rg(t,e,n=!1){return O0(t,e,n)}function fN(t){let e=t._lView;return e[Q].type===2?null:(GE(e)&&(e=e[et]),e)}function pN(t){return t.textContent?.replace(/\s/gm,"")}function gN(t){let e=dl(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=pN(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function hl(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function ap(t,e){return t.segmentHeads?.[e]??null}function mN(t,e){let n=t.data,r=n[iN]?.[e]??null;return r===null&&n[ng]?.[e]&&(r=ig(t,e)),r}function F0(t,e){return t.data[ng]?.[e]??null}function ig(t,e){let n=F0(t,e)??[],r=0;for(let i of n)r+=i[Lc]*(i[P0]??1);return r}function fl(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[uN];t.disconnectedNodes=n?new Set(n):null}return!!t.disconnectedNodes?.has(e)}var vc=new R(""),L0=!1,V0=new R("",{providedIn:"root",factory:()=>L0}),yN=new R("");var Vc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gE})`}};function og(t){return t instanceof Vc?t.changingThisBreaksApplicationSecurity:t}function j0(t,e){let n=vN(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${gE})`)}return n===e}function vN(t){return t instanceof Vc&&t.getTypeName()||null}var wN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function U0(t){return t=String(t),t.match(wN)?t:"unsafe:"+t}var sg=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(sg||{});function ag(t){let e=_N();return e?e.sanitize(sg.URL,t)||"":j0(t,"URL")?og(t):U0(Pp(t))}function _N(){let t=Ie();return t&&t[Qt].sanitizer}var IN=/^>|^->|<!--|-->|--!>|<!-$/g,EN=/(<|>)/g,DN="\u200B$1\u200B";function TN(t){return t.replace(IN,e=>e.replace(EN,DN))}function CN(t){return t.ownerDocument.body}function B0(t){return t instanceof Function?t():t}function Rs(t){return(t??E(Jt)).get(rt)==="browser"}var Xr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Xr||{}),bN;function ug(t,e){return bN(t,e)}function eo(t,e,n,r,i){if(r!=null){let o,s=!1;pn(r)?o=r:sr(r)&&(s=!0,r=r[St]);let a=dn(r);t===0&&n!==null?i==null?z0(e,n,a):jc(e,n,a,i||null,!0):t===1&&n!==null?jc(e,n,a,i||null,!0):t===2?fg(e,a,s):t===3&&e.destroyNode(a),o!=null&&qN(e,t,o,n,i)}}function cg(t,e){return t.createText(e)}function SN(t,e,n){t.setValue(e,n)}function lg(t,e){return t.createComment(TN(e))}function pl(t,e,n){return t.createElement(e,n)}function AN(t,e){$0(t,e),e[St]=null,e[Yt]=null}function xN(t,e,n,r,i,o){r[St]=i,r[Yt]=e,ml(t,r,n,1,i,o)}function $0(t,e){e[Qt].changeDetectionScheduler?.notify(1),ml(t,e,e[je],2,null,null)}function MN(t){let e=t[Ls];if(!e)return jf(t[Q],t);for(;e;){let n=null;if(sr(e))n=e[Ls];else{let r=e[Xe];r&&(n=r)}if(!n){for(;e&&!e[Kt]&&e!==t;)sr(e)&&jf(e[Q],e),e=e[Ke];e===null&&(e=t),sr(e)&&jf(e[Q],e),n=e&&e[Kt]}e=n}}function RN(t,e,n,r){let i=Xe+r,o=n.length;r>0&&(n[i-1][Kt]=e),r<o-Xe?(e[Kt]=n[i],bE(n,Xe+r,e)):(n.push(e),e[Kt]=null),e[Ke]=n;let s=e[ol];s!==null&&n!==s&&NN(s,e);let a=e[oo];a!==null&&a.insertView(t),Xf(e),e[j]|=128}function NN(t,e){let n=t[Rc],i=e[Ke][Ke][At];e[At]!==i&&(t[j]|=Bp.HasTransplantedViews),n===null?t[Rc]=[e]:n.push(e)}function q0(t,e){let n=t[Rc],r=n.indexOf(e);n.splice(r,1)}function qs(t,e){if(t.length<=Xe)return;let n=Xe+e,r=t[n];if(r){let i=r[ol];i!==null&&i!==t&&q0(i,r),e>0&&(t[n-1][Kt]=r[Kt]);let o=Ac(t,Xe+e);AN(r[Q],r);let s=o[oo];s!==null&&s.detachView(o[Q]),r[Ke]=null,r[Kt]=null,r[j]&=-129}return r}function gl(t,e){if(!(e[j]&256)){let n=e[je];n.destroyNode&&ml(t,e,n,3,null,null),MN(e)}}function jf(t,e){if(e[j]&256)return;let n=oe(null);try{e[j]&=-129,e[j]|=256,e[Gr]&&iI(e[Gr]),kN(t,e),PN(t,e),e[Q].type===1&&e[je].destroy();let r=e[ol];if(r!==null&&pn(e[Ke])){r!==e[Ke]&&q0(r,e);let i=e[oo];i!==null&&i.detachView(t)}eN(e)}finally{oe(n)}}function PN(t,e){let n=t.cleanup,r=e[BI];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[BI]=null);let i=e[or];if(i!==null){e[or]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function kN(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Bs)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];ir(4,a,u);try{u.call(a)}finally{ir(5,a,u)}}else{ir(4,i,o);try{o.call(i)}finally{ir(5,i,o)}}}}}function ON(t,e,n){return FN(t,e.parent,n)}function FN(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[St];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===ln.None||o===ln.Emulated)return null}return Zt(r,n)}}function jc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function z0(t,e,n){t.appendChild(e,n)}function QI(t,e,n,r,i){r!==null?jc(t,e,n,r,i):z0(t,e,n)}function LN(t,e,n,r){t.removeChild(e,n,r)}function dg(t,e){return t.parentNode(e)}function VN(t,e){return t.nextSibling(e)}function jN(t,e,n){return BN(t,e,n)}function UN(t,e,n){return t.type&40?Zt(t,n):null}var BN=UN,YI;function hg(t,e,n,r){let i=ON(t,r,e),o=e[je],s=r.parent||e[Yt],a=jN(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)QI(o,i,n[u],a,!1);else QI(o,i,n,a,!1);YI!==void 0&&YI(o,r,e,n,i)}function Tc(t,e){if(e!==null){let n=e.type;if(n&3)return Zt(e,t);if(n&4)return up(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Tc(t,r);{let i=t[e.index];return pn(i)?up(-1,i):dn(i)}}else{if(n&32)return ug(e,t)()||dn(t[e.index]);{let r=H0(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Us(t[At]);return Tc(i,r)}else return Tc(t,e.next)}}}return null}function H0(t,e){if(e!==null){let r=t[At][Yt],i=e.projection;return r.projection[i]}return null}function up(t,e){let n=Xe+t+1;if(n<e.length){let r=e[n],i=r[Q].firstChild;if(i!==null)return Tc(r,i)}return e[Fn]}function fg(t,e,n){let r=dg(t,e);r&&LN(t,r,e,n)}function G0(t){t.textContent=""}function pg(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Kr(dn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)pg(t,e,n.child,r,i,o,!1),eo(e,t,i,a,o);else if(u&32){let c=ug(n,r),l;for(;l=c();)eo(e,t,i,l,o);eo(e,t,i,a,o)}else u&16?$N(t,e,r,n,i,o):eo(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ml(t,e,n,r,i,o){pg(n,r,t.firstChild,e,i,o,!1)}function $N(t,e,n,r,i,o){let s=n[At],u=s[Yt].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let l=u[c];eo(e,t,i,l,o)}else{let c=u,l=s[Ke];Fc(r)&&(c.flags|=128),pg(t,e,c,l,i,o,!0)}}function qN(t,e,n,r,i){let o=n[Fn],s=dn(n);o!==s&&eo(e,t,r,o,i);for(let a=Xe;a<n.length;a++){let u=n[a];ml(u[Q],u,t,e,r,o)}}function zN(t,e,n){t.setAttribute(e,"style",n)}function W0(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function K0(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Wf(t,e,r),i!==null&&W0(t,e,i),o!==null&&zN(t,e,o)}var lo={};function ho(t=1){Q0(Zr(),Ie(),ul()+t,!1)}function Q0(t,e,n,r){if(!r)if((e[j]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Ec(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Dc(e,o,0,n)}Wr(n)}function mn(t,e=Z.Default){let n=Ie();if(n===null)return D(t,e);let r=Ln();return w0(r,n,Ot(t),e)}function Y0(){let t="invalid";throw new Error(t)}function Z0(t,e,n,r,i,o){let s=oe(null);try{let a=null;i&ar.SignalBased&&(a=e[r][eI]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&ar.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):WE(e,a,r,o)}finally{oe(s)}}function HN(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Wr(~i);else{let o=i,s=n[++r],a=n[++r];CR(s,o);let u=e[o];a(2,u)}}}finally{Wr(-1)}}function yl(t,e,n,r,i,o,s,a,u,c,l){let d=e.blueprint.slice();return d[St]=i,d[j]=r|4|128|8|64,(c!==null||t&&t[j]&2048)&&(d[j]|=2048),JE(d),d[Ke]=d[Qs]=t,d[Ft]=n,d[Qt]=s||t&&t[Qt],d[je]=a||t&&t[je],d[io]=u||t&&t[io]||null,d[Yt]=o,d[sl]=JR(),d[Lt]=l,d[$E]=c,d[At]=e.type==2?t[At]:d,d}function vl(t,e,n,r,i){let o=t.data[e];if(o===null)o=GN(t,e,n,r,i),TR()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=IR();o.injectorIndex=s===null?-1:s.injectorIndex}return Xs(o,!0),o}function GN(t,e,n,r,i){let o=t0(),s=n0(),a=s?o:o&&o.parent,u=t.data[e]=JN(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function J0(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function X0(t,e,n,r,i){let o=ul(),s=r&2;try{Wr(-1),s&&e.length>et&&Q0(t,e,et,!1),ir(s?2:0,i),n(r,i)}finally{Wr(o),ir(s?3:1,i)}}function eD(t,e,n){if(zE(e)){let r=oe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{oe(r)}}}function tD(t,e,n){e0()&&(oP(t,e,n,Zt(n,e)),(n.flags&64)===64&&aD(t,e,n))}function nD(t,e,n=Zt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function rD(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=gg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function gg(t,e,n,r,i,o,s,a,u,c,l){let d=et+r,h=d+i,f=WN(d,h),v=typeof c=="function"?c():c;return f[Q]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:v,incompleteFirstPass:!1,ssrId:l}}function WN(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:lo);return n}function KN(t,e,n,r){let o=r.get(V0,L0)||n===ln.ShadowDom,s=t.selectRootElement(e,o);return QN(s),s}function QN(t){iD(t)}var iD=()=>null;function YN(t){C0(t)?G0(t):gN(t)}function ZN(){iD=YN}function JN(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Js()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ZI(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=ar.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}t===0?JI(r,n,c,a,u):JI(r,n,c,a)}return r}function JI(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function XN(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,c=null;for(let l=r;l<i;l++){let d=o[l],h=n?n.get(d):null,f=h?h.inputs:null,v=h?h.outputs:null;u=ZI(0,d.inputs,l,u,f),c=ZI(1,d.outputs,l,c,v);let y=u!==null&&s!==null&&!Vp(e)?pP(u,l,s):null;a.push(y)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}function eP(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function tP(t,e,n,r,i,o,s,a){let u=Zt(e,n),c=e.inputs,l;!a&&c!=null&&(l=c[r])?(mg(t,n,l,r,i),Ys(e)&&nP(n,e.index)):e.type&3?(r=eP(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function nP(t,e){let n=uo(e,t);n[j]&16||(n[j]|=64)}function oD(t,e,n,r){if(e0()){let i=r===null?null:{"":-1},o=aP(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&sD(t,e,n,s,i,a),i&&uP(n,r,i)}n.mergedAttrs=Lp(n.mergedAttrs,n.attrs)}function sD(t,e,n,r,i,o){for(let c=0;c<r.length;c++)jR(g0(n,e),t,r[c].type);lP(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let l=r[c];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,u=J0(t,e,r.length,null);for(let c=0;c<r.length;c++){let l=r[c];n.mergedAttrs=Lp(n.mergedAttrs,l.hostAttrs),dP(t,n,e,u,l),cP(u,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}XN(t,n,o)}function rP(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;iP(s)!=a&&s.push(a),s.push(n,r,o)}}function iP(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function oP(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Ys(n)&&hP(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||g0(n,e),Kr(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],c=$s(e,t,a,n);if(Kr(c,e),s!==null&&fP(e,a-i,c,u,n,s),Zs(u)){let l=uo(n.index,e);l[Ft]=$s(e,t,a,n)}}}function aD(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=bR();try{Wr(o);for(let a=r;a<i;a++){let u=t.data[a],c=e[a];ep(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&sP(u,c)}}finally{Wr(-1),ep(s)}}function sP(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function aP(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(OM(e,s.selectors,!1))if(r||(r=[]),Zs(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;cp(t,e,u)}else r.unshift(s),cp(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function cp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function uP(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new F(-301,!1);r.push(e[i],o)}}}function cP(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Zs(e)&&(n[""]=t)}}function lP(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function dP(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=zr(i.type,!0)),s=new Bs(o,Zs(i),mn);t.blueprint[r]=s,n[r]=s,rP(t,e,r,J0(t,n,i.hostVars,lo),i)}function hP(t,e,n){let r=Zt(e,t),i=rD(n),o=t[Qt].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=wl(t,yl(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function fP(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],c=s[a++],l=s[a++],d=s[a++];Z0(r,n,u,c,l,d)}}function pP(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function uD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function cD(t,e){let n=t.contentQueries;if(n!==null){let r=oe(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];r0(o),a.contentQueries(2,e[s],s)}}}finally{oe(r)}}}function wl(t,e){return t[Ls]?t[$I][Kt]=e:t[Ls]=e,t[$I]=e,e}function lp(t,e,n){r0(0);let r=oe(null);try{e(t,n)}finally{oe(r)}}function gP(t,e){let n=t[io],r=n?n.get(hn,null):null;r&&r.handleError(e)}function mg(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],c=e[s],l=t.data[s];Z0(l,c,r,a,u,i)}}function mP(t,e,n){let r=lR(e,t);SN(t[je],r,n)}function yP(t,e){let n=uo(e,t),r=n[Q];vP(r,n);let i=n[St];i!==null&&n[Lt]===null&&(n[Lt]=rg(i,n[io])),yg(r,n,n[Ft])}function vP(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function yg(t,e,n){Wp(e);try{let r=t.viewQuery;r!==null&&lp(1,r,n);let i=t.template;i!==null&&X0(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[oo]?.finishViewCreation(t),t.staticContentQueries&&cD(t,e),t.staticViewQueries&&lp(2,t.viewQuery,n);let o=t.components;o!==null&&wP(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[j]&=-5,Kp()}}function wP(t,e){for(let n=0;n<e.length;n++)yP(t,e[n])}function vg(t,e,n,r){let i=oe(null);try{let o=e.tView,a=t[j]&4096?4096:16,u=yl(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[e.index];u[ol]=c;let l=t[oo];return l!==null&&(u[oo]=l.createEmbeddedView(o)),yg(o,u,n),u}finally{oe(i)}}function _P(t,e){let n=Xe+e;if(n<t.length)return t[n]}function Uc(t,e){return!e||e.firstChild===null||Fc(t)}function wg(t,e,n,r=!0){let i=e[Q];if(RN(i,e,t,n),r){let s=up(n,t),a=e[je],u=dg(a,t[Fn]);u!==null&&xN(i,t[Yt],a,e,u,s)}let o=e[Lt];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function IP(t,e){let n=qs(t,e);return n!==void 0&&gl(n[Q],n),n}function Bc(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(dn(o)),pn(o)&&EP(o,r);let s=n.type;if(s&8)Bc(t,e,n.child,r);else if(s&32){let a=ug(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=H0(e,n);if(Array.isArray(a))r.push(...a);else{let u=Us(e[At]);Bc(u[Q],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function EP(t,e){for(let n=Xe;n<t.length;n++){let r=t[n],i=r[Q].firstChild;i!==null&&Bc(r[Q],r,i,e)}t[Fn]!==t[St]&&e.push(t[Fn])}var lD=[];function DP(t){return t[Gr]??TP(t)}function TP(t){let e=lD.pop()??Object.create(bP);return e.lView=t,e}function CP(t){t.lView[Gr]!==t&&(t.lView=null,lD.push(t))}var bP=ye(M({},tI),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{js(t.lView)},consumerOnSignalRead(){this.lView[Gr]=this}}),dD=100;function hD(t,e=!0,n=0){let r=t[Qt],i=r.rendererFactory,o=!1;o||i.begin?.();try{SP(t,n)}catch(s){throw e&&gP(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function SP(t,e){dp(t,e);let n=0;for(;zp(t);){if(n===dD)throw new F(103,!1);n++,dp(t,1)}}function AP(t,e,n,r){let i=e[j];if((i&256)===256)return;let o=!1;!o&&e[Qt].inlineEffectRunner?.flush(),Wp(e);let s=null,a=null;!o&&xP(t)&&(a=DP(e),s=nI(a));try{JE(e),DR(t.bindingStartIndex),n!==null&&X0(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let d=t.preOrderCheckHooks;d!==null&&Ec(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Dc(e,d,0,null),kf(e,0)}if(MP(e),fD(e,0),t.contentQueries!==null&&cD(t,e),!o)if(u){let d=t.contentCheckHooks;d!==null&&Ec(e,d)}else{let d=t.contentHooks;d!==null&&Dc(e,d,1),kf(e,1)}HN(t,e);let c=t.components;c!==null&&gD(e,c,0);let l=t.viewQuery;if(l!==null&&lp(2,l,r),!o)if(u){let d=t.viewCheckHooks;d!==null&&Ec(e,d)}else{let d=t.viewHooks;d!==null&&Dc(e,d,2),kf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Pf]){for(let d of e[Pf])d();e[Pf]=null}o||(e[j]&=-73)}catch(u){throw js(e),u}finally{a!==null&&(rI(a,s),CP(a)),Kp()}}function xP(t){return t.type!==2}function fD(t,e){for(let n=S0(t);n!==null;n=A0(n))for(let r=Xe;r<n.length;r++){let i=n[r];pD(i,e)}}function MP(t){for(let e=S0(t);e!==null;e=A0(e)){if(!(e[j]&Bp.HasTransplantedViews))continue;let n=e[Rc];for(let r=0;r<n.length;r++){let i=n[r],o=i[Ke];fR(i)}}}function RP(t,e,n){let r=uo(e,t);pD(r,n)}function pD(t,e){qp(t)&&dp(t,e)}function dp(t,e){let r=t[Q],i=t[j],o=t[Gr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&df(o)),o&&(o.dirty=!1),t[j]&=-9217,s)AP(r,t,r.template,t[Ft]);else if(i&8192){fD(t,1);let a=r.components;a!==null&&gD(t,a,1)}}function gD(t,e,n){for(let r=0;r<e.length;r++)RP(t,e[r],n)}function mD(t){for(t[Qt].changeDetectionScheduler?.notify();t;){t[j]|=64;let e=Us(t);if(GE(t)&&!e)return t;t=e}return null}var Qr=class{get rootNodes(){let e=this._lView,n=e[Q];return Bc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ft]}set context(e){this._lView[Ft]=e}get destroyed(){return(this._lView[j]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ke];if(pn(e)){let n=e[Mc],r=n?n.indexOf(this):-1;r>-1&&(qs(e,r),Ac(n,r))}this._attachedToViewContainer=!1}gl(this._lView[Q],this._lView)}onDestroy(e){XE(this._lView,e)}markForCheck(){mD(this._cdRefInjectingView||this._lView)}detach(){this._lView[j]&=-129}reattach(){Xf(this._lView),this._lView[j]|=128}detectChanges(){this._lView[j]|=1024,hD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new F(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,$0(this._lView[Q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new F(902,!1);this._appRef=e,Xf(this._lView)}},_g=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=kP;let t=e;return t})(),NP=_g,PP=class extends NP{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=vg(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Qr(i)}};function kP(){return OP(Ln(),Ie())}function OP(t,e){return t.type&4?new PP(e,t,cl(t,e)):null}function yD(t){let e=t[Vs]??[],r=t[Ke][je];for(let i of e)FP(i,r);t[Vs]=Wt}function FP(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[Lc];for(;n<i;){let o=r.nextSibling;fg(e,r,!1),r=o,n++}}}function vD(t){yD(t);for(let e=Xe;e<t.length;e++)$c(t[e])}function LP(t){let e=t[Lt]?.i18nNodes;if(e){let n=t[je];for(let r of e.values())fg(n,r,!1);t[Lt].i18nNodes=void 0}}function $c(t){LP(t);let e=t[Q];for(let n=et;n<e.bindingStartIndex;n++)if(pn(t[n])){let r=t[n];vD(r)}else sr(t[n])&&$c(t[n])}function VP(t){let e=t._views;for(let n of e){let r=fN(n);if(r!==null&&r[St]!==null)if(sr(r))$c(r);else{let i=r[St];$c(i),vD(r)}}}var jP=new RegExp(`^(\\d+)*(${N0}|${R0})*(.*)`);function UP(t){let e=t.match(jP),[n,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[u,c,l]of o.matchAll(/(f|n)(\d*)/g)){let d=parseInt(l,10)||1;a.push(c,d)}return[s,...a]}function BP(t){return!t.prev&&t.parent?.type===8}function Uf(t){return t.index-et}function $P(t,e){let n=t.i18nNodes;if(n){let r=n.get(e);return r&&n.delete(e),r}return null}function _l(t,e,n,r){let i=Uf(r),o=$P(t,i);if(!o){let s=t.data[aN];if(s?.[i])o=zP(s[i],n);else if(e.firstChild===r)o=t.firstChild;else{let a=r.prev===null,u=r.prev??r.parent;if(BP(r)){let c=Uf(r.parent);o=ap(t,c)}else{let c=Zt(u,n);if(a)o=c.firstChild;else{let l=Uf(u),d=ap(t,l);if(u.type===2&&d){let f=ig(t,l)+1;o=Il(f,d)}else o=c.nextSibling}}}}return o}function Il(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function qP(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case sp.FirstChild:n=n.firstChild;break;case sp.NextSibling:n=n.nextSibling;break}}return n}function zP(t,e){let[n,...r]=UP(t),i;if(n===R0)i=e[At][St];else if(n===N0)i=CN(e[At][St]);else{let o=Number(n);i=dn(e[o+et])}return qP(i,r)}function HP(t,e){let n=[];for(let r of e)for(let i=0;i<(r[P0]??1);i++){let o={data:r,firstChild:null};r[Lc]>0&&(o.firstChild=t,t=Il(r[Lc],t)),n.push(o)}return[t,n]}var wD=()=>null;function GP(t,e){let n=t[Vs];return!e||n===null||n.length===0?null:n[0].data[sN]===e?n.shift():(yD(t),null)}function WP(){wD=GP}function qc(t,e){return wD(t,e)}var zc=class{},hp=class{},Hc=class{};function KP(t){let e=Error(`No component factory found for ${Ct(t)}.`);return e[QP]=t,e}var QP="ngComponent";var fp=class{resolveComponentFactory(e){throw KP(e)}},El=(()=>{let e=class e{};e.NULL=new fp;let t=e;return t})(),zs=class{};var YP=(()=>{let e=class e{};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Bf={};var XI=new Set;function ei(t){XI.has(t)||(XI.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function eE(...t){}function ZP(){let t=typeof Tt.requestAnimationFrame=="function",e=Tt[t?"requestAnimationFrame":"setTimeout"],n=Tt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var X=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lt(!1),this.onMicrotaskEmpty=new lt(!1),this.onStable=new lt(!1),this.onError=new lt(!1),typeof Zone>"u")throw new F(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=ZP().nativeRequestAnimationFrame,ek(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new F(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new F(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,JP,eE,eE);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},JP={};function Ig(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function XP(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Tt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,pp(t),t.isCheckStableRunning=!0,Ig(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),pp(t))}function ek(t){let e=()=>{XP(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(tk(a))return n.invokeTask(i,o,s,a);try{return tE(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),nE(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return tE(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),nE(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,pp(t),Ig(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function pp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function tE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function nE(t){t._nesting--,Ig(t)}var gp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lt,this.onMicrotaskEmpty=new lt,this.onStable=new lt,this.onError=new lt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function tk(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function nk(t="zone.js",e){return t==="noop"?new gp:t==="zone.js"?new X(e):t}var to=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(to||{}),rk={destroy(){}};function Eg(t,e){!e&&tR(Eg);let n=e?.injector??E(Jt);if(!Rs(n))return rk;ei("NgAfterNextRender");let r=n.get(Dg),i=r.handler??=new yp,o=e?.phase??to.MixedReadWrite,s=()=>{i.unregister(u),a()},a=n.get(Xp).onDestroy(s),u=fn(n,()=>new mp(o,()=>{s(),t()}));return i.register(u),{destroy:s}}var mp=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=E(X),this.errorHandler=E(hn,{optional:!0}),E(zc,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},yp=class{constructor(){this.executingCallbacks=!1,this.buckets={[to.EarlyRead]:new Set,[to.Write]:new Set,[to.MixedReadWrite]:new Set,[to.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Dg=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function vp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=RI(i,a);else if(o==2){let u=a,c=e[++s];r=RI(r,u+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Gc=class extends El{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ur(e);return new so(n,this.ngModule)}};function rE(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function ik(t){let e=t.toLowerCase();return e==="svg"?ZE:e==="math"?aR:null}var wp=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=tl(r);let i=this.injector.get(e,Bf,r);return i!==Bf||n===Bf?i:this.parentInjector.get(e,n,r)}},so=class extends Hc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=rE(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return rE(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=jM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=oe(null);try{i=i||this.ngModule;let s=i instanceof bt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new wp(e,s):e,u=a.get(zs,null);if(u===null)throw new F(407,!1);let c=a.get(YP,null),l=a.get(Dg,null),d=a.get(zc,null),h={rendererFactory:u,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},f=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",y=r?KN(f,r,this.componentDef.encapsulation,a):pl(f,v,ik(v)),w=512;this.componentDef.signals?w|=4096:this.componentDef.onPush||(w|=16);let T=null;y!==null&&(T=rg(y,a,!0));let L=gg(0,null,null,1,0,null,null,null,null,null,null),A=yl(null,L,null,w,null,null,h,f,a,null,T);Wp(A);let $,q;try{let G=this.componentDef,le,mt=null;G.findHostDirectiveDefs?(le=[],mt=new Map,G.findHostDirectiveDefs(G,le,mt),le.push(G)):le=[G];let of=ok(A,y),qu=sk(of,y,G,le,A,h,f);q=$p(L,et),y&&ck(f,G,y,r),n!==void 0&&lk(q,this.ngContentSelectors,n),$=uk(qu,G,le,mt,A,[dk]),yg(L,A,null)}finally{Kp()}return new _p(this.componentType,$,cl(q,A),A,q)}finally{oe(o)}}},_p=class extends hp{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Qr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;mg(o[Q],o,i,e,n),this.previousInputValues.set(e,n);let s=uo(this._tNode.index,o);mD(s)}}get injector(){return new qr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ok(t,e){let n=t[Q],r=et;return t[r]=e,vl(n,r,2,"#host",null)}function sk(t,e,n,r,i,o,s){let a=i[Q];ak(r,t,e,s);let u=null;e!==null&&(u=rg(e,i[io]));let c=o.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=yl(i,rD(n),null,l,i[t.index],t,o,c,null,null,u);return a.firstCreatePass&&cp(a,t,r.length-1),wl(i,d),i[t.index]=d}function ak(t,e,n,r){for(let i of t)e.mergedAttrs=Lp(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(vp(e,e.mergedAttrs,!0),n!==null&&K0(r,n,e))}function uk(t,e,n,r,i,o){let s=Ln(),a=i[Q],u=Zt(s,i);sD(a,i,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,h=$s(i,a,d,s);Kr(h,i)}aD(a,i,s),u&&Kr(u,i);let c=$s(i,a,s.directiveStart+s.componentOffset,s);if(t[Ft]=i[Ft]=c,o!==null)for(let l of o)l(c,e);return eD(a,s,i),c}function ck(t,e,n,r){if(r)Wf(t,n,["ng-version","17.3.3"]);else{let{attrs:i,classes:o}=UM(e.selectors[0]);i&&Wf(t,n,i),o&&o.length>0&&W0(t,n,o.join(" "))}}function lk(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function dk(){let t=Ln();Yp(Ie()[Q],t)}var na=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=hk;let t=e;return t})();function hk(){let t=Ln();return pk(t,Ie())}var fk=na,_D=class extends fk{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return cl(this._hostTNode,this._hostLView)}get injector(){return new qr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Zp(this._hostTNode,this._hostLView);if(h0(e)){let n=kc(e,this._hostLView),r=Pc(e),i=n[Q].data[r+8];return new qr(i,n)}else return new qr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=iE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Xe}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=qc(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Uc(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!rR(e),a;if(s)a=n;else{let v=n||{};a=v.index,r=v.injector,i=v.projectableNodes,o=v.environmentInjector||v.ngModuleRef}let u=s?e:new so(ur(e)),c=r||this.parentInjector;if(!o&&u.ngModule==null){let y=(s?c:this.parentInjector).get(bt,null);y&&(o=y)}let l=ur(u.componentType??{}),d=qc(this._lContainer,l?.id??null),h=d?.firstChild??null,f=u.create(c,i,h,o);return this.insertImpl(f.hostView,a,Uc(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(hR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ke],c=new _D(u,u[Yt],u[Ke]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return wg(s,i,o,r),e.attachToViewContainerRef(),bE($f(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=iE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=qs(this._lContainer,n);r&&(Ac($f(this._lContainer),n),gl(r[Q],r))}detach(e){let n=this._adjustIndex(e,-1),r=qs(this._lContainer,n);return r&&Ac($f(this._lContainer),n)!=null?new Qr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function iE(t){return t[Mc]}function $f(t){return t[Mc]||(t[Mc]=[])}function pk(t,e){let n,r=e[t.index];return pn(r)?n=r:(n=uD(r,e,null,t),e[t.index]=n,wl(e,n)),ID(n,e,t,r),new _D(n,t,e)}function gk(t,e){let n=t[je],r=n.createComment(""),i=Zt(e,t),o=dg(n,i);return jc(n,o,r,VN(n,i),!1),r}var ID=ED,Tg=()=>!1;function mk(t,e,n){return Tg(t,e,n)}function ED(t,e,n,r){if(t[Fn])return;let i;n.type&8?i=dn(r):i=gk(e,n),t[Fn]=i}function yk(t,e,n){if(t[Fn]&&t[Vs])return!0;let r=n[Lt],i=e.index-et;if(!r||YR(e)||fl(r,i))return!1;let s=ap(r,i),a=r.data[ng]?.[i],[u,c]=HP(s,a);return t[Fn]=u,t[Vs]=c,!0}function vk(t,e,n,r){Tg(t,n,e)||ED(t,e,n,r)}function wk(){ID=vk,Tg=yk}function _k(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(Tk))}return o}return Wc.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(c=>{i.template=c}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let c=i.styles.length,l=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),s.push(r(d).then(f=>{a[c+h]=f,l.splice(l.indexOf(d),1),l.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(c=>{a.push(c),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>Ck(o));e.push(u)}),Ek(),Promise.all(e).then(()=>{})}var Wc=new Map,Ik=new Set;function Ek(){let t=Wc;return Wc=new Map,t}function Dk(){return Wc.size===0}function Tk(t){return typeof t=="string"?t:t.text()}function Ck(t){Ik.delete(t)}var cr=class{},Hs=class{};var Kc=class extends cr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gc(this);let i=OE(e);this._bootstrapComponents=B0(i.bootstrap),this._r3Injector=E0(e,n,[{provide:cr,useValue:this},{provide:El,useValue:this.componentFactoryResolver},...r],Ct(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Qc=class extends Hs{constructor(e){super(),this.moduleType=e}create(e){return new Kc(this.moduleType,e,[])}};function bk(t,e,n){return new Kc(t,e,n)}var Ip=class extends cr{constructor(e){super(),this.componentFactoryResolver=new Gc(this),this.instance=null;let n=new Fs([...e.providers,{provide:cr,useValue:this},{provide:El,useValue:this.componentFactoryResolver}],e.parent||Up(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Dl(t,e,n=null){return new Ip({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var ra=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new We(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function DD(t){return Ak(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function Sk(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function Ak(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Cg(t,e,n){return t[e]=n}function TD(t,e){return t[e]}function Yr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function oE(t,e,n,r){let i=Yr(t,e,n);return Yr(t,e+1,r)||i}function xk(t,e,n,r,i,o){let s=oE(t,e,n,r);return oE(t,e+2,i,o)||s}function ia(t){return(t.flags&32)===32}function Mk(t,e,n,r,i,o,s,a,u){let c=e.consts,l=vl(e,t,4,s||null,Nc(c,a));oD(e,n,l,Nc(c,u)),Yp(e,l);let d=l.tView=gg(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function Gs(t,e,n,r,i,o,s,a){let u=Ie(),c=Zr(),l=t+et,d=c.firstCreatePass?Mk(l,c,u,e,n,r,i,o,s):c.data[l];Xs(d,!1);let h=CD(c,u,d,t);Qp()&&hg(c,u,h,d),Kr(h,u);let f=uD(h,u,h,d);return u[l]=f,wl(u,f),mk(f,d,u),HE(d)&&tD(c,u,d),s!=null&&nD(u,d,a),Gs}var CD=bD;function bD(t,e,n,r){return gn(!0),e[je].createComment("")}function Rk(t,e,n,r){let i=e[Lt],o=!i||Js()||ia(n)||fl(i,r);if(gn(o),o)return bD(t,e,n,r);let s=i.data[oN]?.[r]??null;s!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=s);let a=_l(i,t,e,n);hl(i,r,a);let u=ig(i,r);return Il(u,a)}function Nk(){CD=Rk}function Pk(t,e,n,r){return Yr(t,Gp(),n)?e+Pp(n)+r:lo}function oa(t,e,n){let r=Ie(),i=Gp();if(Yr(r,i,e)){let o=Zr(),s=AR();tP(o,s,r,t,e,r[je],n,!1)}return oa}function sE(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";mg(t,n,o[s],s,r)}var Ep=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function qf(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function kk(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;o<=s&&o<=a;){let u=t.at(o),c=e[o],l=qf(o,u,o,c,n);if(l!==0){l<0&&t.updateValue(o,c),o++;continue}let d=t.at(s),h=e[a],f=qf(s,d,a,h,n);if(f!==0){f<0&&t.updateValue(s,h),s--,a--;continue}let v=n(o,u),y=n(s,d),w=n(o,c);if(Object.is(w,y)){let T=n(a,h);Object.is(T,v)?(t.swap(o,s),t.updateValue(s,h),a--,s--):t.move(s,o),t.updateValue(o,c),o++;continue}if(r??=new Yc,i??=uE(t,o,s,n),Dp(t,r,o,w))t.updateValue(o,c),o++,s++;else if(i.has(w))r.set(v,t.detach(o)),s--;else{let T=t.create(o,e[o]);t.attach(o,T),o++,s++}}for(;o<=a;)aE(t,r,n,o,e[o]),o++}else if(e!=null){let a=e[Symbol.iterator](),u=a.next();for(;!u.done&&o<=s;){let c=t.at(o),l=u.value,d=qf(o,c,o,l,n);if(d!==0)d<0&&t.updateValue(o,l),o++,u=a.next();else{r??=new Yc,i??=uE(t,o,s,n);let h=n(o,l);if(Dp(t,r,o,h))t.updateValue(o,l),o++,s++,u=a.next();else if(!i.has(h))t.attach(o,t.create(o,l)),o++,s++,u=a.next();else{let f=n(o,c);r.set(f,t.detach(o)),s--}}}for(;!u.done;)aE(t,r,n,t.length,u.value),u=a.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(a=>{t.destroy(a)})}function Dp(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function aE(t,e,n,r,i){if(Dp(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function uE(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Yc=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};var Tp=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Xe}};var Cp=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function SD(t,e,n,r,i,o,s,a,u,c,l,d,h){ei("NgControlFlow");let f=u!==void 0,v=Ie(),y=a?s.bind(v[At][Ft]):s,w=new Cp(f,y);v[et+t]=w,Gs(t+1,e,n,r,i,o),f&&Gs(t+2,u,c,l,d,h)}var bp=class extends Ep{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Xe}at(e){return this.getLView(e)[Ft].$implicit}attach(e,n){let r=n[Lt];this.needsIndexUpdate||=e!==this.length,wg(this.lContainer,n,e,Uc(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Ok(this.lContainer,e)}create(e,n){let r=qc(this.lContainer,this.templateTNode.tView.ssrId);return vg(this.hostLView,this.templateTNode,new Tp(this.lContainer,n,e),{dehydratedView:r})}destroy(e){gl(e[Q],e)}updateValue(e,n){this.getLView(e)[Ft].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ft].$index=e}getLView(e){return Fk(this.lContainer,e)}};function AD(t){let e=oe(null),n=ul();try{let r=Ie(),i=r[Q],o=r[n];if(o.liveCollection===void 0){let a=n+1,u=cE(r,a),c=lE(i,a);o.liveCollection=new bp(u,r,c)}else o.liveCollection.reset();let s=o.liveCollection;if(kk(s,t,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=Gp(),u=s.length===0;if(Yr(r,a,u)){let c=n+2,l=cE(r,c);if(u){let d=lE(i,c),h=qc(l,d.tView.ssrId),f=vg(r,d,void 0,{dehydratedView:h});wg(l,f,0,Uc(d,h))}else IP(l,0)}}}finally{oe(e)}}function cE(t,e){return t[e]}function Ok(t,e){return qs(t,e)}function Fk(t,e){return _P(t,e)}function lE(t,e){return $p(t,e)}function Lk(t,e,n,r,i,o){let s=e.consts,a=Nc(s,i),u=vl(e,t,2,r,a);return oD(e,n,u,Nc(s,o)),u.attrs!==null&&vp(u,u.attrs,!1),u.mergedAttrs!==null&&vp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function xe(t,e,n,r){let i=Ie(),o=Zr(),s=et+t,a=i[je],u=o.firstCreatePass?Lk(s,o,i,e,n,r):o.data[s],c=xD(o,i,u,a,e,t);i[s]=c;let l=HE(u);return Xs(u,!0),K0(a,c,u),!ia(u)&&Qp()&&hg(o,i,c,u),gR()===0&&Kr(c,i),mR(),l&&(tD(o,i,u),eD(o,u,i)),r!==null&&nD(i,u),xe}function Qe(){let t=Ln();n0()?ER():(t=t.parent,Xs(t,!1));let e=t;vR(e)&&_R(),yR();let n=Zr();return n.firstCreatePass&&(Yp(n,t),zE(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&PR(e)&&sE(n,e,Ie(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&kR(e)&&sE(n,e,Ie(),e.stylesWithoutHost,!1),Qe}function dt(t,e,n,r){return xe(t,e,n,r),Qe(),dt}var xD=(t,e,n,r,i,o)=>(gn(!0),pl(r,i,c0()));function Vk(t,e,n,r,i,o){let s=e[Lt],a=!s||Js()||ia(n)||fl(s,o);if(gn(a),a)return pl(r,i,c0());let u=_l(s,t,e,n);return F0(s,o)&&hl(s,o,u.nextSibling),s&&(T0(n)||C0(u))&&Ys(n)&&(wR(n),G0(u)),u}function jk(){xD=Vk}var Uk=(t,e,n,r)=>(gn(!0),lg(e[je],""));function Bk(t,e,n,r){let i,o=e[Lt],s=!o||Js()||ia(n);if(gn(s),s)return lg(e[je],"");let a=_l(o,t,e,n),u=mN(o,r);return hl(o,r,a),i=Il(u,a),i}function $k(){Uk=Bk}var Zc="en-US";var qk=Zc;function zk(t){typeof t=="string"&&(qk=t.toLowerCase().replace(/_/g,"-"))}function MD(t,e,n){let r=t[je];switch(n){case Node.COMMENT_NODE:return lg(r,e);case Node.TEXT_NODE:return cg(r,e);case Node.ELEMENT_NODE:return pl(r,e,null)}}var Hk=(t,e,n,r)=>(gn(!0),MD(t,n,r));function Gk(t,e,n,r){return gn(!0),MD(t,n,r)}function Wk(){Hk=Gk}function Kk(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Tl(t,e=""){let n=Ie(),r=Zr(),i=t+et,o=r.firstCreatePass?vl(r,i,1,e,null):r.data[i],s=RD(r,n,o,e,t);n[i]=s,Qp()&&hg(r,n,s,o),Xs(o,!1)}var RD=(t,e,n,r,i)=>(gn(!0),cg(e[je],r));function Qk(t,e,n,r,i){let o=e[Lt],s=!o||Js()||ia(n)||fl(o,i);return gn(s),s?cg(e[je],r):_l(o,t,e,n)}function Yk(){RD=Qk}function bg(t){return Cl("",t,""),bg}function Cl(t,e,n){let r=Ie(),i=Pk(r,t,e,n);return i!==lo&&mP(r,ul(),i),Cl}var Zk=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=VE(!1,r.type),o=i.length>0?Dl([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=P({token:e,providedIn:"environment",factory:()=>new e(D(bt))});let t=e;return t})();function ND(t){ei("NgStandalone"),t.getStandaloneInjector=e=>e.get(Zk).getOrCreateStandaloneInjector(t)}function fo(t,e,n){let r=Hp()+t,i=Ie();return i[r]===lo?Cg(i,r,n?e.call(n):e()):TD(i,r)}function PD(t,e,n,r,i,o,s,a){let u=Hp()+t,c=Ie(),l=xk(c,u,n,r,i,o);return Yr(c,u+4,s)||l?Cg(c,u+5,a?e.call(a,n,r,i,o,s):e(n,r,i,o,s)):TD(c,u+5)}function Jk(t,e){let n=t[e];return n===lo?void 0:n}function Xk(t,e,n,r,i,o){let s=e+n;return Yr(t,s,i)?Cg(t,s+1,o?r.call(o,i):r(i)):Jk(t,s+1)}function kD(t,e){let n=Zr(),r,i=t+et;n.firstCreatePass?(r=eO(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=zr(r.type,!0)),s,a=wt(mn);try{let u=Oc(!1),c=o();return Oc(u),Kk(n,Ie(),i,c),c}finally{wt(a)}}function eO(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function OD(t,e,n){let r=t+et,i=Ie(),o=dR(i,r);return tO(i,r)?Xk(i,Hp(),e,o.transform,n,o):o.transform(n)}function tO(t,e){return t[Q].data[e].pure}var wc=null;function nO(t){wc!==null&&(t.defaultEncapsulation!==wc.defaultEncapsulation||t.preserveWhitespaces!==wc.preserveWhitespaces)||(wc=t)}var lr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},FD=new lr("17.3.3"),bl=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Sg=new R(""),sa=new R(""),Sl=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Ag||(rO(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{X.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(D(X),D(Al),D(sa))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),Al=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Ag?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function rO(t){Ag=t}var Ag;function po(t){return!!t&&typeof t.then=="function"}function xg(t){return!!t&&typeof t.subscribe=="function"}var xl=new R(""),LD=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=E(xl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(po(s))r.push(s);else if(xg(s)){let a=new Promise((u,c)=>{s.subscribe({complete:u,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),go=new R("");function iO(){oI(()=>{throw new F(600,!1)})}function oO(t){return t.isBoundToModule}function sO(t,e,n){try{let r=n();return po(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function VD(t,e){return Array.isArray(e)?e.reduce(VD,t):M(M({},t),e)}var Vn=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=E(D0),this.afterRenderEffectManager=E(Dg),this.externalTestViews=new Set,this.beforeRender=new Se,this.afterTick=new Se,this.componentTypes=[],this.components=[],this.isStable=E(ra).hasPendingTasks.pipe(V(r=>!r)),this._injector=E(bt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Hc;if(!this._injector.get(LD).done){let f=!o&&kE(r),v=!1;throw new F(405,v)}let a;o?a=r:a=this._injector.get(El).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=oO(a)?void 0:this._injector.get(cr),c=i||a.selector,l=a.create(Jt.NULL,[],c,u),d=l.location.nativeElement,h=l.injector.get(Sg,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Cc(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new F(101,!1);let i=oe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,oe(i)}}detectChangesInAttachedViews(r){let i=0,o=this.afterRenderEffectManager;for(;;){if(i===dD)throw new F(103,!1);if(r){let s=i===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:u}of this._views)aO(a,s,u)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Sp(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Sp(s))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Cc(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(go,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Cc(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new F(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Cc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var _c;function Mg(t){_c??=new WeakMap;let e=_c.get(t);if(e)return e;let n=t.isStable.pipe(Dt(r=>r)).toPromise().then(()=>{});return _c.set(t,n),t.onDestroy(()=>_c?.delete(t)),n}function aO(t,e,n){!e&&!Sp(t)||uO(t,n,e)}function Sp(t){return zp(t)}function uO(t,e,n){let r;n?(r=0,t[j]|=1024):t[j]&64?r=0:r=1,hD(t,e,r)}var Ap=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Ml=(()=>{let e=class e{compileModuleSync(r){return new Qc(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=OE(r),s=B0(o.declarations).reduce((a,u)=>{let c=ur(u);return c&&a.push(new so(c)),a},[]);return new Ap(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cO=new R("");function lO(t,e,n){let r=new Qc(n);return Promise.resolve(r)}function dE(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var dO=(()=>{let e=class e{constructor(){this.zone=E(X),this.applicationRef=E(Vn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hO(t){return[{provide:X,useFactory:t},{provide:Hr,multi:!0,useFactory:()=>{let e=E(dO,{optional:!0});return()=>e.initialize()}},{provide:Hr,multi:!0,useFactory:()=>{let e=E(gO);return()=>{e.initialize()}}},{provide:D0,useFactory:fO}]}function fO(){let t=E(X),e=E(hn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function pO(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var gO=(()=>{let e=class e{constructor(){this.subscription=new be,this.initialized=!1,this.zone=E(X),this.pendingTasks=E(ra)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{X.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{X.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function mO(){return typeof $localize<"u"&&$localize.locale||Zc}var Rg=new R("",{providedIn:"root",factory:()=>E(Rg,Z.Optional|Z.SkipSelf)||mO()});var jD=new R(""),UD=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=nk(i?.ngZone,pO({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let s=bk(r.moduleType,this.injector,hO(()=>o)),a=s.injector.get(hn,null);return o.runOutsideAngular(()=>{let u=o.onError.subscribe({next:c=>{a.handleError(c)}});s.onDestroy(()=>{Cc(this._modules,s),u.unsubscribe()})}),sO(a,o,()=>{let u=s.injector.get(LD);return u.runInitializers(),u.donePromise.then(()=>{let c=s.injector.get(Rg,Zc);return zk(c||Zc),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,i=[]){let o=VD({},i);return lO(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){let i=r.injector.get(Vn);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new F(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new F(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(jD,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(D(Jt))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Ps=null,BD=new R("");function yO(t){if(Ps&&!Ps.get(BD,!1))throw new F(400,!1);iO(),Ps=t;let e=t.get(UD);return _O(t),e}function Ng(t,e,n=[]){let r=`Platform: ${e}`,i=new R(r);return(o=[])=>{let s=$D();if(!s||s.injector.get(BD,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):yO(vO(a,r))}return wO(i)}}function vO(t=[],e){return Jt.create({name:e,providers:[{provide:il,useValue:"platform"},{provide:jD,useValue:new Set([()=>Ps=null])},...t]})}function wO(t){let e=$D();if(!e)throw new F(401,!1);return e}function $D(){return Ps?.get(UD)??null}function _O(t){t.get(eg,null)?.forEach(n=>n())}function Pg(){return!1}var mo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=IO;let t=e;return t})();function IO(t){return EO(Ln(),Ie(),(t&16)===16)}function EO(t,e,n){if(Ys(t)&&!n){let r=uo(t.index,e);return new Qr(r,r)}else if(t.type&47){let r=e[At];return new Qr(r,e)}return null}var xp=class{constructor(){}supports(e){return DD(e)}create(e){return new Mp(e)}},DO=(t,e)=>e,Mp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||DO}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<hE(r,i,o)?n:r,a=hE(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let c=a-i,l=u-i;if(c!=l){for(let h=0;h<c;h++){let f=h<o.length?o[h]:o[h]=0,v=f+h;l<=v&&v<c&&(o[h]=f+1)}let d=s.previousIndex;o[d]=l-c}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!DD(e))throw new F(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,Sk(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Rp(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Jc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Jc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Rp=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Np=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Jc=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Np,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function hE(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function fE(){return new kg([new xp])}var kg=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||fE()),deps:[[e,new Op,new ao]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new F(901,!1)}};e.\u0275prov=P({token:e,providedIn:"root",factory:fE});let t=e;return t})();var qD=Ng(null,"core",[]),zD=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(D(Vn))},e.\u0275mod=nt({type:e}),e.\u0275inj=tt({});let t=e;return t})();var pE=!1,TO=!1;function CO(){pE||(pE=!0,hN(),jk(),Yk(),$k(),Nk(),wk(),WP(),ZN(),Wk())}function bO(t,e){return Mg(t)}function HD(){return Ks([{provide:vc,useFactory:()=>{let t=!0;return Rs()&&(t=!!E(Jr,{optional:!0})?.get(k0,null)),t&&ei("NgHydration"),t}},{provide:Hr,useValue:()=>{TO=!!E(yN,{optional:!0}),Rs()&&E(vc)&&(SO(),CO())},multi:!0},{provide:V0,useFactory:()=>Rs()&&E(vc)},{provide:go,useFactory:()=>{if(Rs()&&E(vc)){let t=E(Vn),e=E(Jt);return()=>{bO(t,e).then(()=>{X.assertInAngularZone(),VP(t)})}}return()=>{}},multi:!0}])}function SO(){let t=dl(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===lN){e=n;break}if(!e)throw new F(-507,!1)}function Og(t){let e=oe(null);try{return t()}finally{oe(e)}}function GD(t){let e=ur(t);if(!e)return null;let n=new so(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var ZD=null;function ti(){return ZD}function JD(t){ZD??=t}var Rl=class{};var _t=new R(""),Bg=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>E(RO),providedIn:"platform"});let t=e;return t})(),XD=new R(""),RO=(()=>{let e=class e extends Bg{constructor(){super(),this._doc=E(_t),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ti().getBaseHref(this._doc)}onPopState(r){let i=ti().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=ti().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function $g(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function WD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function jn(t){return t&&t[0]!=="?"?"?"+t:t}var ni=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>E(qg),providedIn:"root"});let t=e;return t})(),eT=new R(""),qg=(()=>{let e=class e extends ni{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??E(_t).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return $g(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+jn(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+jn(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+jn(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(Bg),D(eT,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tT=(()=>{let e=class e extends ni{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=$g(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+jn(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+jn(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(Bg),D(eT,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),yo=(()=>{let e=class e{constructor(r){this._subject=new lt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=kO(WD(KD(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+jn(i))}normalize(r){return e.stripTrailingSlash(PO(this._basePath,KD(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+jn(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+jn(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=jn,e.joinWithSlash=$g,e.stripTrailingSlash=WD,e.\u0275fac=function(i){return new(i||e)(D(ni))},e.\u0275prov=P({token:e,factory:()=>NO(),providedIn:"root"});let t=e;return t})();function NO(){return new yo(D(ni))}function PO(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function KD(t){return t.replace(/\/index.html$/,"")}function kO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function nT(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Fg=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},rT=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new Fg(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let u=i.get(s);i.move(u,a),QD(u,o)}});for(let o=0,s=i.length;o<s;o++){let u=i.get(o).context;u.index=o,u.count=s,u.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);QD(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(mn(na),mn(_g),mn(kg))},e.\u0275dir=rl({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function QD(t,e){t.context.$implicit=e.item}function OO(t,e){return new F(2100,!1)}var Lg=class{createSubscription(e,n){return Og(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){Og(()=>e.unsubscribe())}},Vg=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},FO=new Vg,LO=new Lg,iT=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(po(r))return FO;if(xg(r))return LO;throw OO(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(mn(mo,16))},e.\u0275pipe=RE({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var oT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=nt({type:e}),e.\u0275inj=tt({});let t=e;return t})(),zg="browser",VO="server";function jO(t){return t===zg}function ri(t){return t===VO}var sT=(()=>{let e=class e{};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>jO(E(rt))?new jg(E(_t),window):new Ug});let t=e;return t})(),jg=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=UO(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function UO(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Ug=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Nl=class{};var kl=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var pT=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(pT||{}),Hg=class{constructor(e,n=gT.Ok,r="OK"){this.headers=e.headers||new kl,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Ol=class t extends Hg{constructor(e={}){super(e),this.type=pT.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var gT=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(gT||{});var qO=new R("");var aT="b",uT="h",cT="s",lT="st",dT="u",hT="rt",Pl=new R(""),zO=["GET","HEAD"];function HO(t,e){let l=E(Pl),{isCacheActive:n}=l,r=q_(l,["isCacheActive"]),{transferCache:i,method:o}=t;if(!n||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!zO.includes(o)||i===!1||r.filter?.(t)===!1)return e(t);let s=E(Jr),a=WO(t),u=s.get(a,null),c=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(c=i.includeHeaders),u){let{[aT]:d,[hT]:h,[uT]:f,[cT]:v,[lT]:y,[dT]:w}=u,T=d;switch(h){case"arraybuffer":T=new TextEncoder().encode(d).buffer;break;case"blob":T=new Blob([d]);break}let L=new kl(f);return k(new Ol({body:T,headers:L,status:v,statusText:y,url:w}))}return e(t).pipe(Ae(d=>{d instanceof Ol&&s.set(a,{[aT]:d.body,[uT]:GO(d.headers,c),[cT]:d.status,[lT]:d.statusText,[dT]:d.url||"",[hT]:t.responseType})}))}function GO(t,e){if(!e)return{};let n={};for(let r of e){let i=t.getAll(r);i!==null&&(n[r]=i)}return n}function fT(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function WO(t){let{params:e,method:n,responseType:r,url:i}=t,o=fT(e),s=t.serializeBody();s instanceof URLSearchParams?s=fT(s):typeof s!="string"&&(s="");let a=[n,r,i,s,o].join("|"),u=KO(a);return u}function KO(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function mT(t){return[{provide:Pl,useFactory:()=>(ei("NgHttpTransferCache"),M({isCacheActive:!0},t))},{provide:qO,useValue:HO,multi:!0,deps:[Jr,Pl]},{provide:go,multi:!0,useFactory:()=>{let e=E(Vn),n=E(Pl);return()=>{Mg(e).then(()=>{n.isCacheActive=!1})}}}]}var Kg=class extends Rl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Qg=class t extends Kg{static makeCurrent(){JD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=QO();return n==null?null:YO(n)}resetBaseElement(){aa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return nT(document.cookie,e)}},aa=null;function QO(){return aa=aa||document.querySelector("base"),aa?aa.getAttribute("href"):null}function YO(t){return new URL(t,document.baseURI).pathname}var Yg=class{addToWindow(e){Tt.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new F(5103,!1);return o},Tt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Tt.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=Tt.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Tt.frameworkStabilizers||(Tt.frameworkStabilizers=[]),Tt.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?ti().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},ZO=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),Zg=new R(""),_T=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new F(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(D(Zg),D(X))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),Fl=class{constructor(e){this._doc=e}},Gg="ng-app-id",IT=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ri(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Gg}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Gg),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Gg,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(D(_t),D(ta),D(tg,8),D(rt))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),Wg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},em=/%COMP%/g,ET="%COMP%",JO=`_nghost-${ET}`,XO=`_ngcontent-${ET}`,e2=!0,t2=new R("",{providedIn:"root",factory:()=>e2});function n2(t){return XO.replace(em,t)}function r2(t){return JO.replace(em,t)}function DT(t,e){return e.map(n=>n.replace(em,t))}var yT=(()=>{let e=class e{constructor(r,i,o,s,a,u,c,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ri(u),this.defaultRenderer=new ua(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ln.ShadowDom&&(i=ye(M({},i),{encapsulation:ln.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Ll?o.applyToHost(r):o instanceof ca&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,u=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case ln.Emulated:s=new Ll(c,l,i,this.appId,d,a,u,h);break;case ln.ShadowDom:return new Jg(c,l,r,i,a,u,this.nonce,h);default:s=new ca(c,l,i,d,a,u,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(D(_T),D(IT),D(ta),D(t2),D(_t),D(rt),D(X),D(tg))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),ua=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Wg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(vT(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(vT(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new F(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Wg[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Wg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Xr.DashCase|Xr.Important)?e.style.setProperty(n,r,i&Xr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Xr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ti().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function vT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Jg=class extends ua{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=DT(i.id,i.styles);for(let l of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ca=class extends ua{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?DT(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ll=class extends ca{constructor(e,n,r,i,o,s,a,u){let c=i+"-"+r.id;super(e,n,r,o,s,a,u,c),this.contentAttr=n2(c),this.hostAttr=r2(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},i2=(()=>{let e=class e extends Fl{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(D(_t))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),wT=["alt","control","meta","shift"],o2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},s2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},a2=(()=>{let e=class e extends Fl{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ti().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),wT.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let o=o2[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),wT.forEach(a=>{if(a!==o){let u=s2[a];u(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(D(_t))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function u2(){Qg.makeCurrent()}function c2(){return new hn}function l2(){return M0(document),document}var d2=[{provide:rt,useValue:zg},{provide:eg,useValue:u2,multi:!0},{provide:_t,useFactory:l2,deps:[]}],TT=Ng(qD,"browser",d2),h2=new R(""),f2=[{provide:sa,useClass:Yg,deps:[]},{provide:Sg,useClass:Sl,deps:[X,Al,sa]},{provide:Sl,useClass:Sl,deps:[X,Al,sa]}],p2=[{provide:il,useValue:"root"},{provide:hn,useFactory:c2,deps:[]},{provide:Zg,useClass:i2,multi:!0,deps:[_t,X,rt]},{provide:Zg,useClass:a2,multi:!0,deps:[_t]},yT,IT,_T,{provide:zs,useExisting:yT},{provide:Nl,useClass:ZO,deps:[]},[]],CT=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:ta,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(D(h2,12))},e.\u0275mod=nt({type:e}),e.\u0275inj=tt({providers:[...p2,...f2],imports:[oT,zD]});let t=e;return t})();var bT=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(D(_t))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Xg=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t}(Xg||{});function ST(...t){let e=[],n=new Set,r=n.has(Xg.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of t)n.add(o),i.length&&e.push(i);return Ks([[],HD(),n.has(Xg.NoHttpTransferCache)||r?[]:mT({}),e])}var W="primary",Ta=Symbol("RouteTitle"),om=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Eo(t){return new om(t)}function g2(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function m2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!vn(t[n],e[n]))return!1;return!0}function vn(t,e){let n=t?sm(t):void 0,r=e?sm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!LT(t[i],e[i]))return!1;return!0}function sm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function LT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function VT(t){return t.length>0?t[t.length-1]:null}function pr(t){return Cf(t)?t:po(t)?se(Promise.resolve(t)):k(t)}var y2={exact:UT,subset:BT},jT={exact:v2,subset:w2,ignored:()=>!0};function xT(t,e,n){return y2[n.paths](t.root,e.root,n.matrixParams)&&jT[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function v2(t,e){return vn(t,e)}function UT(t,e,n){if(!oi(t.segments,e.segments)||!Ul(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!UT(t.children[r],e.children[r],n))return!1;return!0}function w2(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>LT(t[n],e[n]))}function BT(t,e,n){return $T(t,e,e.segments,n)}function $T(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!oi(i,n)||e.hasChildren()||!Ul(i,n,r))}else if(t.segments.length===n.length){if(!oi(t.segments,n)||!Ul(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!BT(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!oi(t.segments,i)||!Ul(t.segments,i,r)||!t.children[W]?!1:$T(t.children[W],e,o,r)}}function Ul(t,e,n){return e.every((r,i)=>jT[n](t[i].parameters,r.parameters))}var dr=class{constructor(e=new ae([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Eo(this.queryParams),this._queryParamMap}toString(){return E2.serialize(this)}},ae=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bl(this)}},ii=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Eo(this.parameters),this._parameterMap}toString(){return zT(this)}};function _2(t,e){return oi(t,e)&&t.every((n,r)=>vn(n.parameters,e[r].parameters))}function oi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function I2(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===W&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==W&&(n=n.concat(e(i,r)))}),n}var Ca=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>new ma,providedIn:"root"});let t=e;return t})(),ma=class{parse(e){let n=new um(e);return new dr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${la(e.root,!0)}`,r=C2(e.queryParams),i=typeof e.fragment=="string"?`#${D2(e.fragment)}`:"";return`${n}${r}${i}`}},E2=new ma;function Bl(t){return t.segments.map(e=>zT(e)).join("/")}function la(t,e){if(!t.hasChildren())return Bl(t);if(e){let n=t.children[W]?la(t.children[W],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==W&&r.push(`${i}:${la(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=I2(t,(r,i)=>i===W?[la(t.children[W],!1)]:[`${i}:${la(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[W]!=null?`${Bl(t)}/${n[0]}`:`${Bl(t)}/(${n.join("//")})`}}function qT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vl(t){return qT(t).replace(/%3B/gi,";")}function D2(t){return encodeURI(t)}function am(t){return qT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $l(t){return decodeURIComponent(t)}function MT(t){return $l(t.replace(/\+/g,"%20"))}function zT(t){return`${am(t.path)}${T2(t.parameters)}`}function T2(t){return Object.entries(t).map(([e,n])=>`;${am(e)}=${am(n)}`).join("")}function C2(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Vl(n)}=${Vl(i)}`).join("&"):`${Vl(n)}=${Vl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var b2=/^[^\/()?;#]+/;function tm(t){let e=t.match(b2);return e?e[0]:""}var S2=/^[^\/()?;=#]+/;function A2(t){let e=t.match(S2);return e?e[0]:""}var x2=/^[^=?&#]+/;function M2(t){let e=t.match(x2);return e?e[0]:""}var R2=/^[^&#]+/;function N2(t){let e=t.match(R2);return e?e[0]:""}var um=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ae([],{}):new ae([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[W]=new ae(e,n)),r}parseSegment(){let e=tm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new F(4009,!1);return this.capture(e),new ii($l(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=A2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=tm(this.remaining);i&&(r=i,this.capture(r))}e[$l(n)]=$l(r)}parseQueryParam(e){let n=M2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=N2(this.remaining);s&&(r=s,this.capture(r))}let i=MT(n),o=MT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=tm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new F(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=W);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[W]:new ae([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new F(4011,!1)}};function HT(t){return t.segments.length>0?new ae([],{[W]:t}):t}function GT(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=GT(i);if(r===W&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ae(t.segments,e);return P2(n)}function P2(t){if(t.numberOfChildren===1&&t.children[W]){let e=t.children[W];return new ae(t.segments.concat(e.segments),e.children)}return t}function Do(t){return t instanceof dr}function k2(t,e,n=null,r=null){let i=WT(t);return KT(i,e,n,r)}function WT(t){let e;function n(o){let s={};for(let u of o.children){let c=n(u);s[u.outlet]=c}let a=new ae(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=HT(r);return e??i}function KT(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return nm(i,i,i,n,r);let o=O2(e);if(o.toRoot())return nm(i,i,new ae([],{}),n,r);let s=F2(o,i,t),a=s.processChildren?fa(s.segmentGroup,s.index,o.commands):YT(s.segmentGroup,s.index,o.commands);return nm(i,s.segmentGroup,a,n,r)}function ql(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ya(t){return typeof t=="object"&&t!=null&&t.outlets}function nm(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,c])=>{o[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`});let s;t===e?s=n:s=QT(t,e,n);let a=HT(GT(s));return new dr(a,o,i)}function QT(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=QT(o,e,n)}),new ae(t.segments,r)}var zl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ql(r[0]))throw new F(4003,!1);let i=r.find(ya);if(i&&i!==VT(r))throw new F(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function O2(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new zl(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new zl(n,e,r)}var _o=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function F2(t,e,n){if(t.isAbsolute)return new _o(e,!0,0);if(!n)return new _o(e,!1,NaN);if(n.parent===null)return new _o(n,!0,0);let r=ql(t.commands[0])?0:1,i=n.segments.length-1+r;return L2(n,i,t.numberOfDoubleDots)}function L2(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new F(4005,!1);i=r.segments.length}return new _o(r,!1,i-o)}function V2(t){return ya(t[0])?t[0].outlets:{[W]:t}}function YT(t,e,n){if(t??=new ae([],{}),t.segments.length===0&&t.hasChildren())return fa(t,e,n);let r=j2(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ae(t.segments.slice(0,r.pathIndex),{});return o.children[W]=new ae(t.segments.slice(r.pathIndex),t.children),fa(o,0,i)}else return r.match&&i.length===0?new ae(t.segments,{}):r.match&&!t.hasChildren()?cm(t,e,n):r.match?fa(t,0,i):cm(t,e,n)}function fa(t,e,n){if(n.length===0)return new ae(t.segments,{});{let r=V2(n),i={};if(Object.keys(r).some(o=>o!==W)&&t.children[W]&&t.numberOfChildren===1&&t.children[W].segments.length===0){let o=fa(t.children[W],e,n);return new ae(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=YT(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ae(t.segments,i)}}function j2(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(ya(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!NT(u,c,s))return o;r+=2}else{if(!NT(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function cm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(ya(o)){let u=U2(o.outlets);return new ae(r,u)}if(i===0&&ql(n[0])){let u=t.segments[e];r.push(new ii(u.path,RT(n[0]))),i++;continue}let s=ya(o)?o.outlets[W]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&ql(a)?(r.push(new ii(s,RT(a))),i+=2):(r.push(new ii(s,{})),i++)}return new ae(r,{})}function U2(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=cm(new ae([],{}),0,r))}),e}function RT(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function NT(t,e,n){return t==n.path&&vn(e,n.parameters)}var pa="imperative",$e=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}($e||{}),Vt=class{constructor(e,n){this.id=e,this.url=n}},To=class extends Vt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=$e.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Un=class extends Vt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=$e.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Mt||{}),Hl=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Hl||{}),hr=class extends Vt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=$e.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},fr=class extends Vt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=$e.NavigationSkipped}},va=class extends Vt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=$e.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Gl=class extends Vt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lm=class extends Vt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dm=class extends Vt{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=$e.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},hm=class extends Vt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fm=class extends Vt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pm=class{constructor(e){this.route=e,this.type=$e.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},gm=class{constructor(e){this.route=e,this.type=$e.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},mm=class{constructor(e){this.snapshot=e,this.type=$e.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ym=class{constructor(e){this.snapshot=e,this.type=$e.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vm=class{constructor(e){this.snapshot=e,this.type=$e.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wm=class{constructor(e){this.snapshot=e,this.type=$e.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wl=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=$e.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},wa=class{},_a=class{constructor(e){this.url=e}};var _m=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ba,this.attachRef=null}},ba=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new _m,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Kl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Im(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Im(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Em(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Em(e,this._root).map(n=>n.value)}};function Im(t,e){if(t===e.value)return e;for(let n of e.children){let r=Im(t,n);if(r)return r}return null}function Em(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Em(t,n);if(r.length)return r.unshift(e),r}return[]}var xt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function wo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ql=class extends Kl{constructor(e,n){super(e),this.snapshot=n,Nm(this,e)}toString(){return this.snapshot.toString()}};function ZT(t){let e=B2(t),n=new We([new ii("",{})]),r=new We({}),i=new We({}),o=new We({}),s=new We(""),a=new Co(n,r,o,s,i,W,t,e.root);return a.snapshot=e.root,new Ql(new xt(a,[]),e)}function B2(t){let e={},n={},r={},i="",o=new Ia([],e,r,i,n,W,t,null,{});return new Yl("",new xt(o,[]))}var Co=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(V(c=>c[Ta]))??k(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(V(e=>Eo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(V(e=>Eo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Rm(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:M(M({},e.params),t.params),data:M(M({},e.data),t.data),resolve:M(M(M(M({},t.data),e.data),i?.data),t._resolvedData)}:r={params:M({},t.params),data:M({},t.data),resolve:M(M({},t.data),t._resolvedData??{})},i&&XT(i)&&(r.resolve[Ta]=i.title),r}var Ia=class{get title(){return this.data?.[Ta]}constructor(e,n,r,i,o,s,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Eo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Eo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Yl=class extends Kl{constructor(e,n){super(n),this.url=e,Nm(this,n)}toString(){return JT(this._root)}};function Nm(t,e){e.value._routerState=t,e.children.forEach(n=>Nm(t,n))}function JT(t){let e=t.children.length>0?` { ${t.children.map(JT).join(", ")} } `:"";return`${t.value}${e}`}function rm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,vn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),vn(e.params,n.params)||t.paramsSubject.next(n.params),m2(e.url,n.url)||t.urlSubject.next(n.url),vn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Dm(t,e){let n=vn(t.params,e.params)&&_2(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Dm(t.parent,e.parent))}function XT(t){return typeof t.title=="string"||t.title===null}var Pm=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=W,this.activateEvents=new lt,this.deactivateEvents=new lt,this.attachEvents=new lt,this.detachEvents=new lt,this.parentContexts=E(ba),this.location=E(na),this.changeDetector=E(mo),this.environmentInjector=E(bt),this.inputBinder=E(td,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new F(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new Tm(r,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=rl({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[al]});let t=e;return t})(),Tm=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r,this.__ngOutletInjector=!0}get(e,n){return e===Co?this.route:e===ba?this.childContexts:this.parent.get(e,n)}},td=new R(""),PT=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=xs([i.queryParams,i.params,i.data]).pipe(_e(([s,a,u],c)=>(u=M(M(M({},s),a),u),c===0?k(u):Promise.resolve(u)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=GD(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,s[u])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function $2(t,e,n){let r=Ea(t,e._root,n?n._root:void 0);return new Ql(r,e)}function Ea(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=q2(t,e,n);return new xt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ea(t,a)),s}}let r=z2(e.value),i=e.children.map(o=>Ea(t,o));return new xt(r,i)}}function q2(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ea(t,r,i);return Ea(t,r)})}function z2(t){return new Co(new We(t.url),new We(t.params),new We(t.queryParams),new We(t.fragment),new We(t.data),t.outlet,t.component,t)}var eC="ngNavigationCancelingError";function tC(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Do(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=nC(!1,Mt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function nC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[eC]=!0,n.cancellationCode=e,n}function H2(t){return rC(t)&&Do(t.url)}function rC(t){return!!t&&t[eC]}var G2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=nl({type:e,selectors:[["ng-component"]],standalone:!0,features:[ND],decls:1,vars:0,template:function(i,o){i&1&&dt(0,"router-outlet")},dependencies:[Pm],encapsulation:2});let t=e;return t})();function W2(t,e){return t.providers&&!t._injector&&(t._injector=Dl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function km(t){let e=t.children&&t.children.map(km),n=e?ye(M({},t),{children:e}):M({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==W&&(n.component=G2),n}function wn(t){return t.outlet||W}function K2(t,e){let n=t.filter(r=>wn(r)===e);return n.push(...t.filter(r=>wn(r)!==e)),n}function Sa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Q2=(t,e,n,r)=>V(i=>(new Cm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Cm=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),rm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=wo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=wo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=wo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=wo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new wm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ym(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(rm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),rm(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Sa(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Zl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Io=class{constructor(e,n){this.component=e,this.route=n}};function Y2(t,e,n){let r=t._root,i=e?e._root:null;return da(r,i,n,[r.value])}function Z2(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function So(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!wE(t)?t:e.get(t):r}function da(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=wo(e);return t.children.forEach(s=>{J2(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ga(a,n.getContext(s),i)),i}function J2(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=X2(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Zl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?da(t,e,a?a.children:null,r,i):da(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Io(a.outlet.component,s))}else s&&ga(e,a,i),i.canActivateChecks.push(new Zl(r)),o.component?da(t,null,a?a.children:null,r,i):da(t,null,n,r,i);return i}function X2(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!oi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!oi(t.url,e.url)||!vn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dm(t,e)||!vn(t.queryParams,e.queryParams);case"paramsChange":default:return!Dm(t,e)}}function ga(t,e,n){let r=wo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ga(s,e.children.getContext(o),n):ga(s,null,n):ga(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Io(e.outlet.component,i)):n.canDeactivateChecks.push(new Io(null,i)):n.canDeactivateChecks.push(new Io(null,i))}function Aa(t){return typeof t=="function"}function eF(t){return typeof t=="boolean"}function tF(t){return t&&Aa(t.canLoad)}function nF(t){return t&&Aa(t.canActivate)}function rF(t){return t&&Aa(t.canActivateChild)}function iF(t){return t&&Aa(t.canDeactivate)}function oF(t){return t&&Aa(t.canMatch)}function iC(t){return t instanceof kn||t?.name==="EmptyError"}var jl=Symbol("INITIAL_VALUE");function bo(){return _e(t=>xs(t.map(e=>e.pipe(On(1),$r(jl)))).pipe(V(e=>{for(let n of e)if(n!==!0){if(n===jl)return jl;if(n===!1||n instanceof dr)return n}return!0}),Be(e=>e!==jl),On(1)))}function sF(t,e){return Pe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?k(ye(M({},n),{guardsResult:!0})):aF(s,r,i,t).pipe(Pe(a=>a&&eF(a)?uF(r,o,t,e):k(a)),V(a=>ye(M({},n),{guardsResult:a})))})}function aF(t,e,n,r){return se(t).pipe(Pe(i=>fF(i.component,i.route,n,e,r)),Dt(i=>i!==!0,!0))}function uF(t,e,n,r){return se(e).pipe(tr(i=>Qi(lF(i.route.parent,r),cF(i.route,r),hF(t,i.path,n),dF(t,i.route,n))),Dt(i=>i!==!0,!0))}function cF(t,e){return t!==null&&e&&e(new vm(t)),k(!0)}function lF(t,e){return t!==null&&e&&e(new mm(t)),k(!0)}function dF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return k(!0);let i=r.map(o=>fc(()=>{let s=Sa(e)??n,a=So(o,s),u=nF(a)?a.canActivate(e,t):fn(s,()=>a(e,t));return pr(u).pipe(Dt())}));return k(i).pipe(bo())}function hF(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Z2(s)).filter(s=>s!==null).map(s=>fc(()=>{let a=s.guards.map(u=>{let c=Sa(s.node)??n,l=So(u,c),d=rF(l)?l.canActivateChild(r,t):fn(c,()=>l(r,t));return pr(d).pipe(Dt())});return k(a).pipe(bo())}));return k(o).pipe(bo())}function fF(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return k(!0);let s=o.map(a=>{let u=Sa(e)??i,c=So(a,u),l=iF(c)?c.canDeactivate(t,e,n,r):fn(u,()=>c(t,e,n,r));return pr(l).pipe(Dt())});return k(s).pipe(bo())}function pF(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return k(!0);let o=i.map(s=>{let a=So(s,t),u=tF(a)?a.canLoad(e,n):fn(t,()=>a(e,n));return pr(u)});return k(o).pipe(bo(),oC(r))}function oC(t){return wf(Ae(e=>{if(Do(e))throw tC(t,e)}),V(e=>e===!0))}function gF(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return k(!0);let o=i.map(s=>{let a=So(s,t),u=oF(a)?a.canMatch(e,n):fn(t,()=>a(e,n));return pr(u)});return k(o).pipe(bo(),oC(r))}var Da=class{constructor(e){this.segmentGroup=e||null}},Jl=class extends Error{constructor(e){super(),this.urlTree=e}};function vo(t){return Ki(new Da(t))}function mF(t){return Ki(new F(4e3,!1))}function yF(t){return Ki(nC(!1,Mt.GuardRejected))}var bm=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return k(r);if(i.numberOfChildren>1||!i.children[W])return mF(e.redirectTo);i=i.children[W]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Jl(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new dr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ae(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new F(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Sm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vF(t,e,n,r,i){let o=Om(t,e,n);return o.matched?(r=W2(e,r),gF(r,e,n,i).pipe(V(s=>s===!0?o:M({},Sm)))):k(o)}function Om(t,e,n){if(e.path==="**")return wF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?M({},Sm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||g2)(n,t,e);if(!i)return M({},Sm);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?M(M({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function wF(t){return{matched:!0,parameters:t.length>0?VT(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function kT(t,e,n,r){return n.length>0&&EF(t,n,r)?{segmentGroup:new ae(e,IF(r,new ae(n,t.children))),slicedSegments:[]}:n.length===0&&DF(t,n,r)?{segmentGroup:new ae(t.segments,_F(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ae(t.segments,t.children),slicedSegments:n}}function _F(t,e,n,r){let i={};for(let o of n)if(nd(t,e,o)&&!r[wn(o)]){let s=new ae([],{});i[wn(o)]=s}return M(M({},r),i)}function IF(t,e){let n={};n[W]=e;for(let r of t)if(r.path===""&&wn(r)!==W){let i=new ae([],{});n[wn(r)]=i}return n}function EF(t,e,n){return n.some(r=>nd(t,e,r)&&wn(r)!==W)}function DF(t,e,n){return n.some(r=>nd(t,e,r))}function nd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function TF(t,e,n,r){return wn(t)!==r&&(r===W||!nd(e,n,t))?!1:Om(e,t,n).matched}function CF(t,e,n){return e.length===0&&!t.children[n]}var Am=class{};function bF(t,e,n,r,i,o,s="emptyOnly"){return new xm(t,e,n,r,i,s,o).recognize()}var SF=31,xm=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new bm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new F(4002,`'${e.segmentGroup}'`)}recognize(){let e=kT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(V(n=>{let r=new Ia([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,{},W,this.rootComponentType,null,{}),i=new xt(r,n),o=new Yl("",i),s=k2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,W).pipe(er(r=>{if(r instanceof Jl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Da?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Rm(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(V(o=>o instanceof xt?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return se(i).pipe(tr(o=>{let s=r.children[o],a=K2(n,o);return this.processSegmentGroup(e,a,s,o)}),Br((o,s)=>(o.push(...s),o)),nr(null),xf(),Pe(o=>{if(o===null)return vo(r);let s=sC(o);return AF(s),k(s)}))}processSegment(e,n,r,i,o,s){return se(n).pipe(tr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(er(u=>{if(u instanceof Da)return k(null);throw u}))),Dt(a=>!!a),er(a=>{if(iC(a))return CF(r,i,o)?k(new Am):vo(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return TF(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):vo(i):vo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:l}=Om(n,i,o);if(!a)return vo(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>SF&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,d).pipe(Pe(h=>this.processSegment(e,r,n,h.concat(l),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=vF(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(_e(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(_e(({routes:u})=>{let c=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new Ia(l,h,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,MF(r),wn(r),r.component??r._loadedComponent??null,r,RF(r)),{segmentGroup:v,slicedSegments:y}=kT(n,l,d,u);if(y.length===0&&v.hasChildren())return this.processChildren(c,u,v).pipe(V(T=>T===null?null:new xt(f,T)));if(u.length===0&&y.length===0)return k(new xt(f,[]));let w=wn(r)===o;return this.processSegment(c,u,v,y,w?W:o,!0).pipe(V(T=>new xt(f,T instanceof xt?[T]:[])))}))):vo(n)))}getChildConfig(e,n,r){return n.children?k({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?k({routes:n._loadedRoutes,injector:n._loadedInjector}):pF(e,n,r,this.urlSerializer).pipe(Pe(i=>i?this.configLoader.loadChildren(e,n).pipe(Ae(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):yF(n))):k({routes:[],injector:e})}};function AF(t){t.sort((e,n)=>e.value.outlet===W?-1:n.value.outlet===W?1:e.value.outlet.localeCompare(n.value.outlet))}function xF(t){let e=t.value.routeConfig;return e&&e.path===""}function sC(t){let e=[],n=new Set;for(let r of t){if(!xF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=sC(r.children);e.push(new xt(r.value,i))}return e.filter(r=>!n.has(r))}function MF(t){return t.data||{}}function RF(t){return t.resolve||{}}function NF(t,e,n,r,i,o){return Pe(s=>bF(t,e,n,r,s.extractedUrl,i,o).pipe(V(({state:a,tree:u})=>ye(M({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function PF(t,e){return Pe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return k(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let c of aC(u))s.add(c);let a=0;return se(s).pipe(tr(u=>o.has(u)?kF(u,r,t,e):(u.data=Rm(u,u.parent,t).resolve,k(void 0))),Ae(()=>a++),Zi(1),Pe(u=>a===s.size?k(n):ct))})}function aC(t){let e=t.children.map(n=>aC(n)).flat();return[t,...e]}function kF(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!XT(i)&&(o[Ta]=i.title),OF(o,t,e,r).pipe(V(s=>(t._resolvedData=s,t.data=Rm(t,t.parent,n).resolve,null)))}function OF(t,e,n,r){let i=sm(t);if(i.length===0)return k({});let o={};return se(i).pipe(Pe(s=>FF(t[s],e,n,r).pipe(Dt(),Ae(a=>{o[s]=a}))),Zi(1),Sf(o),er(s=>iC(s)?ct:Ki(s)))}function FF(t,e,n,r){let i=Sa(e)??r,o=So(t,i),s=o.resolve?o.resolve(e,n):fn(i,()=>o(e,n));return pr(s)}function im(t){return _e(e=>{let n=t(e);return n?se(n).pipe(V(()=>e)):k(e)})}var uC=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===W);return i}getResolvedTitleForRoute(r){return r.data[Ta]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>E(LF),providedIn:"root"});let t=e;return t})(),LF=(()=>{let e=class e extends uC{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(D(bT))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xa=new R("",{providedIn:"root",factory:()=>({})}),Xl=new R(""),Fm=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=E(Ml)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return k(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=pr(r.loadComponent()).pipe(V(cC),Ae(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Yi(()=>{this.componentLoaders.delete(r)})),o=new zi(i,()=>new Se).pipe(qi());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return k({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=VF(i,this.compiler,r,this.onLoadEndListener).pipe(Yi(()=>{this.childrenLoaders.delete(i)})),a=new zi(s,()=>new Se).pipe(qi());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function VF(t,e,n,r){return pr(t.loadChildren()).pipe(V(cC),Pe(i=>i instanceof Hs||Array.isArray(i)?k(i):se(e.compileModuleAsync(i))),V(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Xl,[],{optional:!0,self:!0}).flat()),{routes:s.map(km),injector:o}}))}function jF(t){return t&&typeof t=="object"&&"default"in t}function cC(t){return jF(t)?t.default:t}var Lm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>E(UF),providedIn:"root"});let t=e;return t})(),UF=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lC=new R(""),dC=new R("");function BF(t,e,n){let r=t.get(dC),i=t.get(_t);return t.get(X).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(c=>{o=c}),a=i.startViewTransition(()=>(o(),$F(t))),{onViewTransitionCreated:u}=r;return u&&fn(t,()=>u({transition:a,from:e,to:n})),s})}function $F(t){return new Promise(e=>{Eg(e,{injector:t})})}var Vm=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Se,this.transitionAbortSubject=new Se,this.configLoader=E(Fm),this.environmentInjector=E(bt),this.urlSerializer=E(Ca),this.rootContexts=E(ba),this.location=E(yo),this.inputBindingEnabled=E(td,{optional:!0})!==null,this.titleStrategy=E(uC),this.options=E(xa,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=E(Lm),this.createViewTransition=E(lC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>k(void 0),this.rootComponentType=null;let r=o=>this.events.next(new pm(o)),i=o=>this.events.next(new gm(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ye(M(M({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new We({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:pa,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Be(s=>s.id!==0),V(s=>ye(M({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),_e(s=>{let a=!1,u=!1;return k(s).pipe(_e(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Mt.SupersededByNewNavigation),ct;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ye(M({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new fr(c.id,this.urlSerializer.serialize(c.rawUrl),h,Hl.IgnoredSameUrlNavigation)),c.resolve(null),ct}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return k(c).pipe(_e(h=>{let f=this.transitions?.getValue();return this.events.next(new To(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?ct:Promise.resolve(h)}),NF(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ae(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ye(M({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Gl(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:f,source:v,restoredState:y,extras:w}=c,T=new To(h,this.urlSerializer.serialize(f),v,y);this.events.next(T);let L=ZT(this.rootComponentType).snapshot;return this.currentTransition=s=ye(M({},c),{targetSnapshot:L,urlAfterRedirects:f,extras:ye(M({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,k(s)}else{let h="";return this.events.next(new fr(c.id,this.urlSerializer.serialize(c.extractedUrl),h,Hl.IgnoredByUrlHandlingStrategy)),c.resolve(null),ct}}),Ae(c=>{let l=new lm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),V(c=>(this.currentTransition=s=ye(M({},c),{guards:Y2(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),sF(this.environmentInjector,c=>this.events.next(c)),Ae(c=>{if(s.guardsResult=c.guardsResult,Do(c.guardsResult))throw tC(this.urlSerializer,c.guardsResult);let l=new dm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Be(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Mt.GuardRejected),!1)),im(c=>{if(c.guards.canActivateChecks.length)return k(c).pipe(Ae(l=>{let d=new hm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),_e(l=>{let d=!1;return k(l).pipe(PF(this.paramsInheritanceStrategy,this.environmentInjector),Ae({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Mt.NoDataFromResolver)}}))}),Ae(l=>{let d=new fm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),im(c=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ae(f=>{d.component=f}),V(()=>{})));for(let f of d.children)h.push(...l(f));return h};return xs(l(c.targetSnapshot.root)).pipe(nr(null),On(1))}),im(()=>this.afterPreactivation()),_e(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?se(d).pipe(V(()=>s)):k(s)}),V(c=>{let l=$2(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=ye(M({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Ae(()=>{this.events.next(new wa)}),Q2(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),On(1),Ae({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Un(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Rf(this.transitionAbortSubject.pipe(Ae(c=>{throw c}))),Yi(()=>{!a&&!u&&this.cancelNavigationTransition(s,"",Mt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),er(c=>{if(u=!0,rC(c))this.events.next(new hr(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),H2(c)?this.events.next(new _a(c.url)):s.resolve(!1);else{this.events.next(new va(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(l)}}return ct}))}))}cancelNavigationTransition(r,i,o){let s=new hr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function qF(t){return t!==pa}var zF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>E(HF),providedIn:"root"});let t=e;return t})(),Mm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},HF=(()=>{let e=class e extends Mm{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Jp(e)))(o||e)}})(),e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>E(GF),providedIn:"root"});let t=e;return t})(),GF=(()=>{let e=class e extends hC{constructor(){super(...arguments),this.location=E(yo),this.urlSerializer=E(Ca),this.options=E(xa,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=E(Lm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new dr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ZT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof To)this.stateMemento=this.createStateMemento();else if(r instanceof fr)this.rawUrlTree=i.initialUrl;else if(r instanceof Gl){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof wa?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof hr&&(r.code===Mt.GuardRejected||r.code===Mt.NoDataFromResolver)?this.restoreHistory(i):r instanceof va?this.restoreHistory(i,!0):r instanceof Un&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=M(M({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=M(M({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Jp(e)))(o||e)}})(),e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ha=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ha||{});function fC(t,e){t.events.pipe(Be(n=>n instanceof Un||n instanceof hr||n instanceof va||n instanceof fr),V(n=>n instanceof Un||n instanceof fr?ha.COMPLETE:(n instanceof hr?n.code===Mt.Redirect||n.code===Mt.SupersededByNewNavigation:!1)?ha.REDIRECTING:ha.FAILED),Be(n=>n!==ha.REDIRECTING),On(1)).subscribe(()=>{e()})}function WF(t){throw t}var KF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},si=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=E(bl),this.stateManager=E(hC),this.options=E(xa,{optional:!0})||{},this.pendingTasks=E(ra),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=E(Vm),this.urlSerializer=E(Ca),this.location=E(yo),this.urlHandlingStrategy=E(Lm),this._events=new Se,this.errorHandler=this.options.errorHandler||WF,this.navigated=!1,this.routeReuseStrategy=E(zF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=E(Xl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!E(td,{optional:!0}),this.eventsSubscription=new be,this.isNgZoneEnabled=E(X)instanceof X&&X.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof hr&&i.code!==Mt.Redirect&&i.code!==Mt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Un)this.navigated=!0;else if(i instanceof _a){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),u={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||qF(o.source)};this.scheduleNavigation(a,pa,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}ZF(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=M({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(km),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:a,d=null;switch(u){case"merge":d=M(M({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=WT(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return KT(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Do(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,pa,null,i)}navigate(r,i={skipLocationChange:!1}){return YF(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=M({},KF):i===!1?o=M({},QF):o=i,Do(r))return xT(this.currentUrlTree,r,o);let s=this.parseUrl(r);return xT(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,c,l;a?(u=a.resolve,c=a.reject,l=a.promise):l=new Promise((h,f)=>{u=h,c=f});let d=this.pendingTasks.add();return fC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function YF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new F(4008,!1)}function ZF(t){return!(t instanceof wa)&&!(t instanceof _a)}var ed=class{};var JF=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Be(r=>r instanceof Un),tr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Dl(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,u=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(u,s.children??s._loadedRoutes))}return se(o).pipe(Xn())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=k(null);let s=o.pipe(Pe(a=>a===null?k(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return se([s,a]).pipe(Xn())}else return s})}};e.\u0275fac=function(i){return new(i||e)(D(si),D(Ml),D(bt),D(ed),D(Fm))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pC=new R(""),XF=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof To?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Un?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof fr&&r.code===Hl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Wl&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Wl(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){Y0()},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function eL(t){return t.routerState.root}function Ma(t,e){return{\u0275kind:t,\u0275providers:e}}function tL(){let t=E(Jt);return e=>{let n=t.get(Vn);if(e!==n.components[0])return;let r=t.get(si),i=t.get(gC);t.get(jm)===1&&r.initialNavigation(),t.get(mC,null,Z.Optional)?.setUpPreloading(),t.get(pC,null,Z.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var gC=new R("",{factory:()=>new Se}),jm=new R("",{providedIn:"root",factory:()=>1});function nL(){return Ma(2,[{provide:jm,useValue:0},{provide:xl,multi:!0,deps:[Jt],useFactory:e=>{let n=e.get(XD,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(si),o=e.get(gC);fC(i,()=>{r(!0)}),e.get(Vm).afterPreactivation=()=>(r(!0),o.closed?k(void 0):o),i.initialNavigation()}))}}])}function rL(){return Ma(3,[{provide:xl,multi:!0,useFactory:()=>{let e=E(si);return()=>{e.setUpLocationChangeListener()}}},{provide:jm,useValue:2}])}var mC=new R("");function iL(t){return Ma(0,[{provide:mC,useExisting:JF},{provide:ed,useExisting:t}])}function oL(){return Ma(8,[PT,{provide:td,useExisting:PT}])}function sL(t){let e=[{provide:lC,useValue:BF},{provide:dC,useValue:M({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ma(9,e)}var OT=new R("ROUTER_FORROOT_GUARD"),aL=[yo,{provide:Ca,useClass:ma},si,ba,{provide:Co,useFactory:eL,deps:[si]},Fm,[]],Um=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[aL,[],{provide:Xl,multi:!0,useValue:r},{provide:OT,useFactory:dL,deps:[[si,new ao,new Op]]},{provide:xa,useValue:i||{}},i?.useHash?cL():lL(),uL(),i?.preloadingStrategy?iL(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?hL(i):[],i?.bindToComponentInputs?oL().\u0275providers:[],i?.enableViewTransitions?sL().\u0275providers:[],fL()]}}static forChild(r){return{ngModule:e,providers:[{provide:Xl,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(D(OT,8))},e.\u0275mod=nt({type:e}),e.\u0275inj=tt({});let t=e;return t})();function uL(){return{provide:pC,useFactory:()=>{let t=E(sT),e=E(X),n=E(xa),r=E(Vm),i=E(Ca);return n.scrollOffset&&t.setOffset(n.scrollOffset),new XF(i,r,t,e,n)}}}function cL(){return{provide:ni,useClass:tT}}function lL(){return{provide:ni,useClass:qg}}function dL(t){return"guarded"}function hL(t){return[t.initialNavigation==="disabled"?rL().\u0275providers:[],t.initialNavigation==="enabledBlocking"?nL().\u0275providers:[]]}var FT=new R("");function fL(){return[{provide:FT,useFactory:tL},{provide:go,multi:!0,useExisting:FT}]}var gL=[],yC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=nt({type:e}),e.\u0275inj=tt({imports:[Um.forRoot(gL),Um]});let t=e;return t})();var mL="firebase",yL="10.10.0";Jn(mL,yL,"app");var Ao=new lr("ANGULARFIRE2_VERSION");var vL=(t,e)=>{let n=e?[e]:J_(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ai=class{constructor(){return vL(wL)}},wL="app-check";function Bm(){}var rd=class{zone;delegate;constructor(e,n=Df){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},$m=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bm,{},Bm,Bm)),n.pipe(Ae({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},id=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new rd(Zone.current)),this.insideAngular=n.run(()=>new rd(Zone.current,As)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(D(X))};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _L(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function It(t){return IL(_L())(t)}function IL(t){return function(n){return n=n.lift(new $m(t.ngZone)),n.pipe(Ht(t.outsideAngular),kt(t.insideAngular))}}var TL=new Map,CL={activated:!1,tokenObservers:[]},bL={initialized:!1,enabled:!1};function Xt(t){return TL.get(t)||Object.assign({},CL)}function DC(){return bL}var SL="https://content-firebaseappcheck.googleapis.com/v1";var AL="exchangeDebugToken",wC={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},W7=24*60*60*1e3;var zm=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return m(this,null,function*(){this.stop();try{this.pending=new af,this.pending.promise.catch(n=>{}),yield xL(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new af,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function xL(t){return new Promise(e=>{setTimeout(e,t)})}var ML={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},gr=new Y_("appCheck","AppCheck",ML);function TC(t){if(!Xt(t).activated)throw gr.create("use-before-activation",{appName:t.name})}function CC(r,i){return m(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(o["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(f){throw gr.create("fetch-network-error",{originalErrorMessage:f?.message})}if(u.status!==200)throw gr.create("fetch-status-error",{httpStatus:u.status});let c;try{c=yield u.json()}catch(f){throw gr.create("fetch-parse-error",{originalErrorMessage:f?.message})}let l=c.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw gr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let d=Number(l[1])*1e3,h=Date.now();return{token:c.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function bC(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${SL}/projects/${n}/apps/${r}:${AL}?key=${i}`,body:{debug_token:e}}}var RL="firebase-app-check-database",NL=1,Hm="firebase-app-check-store";var od=null;function PL(){return od||(od=new Promise((t,e)=>{try{let n=indexedDB.open(RL,NL);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(gr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Hm,{keyPath:"compositeKey"})}}}catch(n){e(gr.create("storage-open",{originalErrorMessage:n?.message}))}}),od)}function kL(t,e){return OL(FL(t),e)}function OL(t,e){return m(this,null,function*(){let r=(yield PL()).transaction(Hm,"readwrite"),o=r.objectStore(Hm).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var c;a(gr.create("storage-set",{originalErrorMessage:(c=u.target.error)===null||c===void 0?void 0:c.message}))}})})}function FL(t){return`${t.options.appId}-${t.name}`}var Gm=new Gu("@firebase/app-check");function qm(t,e){return Hu()?kL(t,e).catch(n=>{Gm.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function SC(){return DC().enabled}function AC(){return m(this,null,function*(){let t=DC();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var LL={error:"UNKNOWN_ERROR"};function VL(t){return W_.encodeString(JSON.stringify(t),!1)}function Wm(t,e=!1){return m(this,null,function*(){let n=t.app;TC(n);let r=Xt(n),i=r.token,o;if(i&&!Ra(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Ra(u)?i=u:yield qm(n,void 0))}if(!e&&i&&Ra(i))return{token:i.token};let s=!1;if(SC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=CC(bC(n,yield AC()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield qm(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Xt(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Gm.warn(u.message):Gm.error(u),o=u}let a;return i?o?Ra(i)?a={token:i.token,internalError:o}:a=IC(o):(a={token:i.token},r.token=i,yield qm(n,i)):a=IC(o),s&&$L(n,a),a})}function jL(t){return m(this,null,function*(){let e=t.app;TC(e);let{provider:n}=Xt(e);if(SC()){let r=yield AC(),{token:i}=yield CC(bC(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function UL(t,e,n,r){let{app:i}=t,o=Xt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ra(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),_C(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>_C(t))}function xC(t,e){let n=Xt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function _C(t){let{app:e}=t,n=Xt(e),r=n.tokenRefresher;r||(r=BL(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function BL(t){let{app:e}=t;return new zm(()=>m(this,null,function*(){let n=Xt(e),r;if(n.token?r=yield Wm(t,!0):r=yield Wm(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Xt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},wC.RETRIAL_MIN_WAIT,wC.RETRIAL_MAX_WAIT)}function $L(t,e){let n=Xt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ra(t){return t.expireTimeMillis-Date.now()>0}function IC(t){return{token:VL(LL),error:t}}var Km=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Xt(this.app);for(let n of e)xC(this.app,n.next);return Promise.resolve()}};function qL(t,e){return new Km(t,e)}function zL(t){return{getToken:e=>Wm(t,e),getLimitedUseToken:()=>jL(t),addTokenListener:e=>UL(t,"INTERNAL",e),removeTokenListener:e=>xC(t.app,e)}}var HL="@firebase/app-check",GL="0.8.3";var WL="app-check",EC="app-check-internal";function KL(){Ts(new Lr(WL,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return qL(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(EC).initialize()})),Ts(new Lr(EC,t=>{let e=t.getProvider("app-check").getImmediate();return zL(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Jn(HL,GL)}KL();var QL=["localhost","0.0.0.0","127.0.0.1"],oq=typeof window<"u"&&QL.includes(window.location.hostname);var YL="firebase",ZL="10.10.0";yt.registerVersion(YL,ZL,"app-compat");var JL=["ngOnDestroy"],NC=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(JL.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(c=>n.run(()=>c)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,c)=>s.then(l=>{let d=l?.(...c);return r?.spy?.apply&&r.spy.apply(o,c,d),d})})})});var sd=class{constructor(e){return e}},xo=new R("angularfire2.app.options"),Mo=new R("angularfire2.app.name");function Na(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=yt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>yt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;XL("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new sd(s)}var XL=(t,...e)=>{Pg()&&typeof console<"u"&&console[t](...e)},eV={provide:sd,useFactory:Na,deps:[xo,X,[new ao,Mo]]},PC=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:xo,useValue:n},{provide:Mo,useValue:r}]}}constructor(n){yt.registerVersion("angularfire",Ao.full,"core"),yt.registerVersion("angularfire",Ao.full,"app-compat"),yt.registerVersion("angular",FD.full,n.toString())}static \u0275fac=function(r){return new(r||t)(D(rt))};static \u0275mod=nt({type:t});static \u0275inj=tt({providers:[eV]})}return t})();function ad(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return tV(i,s)||(RC("error",`${e} was already initialized on the ${n} Firebase App with different settings.${nV?" You may need to reload as Firebase is not HMR aware.":""}`),RC("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function tV(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var nV=typeof module<"u"&&!!module.hot,RC=(t,...e)=>{Pg()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Qm=new R("angularfire2.auth.use-emulator"),Ym=new R("angularfire2.auth.settings"),Zm=new R("angularfire2.auth.tenant-id"),Jm=new R("angularfire2.auth.langugage-code"),Xm=new R("angularfire2.auth.use-device-language"),ey=new R("angularfire.auth.persistence"),ty=(t,e,n,r,i,o,s,a)=>ad(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[c,l]of Object.entries(s))u.settings[c]=l;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]),kC=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,c,l,d,h,f){let v=new Se,y=k(void 0).pipe(kt(s.outsideAngular),_e(()=>o.runOutsideAngular(()=>import("./chunk-GOI2NOER.js"))),V(()=>Na(n,o,r)),V(w=>ty(w,o,a,c,l,d,u,h)),gc({bufferSize:1,refCount:!1}));if(ri(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=k(null);else{y.pipe(Dt()).subscribe();let w=y.pipe(_e(A=>A.getRedirectResult().then($=>$,()=>null)),It,gc({bufferSize:1,refCount:!1})),T=y.pipe(_e(A=>new J($=>({unsubscribe:o.runOutsideAngular(()=>A.onAuthStateChanged(q=>$.next(q),q=>$.error(q),()=>$.complete()))})))),L=y.pipe(_e(A=>new J($=>({unsubscribe:o.runOutsideAngular(()=>A.onIdTokenChanged(q=>$.next(q),q=>$.error(q),()=>$.complete()))}))));this.authState=w.pipe(mc(T),Ht(s.outsideAngular),kt(s.insideAngular)),this.user=w.pipe(mc(L),Ht(s.outsideAngular),kt(s.insideAngular)),this.idToken=this.user.pipe(_e(A=>A?se(A.getIdToken()):k(null))),this.idTokenResult=this.user.pipe(_e(A=>A?se(A.getIdTokenResult()):k(null))),this.credential=bf(w,v,this.authState.pipe(Be(A=>!A))).pipe(V(A=>A?.user?A:null),Ht(s.outsideAngular),kt(s.insideAngular))}return NC(this,y,o,{spy:{apply:(w,T,L)=>{(w.startsWith("signIn")||w.startsWith("createUser"))&&L.then(A=>v.next(A))}}})}static \u0275fac=function(r){return new(r||t)(D(xo),D(Mo,8),D(rt),D(X),D(id),D(Qm,8),D(Ym,8),D(Zm,8),D(Jm,8),D(Xm,8),D(ey,8),D(ai,8))};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var iV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tn={},S,Dy=Dy||{},B=iV||self;function Id(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ga(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function oV(t){return Object.prototype.hasOwnProperty.call(t,ny)&&t[ny]||(t[ny]=++sV)}var ny="closure_uid_"+(1e9*Math.random()>>>0),sV=0;function aV(t,e,n){return t.call.apply(t.bind,arguments)}function uV(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function it(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?it=aV:it=uV,it.apply(null,arguments)}function ud(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ze(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function mr(){this.s=this.s,this.o=this.o}var cV=0;mr.prototype.s=!1;mr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),cV!=0)&&oV(this)};mr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var WC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Ty(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function OC(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Id(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function ot(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var lV=function(){if(!B.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};B.addEventListener("test",n,e),B.removeEventListener("test",n,e)}catch{}return t}();function Va(t){return/^[\s\xa0]*$/.test(t)}function Ed(){var t=B.navigator;return t&&(t=t.userAgent)?t:""}function _n(t){return Ed().indexOf(t)!=-1}function Cy(t){return Cy[" "](t),t}Cy[" "]=function(){};function dV(t,e){var n=XV;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var hV=_n("Opera"),ko=_n("Trident")||_n("MSIE"),KC=_n("Edge"),ay=KC||ko,QC=_n("Gecko")&&!(Ed().toLowerCase().indexOf("webkit")!=-1&&!_n("Edge"))&&!(_n("Trident")||_n("MSIE"))&&!_n("Edge"),fV=Ed().toLowerCase().indexOf("webkit")!=-1&&!_n("Edge");function YC(){var t=B.document;return t?t.documentMode:void 0}var uy;e:{if(cd="",ld=function(){var t=Ed();if(QC)return/rv:([^\);]+)(\)|;)/.exec(t);if(KC)return/Edge\/([\d\.]+)/.exec(t);if(ko)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(fV)return/WebKit\/(\S+)/.exec(t);if(hV)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),ld&&(cd=ld?ld[1]:""),ko&&(dd=YC(),dd!=null&&dd>parseFloat(cd))){uy=String(dd);break e}uy=cd}var cd,ld,dd,cy;B.document&&ko?(ry=YC(),cy=ry||parseInt(uy,10)||void 0):cy=void 0;var ry,pV=cy;function ja(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(QC){e:{try{Cy(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:gV[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ja.$.h.call(this)}}ze(ja,ot);var gV={2:"touch",3:"pen",4:"mouse"};ja.prototype.h=function(){ja.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Wa="closure_listenable_"+(1e6*Math.random()|0),mV=0;function yV(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++mV,this.fa=this.ia=!1}function Dd(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function by(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function vV(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function ZC(t){let e={};for(let n in t)e[n]=t[n];return e}var FC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function JC(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<FC.length;o++)n=FC[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Td(t){this.src=t,this.g={},this.h=0}Td.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=dy(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new yV(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function ly(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=WC(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Dd(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function dy(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var Sy="closure_lm_"+(1e6*Math.random()|0),iy={};function XC(t,e,n,r,i){if(r&&r.once)return tb(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)XC(t,e[o],n,r,i);return null}return n=My(n),t&&t[Wa]?t.O(e,n,Ga(r)?!!r.capture:!!r,i):eb(t,e,n,!1,r,i)}function eb(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Ga(i)?!!i.capture:!!i,a=xy(t);if(a||(t[Sy]=a=new Td(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=wV(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)lV||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(rb(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function wV(){function t(n){return e.call(t.src,t.listener,n)}let e=_V;return t}function tb(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)tb(t,e[o],n,r,i);return null}return n=My(n),t&&t[Wa]?t.P(e,n,Ga(r)?!!r.capture:!!r,i):eb(t,e,n,!0,r,i)}function nb(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)nb(t,e[o],n,r,i);else r=Ga(r)?!!r.capture:!!r,n=My(n),t&&t[Wa]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=dy(o,n,r,i),-1<n&&(Dd(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=xy(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dy(e,n,r,i)),(n=-1<t?e[t]:null)&&Ay(n))}function Ay(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Wa])ly(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(rb(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=xy(e))?(ly(n,t),n.h==0&&(n.src=null,e[Sy]=null)):Dd(t)}}}function rb(t){return t in iy?iy[t]:iy[t]="on"+t}function _V(t,e){if(t.fa)t=!0;else{e=new ja(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Ay(t),t=n.call(r,e)}return t}function xy(t){return t=t[Sy],t instanceof Td?t:null}var oy="__closure_events_fn_"+(1e9*Math.random()>>>0);function My(t){return typeof t=="function"?t:(t[oy]||(t[oy]=function(e){return t.handleEvent(e)}),t[oy])}function qe(){mr.call(this),this.i=new Td(this),this.S=this,this.J=null}ze(qe,mr);qe.prototype[Wa]=!0;qe.prototype.removeEventListener=function(t,e,n,r){nb(this,t,e,n,r)};function Ze(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new ot(e,t);else if(e instanceof ot)e.target=e.target||t;else{var i=e;e=new ot(r,t),JC(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=hd(s,r,!0,e)&&i}if(s=e.g=t,i=hd(s,r,!0,e)&&i,i=hd(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=hd(s,r,!1,e)&&i}qe.prototype.N=function(){if(qe.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Dd(n[r]);delete t.g[e],t.h--}}this.J=null};qe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};qe.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function hd(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&ly(t.i,s),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var Ry=B.JSON.stringify,hy=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function IV(){var t=Ny;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var fy=class{constructor(){this.h=this.g=null}add(e,n){let r=ib.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},ib=new hy(()=>new py,t=>t.reset()),py=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function EV(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function DV(t){B.setTimeout(()=>{throw t},0)}var Ua,Ba=!1,Ny=new fy,ob=()=>{let t=B.Promise.resolve(void 0);Ua=()=>{t.then(TV)}},TV=()=>{for(var t;t=IV();){try{t.h.call(t.g)}catch(n){DV(n)}var e=ib;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ba=!1};function Cd(t,e){qe.call(this),this.h=t||1,this.g=e||B,this.j=it(this.qb,this),this.l=Date.now()}ze(Cd,qe);S=Cd.prototype;S.ga=!1;S.T=null;S.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ze(this,"tick"),this.ga&&(Py(this),this.start()))}};S.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Py(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}S.N=function(){Cd.$.N.call(this),Py(this),delete this.g};function ky(t,e,n){if(typeof t=="function")n&&(t=it(t,n));else if(t&&typeof t.handleEvent=="function")t=it(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:B.setTimeout(t,e||0)}function sb(t){t.g=ky(()=>{t.g=null,t.i&&(t.i=!1,sb(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var gy=class extends mr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:sb(this)}N(){super.N(),this.g&&(B.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function $a(t){mr.call(this),this.h=t,this.g={}}ze($a,mr);var LC=[];function ab(t,e,n,r){Array.isArray(n)||(n&&(LC[0]=n.toString()),n=LC);for(var i=0;i<n.length;i++){var o=XC(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function ub(t){by(t.g,function(e,n){this.g.hasOwnProperty(n)&&Ay(e)},t),t.g={}}$a.prototype.N=function(){$a.$.N.call(this),ub(this)};$a.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function bd(){this.g=!0}bd.prototype.Ea=function(){this.g=!1};function CV(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");s=2<=d.length&&d[1]=="type"?s+(l+"="+c+"&"):s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function bV(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function No(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+AV(t,n)+(r?" "+r:"")})}function SV(t,e){t.info(function(){return"TIMEOUT: "+e})}bd.prototype.info=function(){};function AV(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return Ry(n)}catch{return e}}var di={},VC=null;function Sd(){return VC=VC||new qe}di.Ta="serverreachability";function cb(t){ot.call(this,di.Ta,t)}ze(cb,ot);function qa(t){let e=Sd();Ze(e,new cb(e))}di.STAT_EVENT="statevent";function lb(t,e){ot.call(this,di.STAT_EVENT,t),this.stat=e}ze(lb,ot);function ht(t){let e=Sd();Ze(e,new lb(e,t))}di.Ua="timingevent";function db(t,e){ot.call(this,di.Ua,t),this.size=e}ze(db,ot);function Ka(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return B.setTimeout(function(){t()},e)}var Ad={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},hb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Oy(){}Oy.prototype.h=null;function jC(t){return t.h||(t.h=t.i())}function fb(){}var Qa={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Fy(){ot.call(this,"d")}ze(Fy,ot);function Ly(){ot.call(this,"c")}ze(Ly,ot);var my;function xd(){}ze(xd,Oy);xd.prototype.g=function(){return new XMLHttpRequest};xd.prototype.i=function(){return{}};my=new xd;function Ya(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new $a(this),this.P=xV,t=ay?125:void 0,this.V=new Cd(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new pb}function pb(){this.i=null,this.g="",this.h=!1}var xV=45e3,gb={},yy={};S=Ya.prototype;S.setTimeout=function(t){this.P=t};function vy(t,e,n){t.L=1,t.A=Rd($n(e)),t.u=n,t.S=!0,mb(t,null)}function mb(t,e){t.G=Date.now(),Za(t),t.B=$n(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Tb(n.i,"t",r),t.o=0,n=t.l.J,t.h=new pb,t.g=Hb(t.l,n?e:null,!t.u),0<t.O&&(t.M=new gy(it(t.Pa,t,t.g),t.O)),ab(t.U,t.g,"readystatechange",t.nb),e=t.I?ZC(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),qa(),CV(t.j,t.v,t.B,t.m,t.W,t.u)}S.nb=function(t){t=t.target;let e=this.M;e&&In(t)==3?e.l():this.Pa(t)};S.Pa=function(t){try{if(t==this.g)e:{let l=In(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||ay||this.g&&(this.h.h||this.g.ja()||qC(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?qa(3):qa(2)),Md(this);var n=this.g.da();this.ca=n;t:if(yb(this)){var r=qC(this.g);t="";var i=r.length,o=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ui(this),La(this);var s="";break t}this.h.i=new B.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,bV(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Va(a)){var c=a;break t}}c=null}if(n=c)No(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wy(this,n);else{this.i=!1,this.s=3,ht(12),ui(this),La(this);break e}}this.S?(vb(this,l,s),ay&&this.i&&l==3&&(ab(this.U,this.V,"tick",this.mb),this.V.start())):(No(this.j,this.m,s,null),wy(this,s)),l==4&&ui(this),this.i&&!this.J&&(l==4?Bb(this.l,this):(this.i=!1,Za(this)))}else YV(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),ui(this),La(this)}}}catch{}finally{}};function yb(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function vb(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=MV(t,n),i==yy){e==4&&(t.s=4,ht(14),r=!1),No(t.j,t.m,null,"[Incomplete Response]");break}else if(i==gb){t.s=4,ht(15),No(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else No(t.j,t.m,i,null),wy(t,i);yb(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,ht(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),qy(e),e.M=!0,ht(11))):(No(t.j,t.m,n,"[Invalid Chunked Response]"),ui(t),La(t))}S.mb=function(){if(this.g){var t=In(this.g),e=this.g.ja();this.o<e.length&&(Md(this),vb(this,t,e),this.i&&t!=4&&Za(this))}};function MV(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?yy:(n=Number(e.substring(n,r)),isNaN(n)?gb:(r+=1,r+n>e.length?yy:(e=e.slice(r,r+n),t.o=r+n,e)))}S.cancel=function(){this.J=!0,ui(this)};function Za(t){t.Y=Date.now()+t.P,wb(t,t.P)}function wb(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Ka(it(t.lb,t),e)}function Md(t){t.C&&(B.clearTimeout(t.C),t.C=null)}S.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(SV(this.j,this.B),this.L!=2&&(qa(),ht(17)),ui(this),this.s=2,La(this)):wb(this,this.Y-t)};function La(t){t.l.H==0||t.J||Bb(t.l,t)}function ui(t){Md(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Py(t.V),ub(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function wy(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||_y(n.i,t))){if(!t.K&&_y(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)yd(n),kd(n);else break e;$y(n),ht(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ka(it(n.ib,n),6e3));if(1>=Sb(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ci(n,11)}else if((t.K||n.g==t)&&yd(n),!Va(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];let l=c[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let v=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var o=r.i;o.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(Vy(o,o.h),o.h=null))}if(r.F){let y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.Da=y,pe(r.I,r.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=zb(r,r.J?r.pa:null,r.Y),s.K){Ab(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(Md(a),Za(a)),r.g=s}else jb(r);0<n.j.length&&Od(n)}else c[0]!="stop"&&c[0]!="close"||ci(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?ci(n,7):By(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}qa(4)}catch{}}function RV(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Id(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function NV(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Id(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function _b(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Id(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=NV(t),r=RV(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var Ib=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function PV(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function li(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof li){this.h=t.h,gd(this,t.j),this.s=t.s,this.g=t.g,md(this,t.m),this.l=t.l;var e=t.i,n=new za;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),UC(this,n),this.o=t.o}else t&&(e=String(t).match(Ib))?(this.h=!1,gd(this,e[1]||"",!0),this.s=Oa(e[2]||""),this.g=Oa(e[3]||"",!0),md(this,e[4]),this.l=Oa(e[5]||"",!0),UC(this,e[6]||"",!0),this.o=Oa(e[7]||"")):(this.h=!1,this.i=new za(null,this.h))}li.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Fa(e,BC,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Fa(e,BC,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Fa(n,n.charAt(0)=="/"?FV:OV,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Fa(n,VV)),t.join("")};function $n(t){return new li(t)}function gd(t,e,n){t.j=n?Oa(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function md(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function UC(t,e,n){e instanceof za?(t.i=e,jV(t.i,t.h)):(n||(e=Fa(e,LV)),t.i=new za(e,t.h))}function pe(t,e,n){t.i.set(e,n)}function Rd(t){return pe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Oa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fa(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,kV),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function kV(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var BC=/[#\/\?@]/g,OV=/[#\?:]/g,FV=/[#\?]/g,LV=/[#\?@]/g,VV=/#/g;function za(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function yr(t){t.g||(t.g=new Map,t.h=0,t.i&&PV(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}S=za.prototype;S.add=function(t,e){yr(this),this.i=null,t=Oo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Eb(t,e){yr(t),e=Oo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Db(t,e){return yr(t),e=Oo(t,e),t.g.has(e)}S.forEach=function(t,e){yr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};S.ta=function(){yr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};S.Z=function(t){yr(this);let e=[];if(typeof t=="string")Db(this,t)&&(e=e.concat(this.g.get(Oo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};S.set=function(t,e){return yr(this),this.i=null,t=Oo(this,t),Db(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};S.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Tb(t,e,n){Eb(t,e),0<n.length&&(t.i=null,t.g.set(Oo(t,e),Ty(n)),t.h+=n.length)}S.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function Oo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function jV(t,e){e&&!t.j&&(yr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Eb(this,r),Tb(this,i,n))},t)),t.j=e}var UV=class{constructor(t,e){this.g=t,this.map=e}};function Cb(t){this.l=t||BV,B.PerformanceNavigationTiming?(t=B.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(B.g&&B.g.Ka&&B.g.Ka()&&B.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var BV=10;function bb(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Sb(t){return t.h?1:t.g?t.g.size:0}function _y(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Vy(t,e){t.g?t.g.add(e):t.h=e}function Ab(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Cb.prototype.cancel=function(){if(this.i=xb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function xb(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Ty(t.i)}var $V=class{stringify(t){return B.JSON.stringify(t,void 0)}parse(t){return B.JSON.parse(t,void 0)}};function qV(){this.g=new $V}function zV(t,e,n){let r=n||"";try{_b(t,function(i,o){let s=i;Ga(i)&&(s=Ry(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function HV(t,e){let n=new bd;if(B.Image){let r=new Image;r.onload=ud(fd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ud(fd,n,r,"TestLoadImage: error",!1,e),r.onabort=ud(fd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ud(fd,n,r,"TestLoadImage: timeout",!1,e),B.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function fd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ja(t){this.l=t.ec||null,this.j=t.ob||!1}ze(Ja,Oy);Ja.prototype.g=function(){return new Nd(this.l,this.j)};Ja.prototype.i=function(t){return function(){return t}}({});function Nd(t,e){qe.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=jy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ze(Nd,qe);var jy=0;S=Nd.prototype;S.open=function(t,e){if(this.readyState!=jy)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ha(this)};S.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||B).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};S.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xa(this)),this.readyState=jy};S.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ha(this)),this.g&&(this.readyState=3,Ha(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof B.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Mb(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Mb(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}S.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Xa(this):Ha(this),this.readyState==3&&Mb(this)}};S.Za=function(t){this.g&&(this.response=this.responseText=t,Xa(this))};S.Ya=function(t){this.g&&(this.response=t,Xa(this))};S.ka=function(){this.g&&Xa(this)};function Xa(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ha(t)}S.setRequestHeader=function(t,e){this.v.append(t,e)};S.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};S.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ha(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Nd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var GV=B.JSON.parse;function De(t){qe.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Rb,this.L=this.M=!1}ze(De,qe);var Rb="",WV=/^https?$/i,KV=["POST","PUT"];S=De.prototype;S.Oa=function(t){this.M=t};S.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():my.g(),this.C=this.u?jC(this.u):jC(my),this.g.onreadystatechange=it(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){$C(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=B.FormData&&t instanceof B.FormData,!(0<=WC(KV,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{kb(this),0<this.B&&((this.L=QV(this.g))?(this.g.timeout=this.B,this.g.ontimeout=it(this.ua,this)):this.A=ky(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){$C(this,o)}};function QV(t){return ko&&typeof t.timeout=="number"&&t.ontimeout!==void 0}S.ua=function(){typeof Dy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ze(this,"timeout"),this.abort(8))};function $C(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Nb(t),Pd(t)}function Nb(t){t.F||(t.F=!0,Ze(t,"complete"),Ze(t,"error"))}S.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ze(this,"complete"),Ze(this,"abort"),Pd(this))};S.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Pd(this,!0)),De.$.N.call(this)};S.La=function(){this.s||(this.G||this.v||this.l?Pb(this):this.kb())};S.kb=function(){Pb(this)};function Pb(t){if(t.h&&typeof Dy<"u"&&(!t.C[1]||In(t)!=4||t.da()!=2)){if(t.v&&In(t)==4)ky(t.La,0,t);else if(Ze(t,"readystatechange"),In(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(Ib)[1]||null;!i&&B.self&&B.self.location&&(i=B.self.location.protocol.slice(0,-1)),r=!WV.test(i?i.toLowerCase():"")}n=r}if(n)Ze(t,"complete"),Ze(t,"success");else{t.m=6;try{var o=2<In(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",Nb(t)}}finally{Pd(t)}}}}function Pd(t,e){if(t.g){kb(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ze(t,"ready");try{n.onreadystatechange=r}catch{}}}function kb(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(B.clearTimeout(t.A),t.A=null)}S.isActive=function(){return!!this.g};function In(t){return t.g?t.g.readyState:0}S.da=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}};S.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};S.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),GV(e)}};function qC(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Rb:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function YV(t){let e={};t=(t.g&&2<=In(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Va(t[r]))continue;var n=EV(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}vV(e,function(r){return r.join(", ")})}S.Ia=function(){return this.m};S.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Ob(t){let e="";return by(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Uy(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ob(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):pe(t,e,n))}function Pa(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Fb(t){this.Ga=0,this.j=[],this.l=new bd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Pa("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Pa("baseRetryDelayMs",5e3,t),this.hb=Pa("retryDelaySeedMs",1e4,t),this.eb=Pa("forwardChannelMaxRetries",2,t),this.xa=Pa("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Cb(t&&t.concurrentRequestLimit),this.Ja=new qV,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}S=Fb.prototype;S.ra=8;S.H=1;function By(t){if(Lb(t),t.H==3){var e=t.W++,n=$n(t.I);if(pe(n,"SID",t.K),pe(n,"RID",e),pe(n,"TYPE","terminate"),eu(t,n),e=new Ya(t,t.l,e),e.L=2,e.A=Rd($n(n)),n=!1,B.navigator&&B.navigator.sendBeacon)try{n=B.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&B.Image&&(new Image().src=e.A,n=!0),n||(e.g=Hb(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Za(e)}qb(t)}function kd(t){t.g&&(qy(t),t.g.cancel(),t.g=null)}function Lb(t){kd(t),t.u&&(B.clearTimeout(t.u),t.u=null),yd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&B.clearTimeout(t.m),t.m=null)}function Od(t){if(!bb(t.i)&&!t.m){t.m=!0;var e=t.Na;Ua||ob(),Ba||(Ua(),Ba=!0),Ny.add(e,t),t.C=0}}function ZV(t,e){return Sb(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ka(it(t.Na,t,e),$b(t,t.C)),t.C++,!0)}S.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Ya(this,this.l,t),o=this.s;if(this.U&&(o?(o=ZC(o),JC(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Vb(this,i,e),n=$n(this.I),pe(n,"RID",t),pe(n,"CVER",22),this.F&&pe(n,"X-HTTP-Session-Id",this.F),eu(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(Ob(o)))+"&"+e:this.o&&Uy(n,this.o,o)),Vy(this.i,i),this.bb&&pe(n,"TYPE","init"),this.P?(pe(n,"$req",e),pe(n,"SID","null"),i.aa=!0,vy(i,n,null)):vy(i,n,e),this.H=2}}else this.H==3&&(t?zC(this,t):this.j.length==0||bb(this.i)||zC(this))};function zC(t,e){var n;e?n=e.m:n=t.W++;let r=$n(t.I);pe(r,"SID",t.K),pe(r,"RID",n),pe(r,"AID",t.V),eu(t,r),t.o&&t.s&&Uy(r,t.o,t.s),n=new Ya(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Vb(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Vy(t.i,n),vy(n,r,e)}function eu(t,e){t.na&&by(t.na,function(n,r){pe(e,r,n)}),t.h&&_b({},function(n,r){pe(e,r,n)})}function Vb(t,e,n){n=Math.min(t.j.length,n);var r=t.h?it(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<n;u++){let c=i[u].g,l=i[u].map;if(c-=o,0>c)o=Math.max(0,i[u].g-100),a=!1;else try{zV(l,s,"req"+c+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function jb(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ua||ob(),Ba||(Ua(),Ba=!0),Ny.add(e,t),t.A=0}}function $y(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ka(it(t.Ma,t),$b(t,t.A)),t.A++,!0)}S.Ma=function(){if(this.u=null,Ub(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ka(it(this.jb,this),t)}};S.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ht(10),kd(this),Ub(this))};function qy(t){t.B!=null&&(B.clearTimeout(t.B),t.B=null)}function Ub(t){t.g=new Ya(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=$n(t.wa);pe(e,"RID","rpc"),pe(e,"SID",t.K),pe(e,"AID",t.V),pe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&pe(e,"TO",t.qa),pe(e,"TYPE","xmlhttp"),eu(t,e),t.o&&t.s&&Uy(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Rd($n(e)),n.u=null,n.S=!0,mb(n,t)}S.ib=function(){this.v!=null&&(this.v=null,kd(this),$y(this),ht(19))};function yd(t){t.v!=null&&(B.clearTimeout(t.v),t.v=null)}function Bb(t,e){var n=null;if(t.g==e){yd(t),qy(t),t.g=null;var r=2}else if(_y(t.i,e))n=e.F,Ab(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Sd(),Ze(r,new db(r,n)),Od(t)}else jb(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&ZV(t,e)||r==2&&$y(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ci(t,5);break;case 4:ci(t,10);break;case 3:ci(t,6);break;default:ci(t,2)}}}function $b(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ci(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=it(t.pb,t);n||(n=new li("//www.google.com/images/cleardot.gif"),B.location&&B.location.protocol=="http"||gd(n,"https"),Rd(n)),HV(n.toString(),r)}else ht(2);t.H=0,t.h&&t.h.za(e),qb(t),Lb(t)}S.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ht(2)):(this.l.info("Failed to ping google.com"),ht(1))};function qb(t){if(t.H=0,t.ma=[],t.h){let e=xb(t.i);(e.length!=0||t.j.length!=0)&&(OC(t.ma,e),OC(t.ma,t.j),t.i.i.length=0,Ty(t.j),t.j.length=0),t.h.ya()}}function zb(t,e,n){var r=n instanceof li?$n(n):new li(n);if(r.g!="")e&&(r.g=e+"."+r.g),md(r,r.m);else{var i=B.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new li(null);r&&gd(o,r),e&&(o.g=e),i&&md(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&pe(r,n,e),pe(r,"VER",t.ra),eu(t,r),r}function Hb(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new De(new Ja({ob:n})):new De(t.va),e.Oa(t.J),e}S.isActive=function(){return!!this.h&&this.h.isActive(this)};function Gb(){}S=Gb.prototype;S.Ba=function(){};S.Aa=function(){};S.za=function(){};S.ya=function(){};S.isActive=function(){return!0};S.Va=function(){};function vd(){if(ko&&!(10<=Number(pV)))throw Error("Environmental error: no available transport.")}vd.prototype.g=function(t,e){return new Rt(t,e)};function Rt(t,e){qe.call(this),this.g=new Fb(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Va(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Va(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Fo(this)}ze(Rt,qe);Rt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ht(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=zb(t,null,t.Y),Od(t)};Rt.prototype.close=function(){By(this.g)};Rt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ry(t),t=n);e.j.push(new UV(e.fb++,t)),e.H==3&&Od(e)};Rt.prototype.N=function(){this.g.h=null,delete this.j,By(this.g),delete this.g,Rt.$.N.call(this)};function Wb(t){Fy.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ze(Wb,Fy);function Kb(){Ly.call(this),this.status=1}ze(Kb,Ly);function Fo(t){this.g=t}ze(Fo,Gb);Fo.prototype.Ba=function(){Ze(this.g,"a")};Fo.prototype.Aa=function(t){Ze(this.g,new Wb(t))};Fo.prototype.za=function(t){Ze(this.g,new Kb)};Fo.prototype.ya=function(){Ze(this.g,"b")};function JV(){this.blockSize=-1}function en(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ze(en,JV);en.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function sy(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}en.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)sy(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){sy(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){sy(this,r),i=0;break}}this.h=i,this.i+=e};en.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ue(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var XV={};function zy(t){return-128<=t&&128>t?dV(t,function(e){return new ue([e|0],0>e?-1:0)}):new ue([t|0],0>t?-1:0)}function En(t){if(isNaN(t)||!isFinite(t))return Po;if(0>t)return Ye(En(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Iy;return new ue(e,0)}function Qb(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ye(Qb(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=En(Math.pow(e,8)),r=Po,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=En(Math.pow(e,o)),r=r.R(o).add(En(s))):(r=r.R(n),r=r.add(En(s)))}return r}var Iy=4294967296,Po=zy(0),Ey=zy(1),HC=zy(16777216);S=ue.prototype;S.ea=function(){if(jt(this))return-Ye(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Iy+r)*e,e*=Iy}return t};S.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Bn(this))return"0";if(jt(this))return"-"+Ye(this).toString(t);for(var e=En(Math.pow(t,6)),n=this,r="";;){var i=_d(n,e).g;n=wd(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Bn(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};S.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Bn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function jt(t){return t.h==-1}S.X=function(t){return t=wd(this,t),jt(t)?-1:Bn(t)?0:1};function Ye(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ue(n,~t.h).add(Ey)}S.abs=function(){return jt(this)?Ye(this):this};S.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new ue(n,n[n.length-1]&-2147483648?-1:0)};function wd(t,e){return t.add(Ye(e))}S.R=function(t){if(Bn(this)||Bn(t))return Po;if(jt(this))return jt(t)?Ye(this).R(Ye(t)):Ye(Ye(this).R(t));if(jt(t))return Ye(this.R(Ye(t)));if(0>this.X(HC)&&0>t.X(HC))return En(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,u=t.D(i)&65535;n[2*r+2*i]+=s*u,pd(n,2*r+2*i),n[2*r+2*i+1]+=o*u,pd(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,pd(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,pd(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ue(n,0)};function pd(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ka(t,e){this.g=t,this.h=e}function _d(t,e){if(Bn(e))throw Error("division by zero");if(Bn(t))return new ka(Po,Po);if(jt(t))return e=_d(Ye(t),e),new ka(Ye(e.g),Ye(e.h));if(jt(e))return e=_d(t,Ye(e)),new ka(Ye(e.g),e.h);if(30<t.g.length){if(jt(t)||jt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Ey,r=e;0>=r.X(t);)n=GC(n),r=GC(r);var i=Ro(n,1),o=Ro(r,1);for(r=Ro(r,2),n=Ro(n,2);!Bn(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=Ro(r,1),n=Ro(n,1)}return e=wd(t,i.R(e)),new ka(i,e)}for(i=Po;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=En(n),s=o.R(e);jt(s)||0<s.X(t);)n-=r,o=En(n),s=o.R(e);Bn(o)&&(o=Ey),i=i.add(o),t=wd(t,s)}return new ka(i,t)}S.gb=function(t){return _d(this,t).h};S.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ue(n,this.h&t.h)};S.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ue(n,this.h|t.h)};S.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ue(n,this.h^t.h)};function GC(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ue(n,t.h)}function Ro(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new ue(i,t.h)}vd.prototype.createWebChannel=vd.prototype.g;Rt.prototype.send=Rt.prototype.u;Rt.prototype.open=Rt.prototype.m;Rt.prototype.close=Rt.prototype.close;Ad.NO_ERROR=0;Ad.TIMEOUT=8;Ad.HTTP_ERROR=6;hb.COMPLETE="complete";fb.EventType=Qa;Qa.OPEN="a";Qa.CLOSE="b";Qa.ERROR="c";Qa.MESSAGE="d";qe.prototype.listen=qe.prototype.O;De.prototype.listenOnce=De.prototype.P;De.prototype.getLastError=De.prototype.Sa;De.prototype.getLastErrorCode=De.prototype.Ia;De.prototype.getStatus=De.prototype.da;De.prototype.getResponseJson=De.prototype.Wa;De.prototype.getResponseText=De.prototype.ja;De.prototype.send=De.prototype.ha;De.prototype.setWithCredentials=De.prototype.Oa;en.prototype.digest=en.prototype.l;en.prototype.reset=en.prototype.reset;en.prototype.update=en.prototype.j;ue.prototype.add=ue.prototype.add;ue.prototype.multiply=ue.prototype.R;ue.prototype.modulo=ue.prototype.gb;ue.prototype.compare=ue.prototype.X;ue.prototype.toNumber=ue.prototype.ea;ue.prototype.toString=ue.prototype.toString;ue.prototype.getBits=ue.prototype.D;ue.fromNumber=En;ue.fromString=Qb;var Yb=tn.createWebChannelTransport=function(){return new vd},Zb=tn.getStatEventTarget=function(){return Sd()},Fd=tn.ErrorCode=Ad,Jb=tn.EventType=hb,Xb=tn.Event=di,Hy=tn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Mq=tn.FetchXmlHttpFactory=Ja,tu=tn.WebChannel=fb,eS=tn.XhrIo=De,tS=tn.Md5=en,hi=tn.Integer=ue;var nS="@firebase/firestore";var Fe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Fe.UNAUTHENTICATED=new Fe(null),Fe.GOOGLE_CREDENTIALS=new Fe("google-credentials-uid"),Fe.FIRST_PARTY=new Fe("first-party-uid"),Fe.MOCK_USER=new Fe("mock-user");var fs="10.10.0";var Tr=new Gu("@firebase/firestore");function Bo(){return Tr.logLevel}function nA(t){Tr.setLogLevel(t)}function I(t,...e){if(Tr.logLevel<=an.DEBUG){let n=e.map(Kw);Tr.debug(`Firestore (${fs}): ${t}`,...n)}}function Me(t,...e){if(Tr.logLevel<=an.ERROR){let n=e.map(Kw);Tr.error(`Firestore (${fs}): ${t}`,...n)}}function Bt(t,...e){if(Tr.logLevel<=an.WARN){let n=e.map(Kw);Tr.warn(`Firestore (${fs}): ${t}`,...n)}}function Kw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function x(t="Unexpected state"){let e=`FIRESTORE (${fs}) INTERNAL ASSERTION FAILED: `+t;throw Me(e),new Error(e)}function N(t,e){t||x()}function rA(t,e){t||x()}function b(t,e){return t}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_=class extends Q_{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Le=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Wd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Yy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Fe.UNAUTHENTICATED))}shutdown(){}},Zy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Jy=class{constructor(e){this.t=e,this.currentUser=Fe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Le;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Le,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>m(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Le)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(N(typeof r.accessToken=="string"),new Wd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return N(e===null||typeof e=="string"),new Fe(e)}},Xy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Fe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ev=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Xy(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Fe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},tv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},nv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&I("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,I("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(N(typeof n.token=="string"),this.R=n.token,new tv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function e4(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Kd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=e4(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function z(t,e){return t<e?-1:t>e?1:0}function Yo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function iA(t){return t+"\0"}var Ee=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new _(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?z(this.nanoseconds,e.nanoseconds):z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var O=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ee(0,0))}static max(){return new t(new Ee(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Qd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&x(),r===void 0?r=e.length-n:r>e.length-n&&x(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},re=class t extends Qd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new _(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},t4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Re=class t extends Qd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return t4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new _(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new _(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new _(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new _(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var C=class t{constructor(e){this.path=e}static fromPath(e){return new t(re.fromString(e))}static fromName(e){return new t(re.fromString(e).popFirst(5))}static empty(){return new t(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new re(e.slice()))}};var Zo=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function rv(t){return t.fields.find(e=>e.kind===2)}function pi(t){return t.fields.filter(e=>e.kind!==2)}Zo.UNKNOWN_ID=-1;var Wo=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var fu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,$t.min())}};function oA(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=O.fromTimestamp(r===1e9?new Ee(n+1,0):new Ee(n,r));return new $t(i,C.empty(),e)}function sA(t){return new $t(t.readTime,t.key,-1)}var $t=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(O.min(),C.empty(),-1)}static max(){return new t(O.max(),C.empty(),-1)}};function Qw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=C.comparator(t.documentKey,e.documentKey),n!==0?n:z(t.largestBatchId,e.largestBatchId))}var aA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Yd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function kr(t){return m(this,null,function*(){if(t.code!==g.FAILED_PRECONDITION||t.message!==aA)throw t;I("LocalStore","Unexpectedly lost primary lease")})}var p=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&x(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let c=u;n(e[c]).next(l=>{s[c]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var Zd=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Le,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new _i(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Yw(r.target.error);this.V.reject(new _i(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new _i(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(I("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new ov(n)}},Hn=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Ds())===12.2&&Me("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return I("SimpleDb","Removing database:",e),gi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Hu())return!1;if(t.C())return!0;let e=Ds(),n=t.S(e),r=0<n&&n<10,i=t.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return m(this,null,function*(){return this.db||(I("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new _i(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new _(g.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new _(g.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new _i(e,s))},i.onupgradeneeded=o=>{I("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{I("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db})}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return m(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=Zd.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),p.reject(c))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,c=u.name!=="FirebaseError"&&s<3;if(I("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}},iv=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return gi(this.k.delete())}},_i=class extends _{constructor(e,n){super(g.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Or(t){return t.name==="IndexedDbTransactionError"}var ov=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(I("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(I("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),gi(r)}add(e){return I("SimpleDb","ADD",this.store.name,e,e),gi(this.store.add(e))}get(e){return gi(this.store.get(e)).next(n=>(n===void 0&&(n=null),I("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return I("SimpleDb","DELETE",this.store.name,e),gi(this.store.delete(e))}count(){return I("SimpleDb","COUNT",this.store.name),gi(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new p((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.G(o,(a,u)=>{s.push(u)}).next(()=>s)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new p((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){I("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new p((r,i)=>{n.onerror=o=>{let s=Yw(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){let r=[];return new p((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new iv(a),c=n(a.primaryKey,a.value,u);if(c instanceof p){let l=c.catch(d=>(u.done(),p.reject(d)));r.push(l)}u.isDone?i():u.$===null?a.continue():a.continue(u.$)}}).next(()=>p.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function gi(t){return new p((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Yw(r.target.error);n(i)}})}var rS=!1;function Yw(t){let e=Hn.S(Ds());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new _("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return rS||(rS=!0,setTimeout(()=>{throw r},0)),r}}return t}var sv=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){I("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>m(this,null,function*(){this.task=null;try{I("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){Or(n)?I("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield kr(n)}yield this.ee(6e4)}))}},av=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return m(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,o=!0;return p.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return I("IndexBackfiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(I("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=sA(o);Qw(s,r)>0&&(r=s)}),new $t(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Nt=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Ou(t){return t==null}function pu(t){return t===0&&1/t==-1/0}function uA(t){return typeof t=="number"&&Number.isInteger(t)&&!pu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function ft(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=iS(e)),e=n4(t.get(n),e);return iS(e)}function n4(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function iS(t){return t+""}function Dn(t){let e=t.length;if(N(e>=2),e===2)return N(t.charAt(0)===""&&t.charAt(1)===""),re.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&x(),t.charAt(s+1)){case"":let a=t.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:x()}o=s+2}return new re(r)}var oS=["userId","batchId"];function Bd(t,e){return[t,ft(e)]}function cA(t,e,n){return[t,ft(e),n]}var r4={},i4=["prefixPath","collectionGroup","readTime","documentId"],o4=["prefixPath","collectionGroup","documentId"],s4=["collectionGroup","readTime","prefixPath","documentId"],a4=["canonicalId","targetId"],u4=["targetId","path"],c4=["path","targetId"],l4=["collectionId","parent"],d4=["indexId","uid"],h4=["uid","sequenceNumber"],f4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],p4=["indexId","uid","orderedDocumentKey"],g4=["userId","collectionPath","documentId"],m4=["userId","collectionPath","largestBatchId"],y4=["userId","collectionGroup","largestBatchId"],lA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],v4=[...lA,"documentOverlays"],dA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],hA=dA,w4=[...hA,"indexConfiguration","indexState","indexEntries"];var gu=class extends Yd{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function Ge(t,e){let n=b(t);return Hn.M(n.ae,e)}function sS(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ni(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ge=class t{constructor(e,n){this.comparator=e,this.root=n||Cn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Go(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Go(this.root,e,this.comparator,!1)}getReverseIterator(){return new Go(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Go(this.root,e,this.comparator,!0)}},Go=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Cn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw x();let e=this.left.check();if(e!==this.right.check())throw x();return e+(this.isRed()?0:1)}};Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1;Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw x()}get value(){throw x()}get color(){throw x()}get left(){throw x()}get right(){throw x()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Cn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var he=class t{constructor(e){this.comparator=e,this.data=new ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jd(this.data.getIterator())}getIteratorFrom(e){return new Jd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Jd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Lo(t){return t.hasNext()?t.getNext():void 0}var Pt=class t{constructor(e){this.fields=e,e.sort(Re.comparator)}static empty(){return new t([])}unionWith(e){let n=new he(Re.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Xd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function pA(){return typeof atob<"u"}var He=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Xd("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};He.EMPTY_BYTE_STRING=new He("");var _4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cr(t){if(N(!!t),typeof t=="string"){let e=0,n=_4.exec(t);if(N(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Te(t.seconds),nanos:Te(t.nanos)}}function Te(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function br(t){return typeof t=="string"?He.fromBase64String(t):He.fromUint8Array(t)}function qh(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Zw(t){let e=t.mapValue.fields.__previous_value__;return qh(e)?Zw(e):e}function mu(t){let e=Cr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ee(e.seconds,e.nanos)}var uv=class{constructor(e,n,r,i,o,s,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}},Sr=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Er={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$d={nullValue:"NULL_VALUE"};function Ii(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qh(t)?4:gA(t)?9007199254740991:10:x()}function An(t,e){if(t===e)return!0;let n=Ii(t);if(n!==Ii(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mu(t).isEqual(mu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Cr(i.timestampValue),a=Cr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return br(i.bytesValue).isEqual(br(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Te(i.geoPointValue.latitude)===Te(o.geoPointValue.latitude)&&Te(i.geoPointValue.longitude)===Te(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Te(i.integerValue)===Te(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Te(i.doubleValue),a=Te(o.doubleValue);return s===a?pu(s)===pu(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Yo(t.arrayValue.values||[],e.arrayValue.values||[],An);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(sS(s)!==sS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!An(s[u],a[u])))return!1;return!0}(t,e);default:return x()}}function yu(t,e){return(t.values||[]).find(n=>An(n,e))!==void 0}function Ar(t,e){if(t===e)return 0;let n=Ii(t),r=Ii(e);if(n!==r)return z(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return z(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Te(o.integerValue||o.doubleValue),u=Te(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return aS(t.timestampValue,e.timestampValue);case 4:return aS(mu(t),mu(e));case 5:return z(t.stringValue,e.stringValue);case 6:return function(o,s){let a=br(o),u=br(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let c=0;c<a.length&&c<u.length;c++){let l=z(a[c],u[c]);if(l!==0)return l}return z(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=z(Te(o.latitude),Te(s.latitude));return a!==0?a:z(Te(o.longitude),Te(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],u=s.values||[];for(let c=0;c<a.length&&c<u.length;++c){let l=Ar(a[c],u[c]);if(l)return l}return z(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Er.mapValue&&s===Er.mapValue)return 0;if(o===Er.mapValue)return 1;if(s===Er.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),c=s.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let d=0;d<u.length&&d<l.length;++d){let h=z(u[d],l[d]);if(h!==0)return h;let f=Ar(a[u[d]],c[l[d]]);if(f!==0)return f}return z(u.length,l.length)}(t.mapValue,e.mapValue);default:throw x()}}function aS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return z(t,e);let n=Cr(t),r=Cr(e),i=z(n.seconds,r.seconds);return i!==0?i:z(n.nanos,r.nanos)}function Jo(t){return cv(t)}function cv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Cr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return br(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return C.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=cv(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${cv(n.fields[s])}`;return i+"}"}(t.mapValue):x()}function Ei(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function lv(t){return!!t&&"integerValue"in t}function vu(t){return!!t&&"arrayValue"in t}function uS(t){return!!t&&"nullValue"in t}function cS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qd(t){return!!t&&"mapValue"in t}function uu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ni(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=uu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=uu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function I4(t){return"nullValue"in t?$d:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ei(Sr.empty(),C.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:x()}function E4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ei(Sr.empty(),C.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Er:x()}function lS(t,e){let n=Ar(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function dS(t,e){let n=Ar(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var at=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!qd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=uu(n)}setAll(e){let n=Re.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=uu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());qd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return An(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];qd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ni(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(uu(this.value))}};function mA(t){let e=[];return Ni(t.fields,(n,r)=>{let i=new Re([n]);if(qd(r)){let o=mA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Pt(e)}var Ve=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,O.min(),O.min(),O.min(),at.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,O.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,O.min(),O.min(),at.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,O.min(),O.min(),at.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(O.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=at.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=at.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=O.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var xn=class{constructor(e,n){this.position=e,this.inclusive=n}};function hS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=C.comparator(C.fromName(s.referenceValue),n.key):r=Ar(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function fS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!An(t.position[n],e.position[n]))return!1;return!0}var Di=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function D4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var eh=class{},ee=class t extends eh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fv(e,n,r):n==="array-contains"?new mv(e,r):n==="in"?new th(e,r):n==="not-in"?new yv(e,r):n==="array-contains-any"?new vv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pv(e,r):new gv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ar(n,this.value)):n!==null&&Ii(this.value)===Ii(n)&&this.matchesComparison(Ar(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return x()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ce=class t extends eh{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return Xo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Xo(t){return t.op==="and"}function dv(t){return t.op==="or"}function Jw(t){return yA(t)&&Xo(t)}function yA(t){for(let e of t.filters)if(e instanceof ce)return!1;return!0}function hv(t){if(t instanceof ee)return t.field.canonicalString()+t.op.toString()+Jo(t.value);if(Jw(t))return t.filters.map(e=>hv(e)).join(",");{let e=t.filters.map(n=>hv(n)).join(",");return`${t.op}(${e})`}}function vA(t,e){return t instanceof ee?function(r,i){return i instanceof ee&&r.op===i.op&&r.field.isEqual(i.field)&&An(r.value,i.value)}(t,e):t instanceof ce?function(r,i){return i instanceof ce&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&vA(s,i.filters[a]),!0):!1}(t,e):void x()}function wA(t,e){let n=t.filters.concat(e);return ce.create(n,t.op)}function _A(t){return t instanceof ee?function(n){return`${n.field.canonicalString()} ${n.op} ${Jo(n.value)}`}(t):t instanceof ce?function(n){return n.op.toString()+" {"+n.getFilters().map(_A).join(" ,")+"}"}(t):"Filter"}var fv=class extends ee{constructor(e,n,r){super(e,n,r),this.key=C.fromName(r.referenceValue)}matches(e){let n=C.comparator(e.key,this.key);return this.matchesComparison(n)}},pv=class extends ee{constructor(e,n){super(e,"in",n),this.keys=IA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},gv=class extends ee{constructor(e,n){super(e,"not-in",n),this.keys=IA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function IA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>C.fromName(r.referenceValue))}var mv=class extends ee{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return vu(n)&&yu(n.arrayValue,this.value)}},th=class extends ee{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&yu(this.value.arrayValue,n)}},yv=class extends ee{constructor(e,n){super(e,"not-in",n)}matches(e){if(yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!yu(this.value.arrayValue,n)}},vv=class extends ee{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!vu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yu(this.value.arrayValue,r))}};var wv=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function _v(t,e=null,n=[],r=[],i=null,o=null,s=null){return new wv(t,e,n,r,i,o,s)}function Ti(t){let e=b(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Ou(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Jo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Jo(r)).join(",")),e.ce=n}return e.ce}function Fu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!D4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fS(t.startAt,e.startAt)&&fS(t.endAt,e.endAt)}function nh(t){return C.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function rh(t,e){return t.filters.filter(n=>n instanceof ee&&n.field.isEqual(e))}function pS(t,e,n){let r=$d,i=!0;for(let o of rh(t,e)){let s=$d,a=!0;switch(o.op){case"<":case"<=":s=I4(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=$d}lS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];lS({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function gS(t,e,n){let r=Er,i=!0;for(let o of rh(t,e)){let s=Er,a=!0;switch(o.op){case">=":case">":s=E4(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Er}dS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];dS({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var nn=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function EA(t,e,n,r,i,o,s,a){return new nn(t,e,n,r,i,o,s,a)}function ps(t){return new nn(t)}function mS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Xw(t){return t.collectionGroup!==null}function Ko(t){let e=b(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new he(Re.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new Di(o,r))}),n.has(Re.keyField().canonicalString())||e.le.push(new Di(Re.keyField(),r))}return e.le}function pt(t){let e=b(t);return e.he||(e.he=T4(e,Ko(t))),e.he}function T4(t,e){if(t.limitType==="F")return _v(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Di(i.field,o)});let n=t.endAt?new xn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new xn(t.startAt.position,t.startAt.inclusive):null;return _v(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Iv(t,e){let n=t.filters.concat([e]);return new nn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ih(t,e,n){return new nn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lu(t,e){return Fu(pt(t),pt(e))&&t.limitType===e.limitType}function DA(t){return`${Ti(pt(t))}|lt:${t.limitType}`}function $o(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>_A(i)).join(", ")}]`),Ou(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Jo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Jo(i)).join(",")),`Target(${r})`}(pt(t))}; limitType=${t.limitType})`}function Vu(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):C.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Ko(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let c=hS(s,a,u);return s.inclusive?c<=0:c<0}(r.startAt,Ko(r),i)||r.endAt&&!function(s,a,u){let c=hS(s,a,u);return s.inclusive?c>=0:c>0}(r.endAt,Ko(r),i))}(t,e)}function TA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CA(t){return(e,n)=>{let r=!1;for(let i of Ko(t)){let o=C4(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function C4(t,e,n){let r=t.field.isKeyField()?C.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),c=a.data.field(o);return u!==null&&c!==null?Ar(u,c):x()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return x()}}var Mn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ni(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return fA(this.inner)}size(){return this.innerSize}};var b4=new ge(C.comparator);function Et(){return b4}var bA=new ge(C.comparator);function su(...t){let e=bA;for(let n of t)e=e.insert(n.key,n);return e}function SA(t){let e=bA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Tn(){return cu()}function AA(){return cu()}function cu(){return new Mn(t=>t.toString(),(t,e)=>t.isEqual(e))}var S4=new ge(C.comparator),A4=new he(C.comparator);function H(...t){let e=A4;for(let n of t)e=e.add(n);return e}var x4=new he(z);function e_(){return x4}function xA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pu(e)?"-0":e}}function MA(t){return{integerValue:""+t}}function RA(t,e){return uA(e)?MA(e):xA(t,e)}var es=class{constructor(){this._=void 0}};function M4(t,e,n){return t instanceof xr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&qh(o)&&(o=Zw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Gn?PA(t,e):t instanceof Wn?kA(t,e):function(i,o){let s=NA(i,o),a=yS(s)+yS(i.Ie);return lv(s)&&lv(i.Ie)?MA(a):xA(i.serializer,a)}(t,e)}function R4(t,e,n){return t instanceof Gn?PA(t,e):t instanceof Wn?kA(t,e):n}function NA(t,e){return t instanceof Mr?function(r){return lv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var xr=class extends es{},Gn=class extends es{constructor(e){super(),this.elements=e}};function PA(t,e){let n=OA(e);for(let r of t.elements)n.some(i=>An(i,r))||n.push(r);return{arrayValue:{values:n}}}var Wn=class extends es{constructor(e){super(),this.elements=e}};function kA(t,e){let n=OA(e);for(let r of t.elements)n=n.filter(i=>!An(i,r));return{arrayValue:{values:n}}}var Mr=class extends es{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function yS(t){return Te(t.integerValue||t.doubleValue)}function OA(t){return vu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ci=class{constructor(e,n){this.field=e,this.transform=n}};function N4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Gn&&i instanceof Gn||r instanceof Wn&&i instanceof Wn?Yo(r.elements,i.elements,An):r instanceof Mr&&i instanceof Mr?An(r.Ie,i.Ie):r instanceof xr&&i instanceof xr}(t.transform,e.transform)}var Ev=class{constructor(e,n){this.version=e,this.transformResults=n}},Ce=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function zd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ts=class{};function FA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nr(t.key,Ce.none()):new Rr(t.key,t.data,Ce.none());{let n=t.data,r=at.empty(),i=new he(Re.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new rn(t.key,r,new Pt(i.toArray()),Ce.none())}}function P4(t,e,n){t instanceof Rr?function(i,o,s){let a=i.value.clone(),u=wS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof rn?function(i,o,s){if(!zd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=wS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(LA(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function lu(t,e,n,r){return t instanceof Rr?function(o,s,a,u){if(!zd(o.precondition,s))return a;let c=o.value.clone(),l=_S(o.fieldTransforms,u,s);return c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof rn?function(o,s,a,u){if(!zd(o.precondition,s))return a;let c=_S(o.fieldTransforms,u,s),l=s.data;return l.setAll(LA(o)),l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return zd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function k4(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=NA(r.transform,i||null);o!=null&&(n===null&&(n=at.empty()),n.set(r.field,o))}return n||null}function vS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Yo(r,i,(o,s)=>N4(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Rr=class extends ts{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},rn=class extends ts{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function LA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function wS(t,e,n){let r=new Map;N(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,R4(s,a,n[i]))}return r}function _S(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,M4(o,s,e))}return r}var Nr=class extends ts{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},wu=class extends ts{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var _u=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&P4(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=lu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=lu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=AA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=FA(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(O.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),H())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,(n,r)=>vS(n,r))&&Yo(this.baseMutations,e.baseMutations,(n,r)=>vS(n,r))}},Dv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){N(e.mutations.length===r.length);let i=function(){return S4}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Iu=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Tv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ke,ne;function VA(t){switch(t){default:return x();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function jA(t){if(t===void 0)return Me("GRPC error has no .code"),g.UNKNOWN;switch(t){case ke.OK:return g.OK;case ke.CANCELLED:return g.CANCELLED;case ke.UNKNOWN:return g.UNKNOWN;case ke.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case ke.INTERNAL:return g.INTERNAL;case ke.UNAVAILABLE:return g.UNAVAILABLE;case ke.UNAUTHENTICATED:return g.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case ke.NOT_FOUND:return g.NOT_FOUND;case ke.ALREADY_EXISTS:return g.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return g.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case ke.ABORTED:return g.ABORTED;case ke.OUT_OF_RANGE:return g.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return g.UNIMPLEMENTED;case ke.DATA_LOSS:return g.DATA_LOSS;default:return x()}}(ne=ke||(ke={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";var IS=null;function UA(){return new TextEncoder}var O4=new hi([4294967295,4294967295],0);function ES(t){let e=UA().encode(t),n=new tS;return n.update(e),new Uint8Array(n.digest())}function DS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new hi([n,r],0),new hi([i,o],0)]}var Cv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wi(`Invalid padding: ${n}`);if(r<0)throw new wi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new wi(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=hi.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(hi.fromNumber(r)));return i.compare(O4)===1&&(i=new hi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=ES(e),[r,i]=DS(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=ES(e),[r,i]=DS(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},wi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Eu=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Du.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(O.min(),i,new ge(z),Et(),H())}},Du=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,H(),H(),H())}};var Qo=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},oh=class{constructor(e,n){this.targetId=e,this.fe=n}},sh=class{constructor(e,n,r=He.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},ah=class{constructor(){this.ge=0,this.pe=CS(),this.ye=He.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=H(),n=H(),r=H();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:x()}}),new Du(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=CS()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,N(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},bv=class{constructor(e){this.Be=e,this.ke=new Map,this.qe=Et(),this.Qe=TS(),this.Ke=new ge(z)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:x()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let o=i.target;if(nh(o))if(r===0){let s=new C(o.path);this.We(n,s,Ve.newNoDocument(s,O.min()))}else N(r===1);else{let s=this.Ze(n);if(s!==r){let a=this.Xe(e),u=a?this.et(a,e,s):1;if(u!==0){this.He(n);let c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}IS?.tt(function(l,d,h,f,v){var y,w,T,L,A,$;let q={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},G=d.unchangedNames;return G&&(q.bloomFilter={applied:v===0,hashCount:(y=G?.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(L=(T=(w=G?.bits)===null||w===void 0?void 0:w.bitmap)===null||T===void 0?void 0:T.length)!==null&&L!==void 0?L:0,padding:($=(A=G?.bits)===null||A===void 0?void 0:A.padding)!==null&&$!==void 0?$:0,mightContain:le=>{var mt;return(mt=f?.mightContain(le))!==null&&mt!==void 0&&mt}}),q}(s,e.fe,this.Be.nt(),a,u))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=br(r).toUint8Array()}catch(u){if(u instanceof Xd)return Bt("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Cv(s,i,o)}catch(u){return Bt(u instanceof wi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Be.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&nh(a.target)){let u=new C(a.target.path);this.qe.get(u)!==null||this.st(s,u)||this.We(s,u,Ve.newNoDocument(u,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=H();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let c=this.Ye(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let i=new Eu(e,n,this.Ke,this.qe,r);return this.qe=Et(),this.Qe=TS(),this.Ke=new ge(z),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new ah,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new he(z),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||I("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new ah),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}};function TS(){return new ge(C.comparator)}function CS(){return new ge(C.comparator)}var F4={asc:"ASCENDING",desc:"DESCENDING"},L4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},V4={and:"AND",or:"OR"},Sv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Av(t,e){return t.useProto3Json||Ou(e)?e:{value:e}}function ns(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function j4(t,e){return ns(t,e.toTimestamp())}function Ne(t){return N(!!t),O.fromTimestamp(function(n){let r=Cr(n);return new Ee(r.seconds,r.nanos)}(t))}function t_(t,e){return xv(t,e).canonicalString()}function xv(t,e){let n=function(i){return new re(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $A(t){let e=re.fromString(t);return N(JA(e)),e}function Tu(t,e){return t_(t.databaseId,e.path)}function bn(t,e){let n=$A(e);if(n.get(1)!==t.databaseId.projectId)throw new _(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new C(HA(n))}function qA(t,e){return t_(t.databaseId,e)}function zA(t){let e=$A(t);return e.length===4?re.emptyPath():HA(e)}function Mv(t){return new re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HA(t){return N(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function bS(t,e,n){return{name:Tu(t,e),fields:n.value.mapValue.fields}}function GA(t,e,n){let r=bn(t,e.name),i=Ne(e.updateTime),o=e.createTime?Ne(e.createTime):O.min(),s=new at({mapValue:{fields:e.fields}}),a=Ve.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function U4(t,e){return"found"in e?function(r,i){N(!!i.found),i.found.name,i.found.updateTime;let o=bn(r,i.found.name),s=Ne(i.found.updateTime),a=i.found.createTime?Ne(i.found.createTime):O.min(),u=new at({mapValue:{fields:i.found.fields}});return Ve.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){N(!!i.missing),N(!!i.readTime);let o=bn(r,i.missing),s=Ne(i.readTime);return Ve.newNoDocument(o,s)}(t,e):x()}function B4(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:x()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,l){return c.useProto3Json?(N(l===void 0||typeof l=="string"),He.fromBase64String(l||"")):(N(l===void 0||l instanceof Uint8Array),He.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){let l=c.code===void 0?g.UNKNOWN:jA(c.code);return new _(l,c.message||"")}(s);n=new sh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=bn(t,r.document.name),o=Ne(r.document.updateTime),s=r.document.createTime?Ne(r.document.createTime):O.min(),a=new at({mapValue:{fields:r.document.fields}}),u=Ve.newFoundDocument(i,o,s,a),c=r.targetIds||[],l=r.removedTargetIds||[];n=new Qo(c,l,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=bn(t,r.document),o=r.readTime?Ne(r.readTime):O.min(),s=Ve.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Qo([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=bn(t,r.document),o=r.removedTargetIds||[];n=new Qo([],o,i,null)}else{if(!("filter"in e))return x();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Tv(i,o),a=r.targetId;n=new oh(a,s)}}return n}function Cu(t,e){let n;if(e instanceof Rr)n={update:bS(t,e.key,e.value)};else if(e instanceof Nr)n={delete:Tu(t,e.key)};else if(e instanceof rn)n={update:bS(t,e.key,e.data),updateMask:W4(e.fieldMask)};else{if(!(e instanceof wu))return x();n={verify:Tu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof xr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Wn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Mr)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw x()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:j4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:x()}(t,e.precondition)),n}function Rv(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Ce.updateTime(Ne(o.updateTime)):o.exists!==void 0?Ce.exists(o.exists):Ce.none()}(e.currentDocument):Ce.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)N(a.setToServerValue==="REQUEST_TIME"),u=new xr;else if("appendMissingElements"in a){let l=a.appendMissingElements.values||[];u=new Gn(l)}else if("removeAllFromArray"in a){let l=a.removeAllFromArray.values||[];u=new Wn(l)}else"increment"in a?u=new Mr(s,a.increment):x();let c=Re.fromServerFormat(a.fieldPath);return new Ci(c,u)}(t,i)):[];if(e.update){e.update.name;let i=bn(t,e.update.name),o=new at({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let c=u.fieldPaths||[];return new Pt(c.map(l=>Re.fromServerFormat(l)))}(e.updateMask);return new rn(i,o,s,n,r)}return new Rr(i,o,n,r)}if(e.delete){let i=bn(t,e.delete);return new Nr(i,n)}if(e.verify){let i=bn(t,e.verify);return new wu(i,n)}return x()}function $4(t,e){return t&&t.length>0?(N(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Ne(i.updateTime):Ne(o);return s.isEqual(O.min())&&(s=Ne(o)),new Ev(s,i.transformResults||[])}(n,e))):[]}function WA(t,e){return{documents:[qA(t,e.path)]}}function KA(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qA(t,i);let o=function(c){if(c.length!==0)return ZA(ce.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(c){if(c.length!==0)return c.map(l=>function(h){return{field:qo(h.field),direction:z4(h.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=Av(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i}}function QA(t){let e=zA(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){N(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];n.where&&(o=function(d){let h=YA(d);return h instanceof ce&&Jw(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(v){return new Di(zo(v.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Ou(h)?null:h}(n.limit));let u=null;n.startAt&&(u=function(d){let h=!!d.before,f=d.values||[];return new xn(f,h)}(n.startAt));let c=null;return n.endAt&&(c=function(d){let h=!d.before,f=d.values||[];return new xn(f,h)}(n.endAt)),EA(e,i,s,o,a,"F",u,c)}function q4(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return x()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function YA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=zo(n.unaryFilter.field);return ee.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=zo(n.unaryFilter.field);return ee.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=zo(n.unaryFilter.field);return ee.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=zo(n.unaryFilter.field);return ee.create(s,"!=",{nullValue:"NULL_VALUE"});default:return x()}}(t):t.fieldFilter!==void 0?function(n){return ee.create(zo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return x()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ce.create(n.compositeFilter.filters.map(r=>YA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return x()}}(n.compositeFilter.op))}(t):x()}function z4(t){return F4[t]}function H4(t){return L4[t]}function G4(t){return V4[t]}function qo(t){return{fieldPath:t.canonicalString()}}function zo(t){return Re.fromServerFormat(t.fieldPath)}function ZA(t){return t instanceof ee?function(n){if(n.op==="=="){if(cS(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NAN"}};if(uS(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cS(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NAN"}};if(uS(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qo(n.field),op:H4(n.op),value:n.value}}}(t):t instanceof ce?function(n){let r=n.getFilters().map(i=>ZA(i));return r.length===1?r[0]:{compositeFilter:{op:G4(n.op),filters:r}}}(t):x()}function W4(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var rs=class t{constructor(e,n,r,i,o=O.min(),s=O.min(),a=He.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var uh=class{constructor(e){this.ct=e}};function K4(t,e){let n;if(e.document)n=GA(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=C.fromSegments(e.noDocument.path),i=Si(e.noDocument.readTime);n=Ve.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return x();{let r=C.fromSegments(e.unknownDocument.path),i=Si(e.unknownDocument.version);n=Ve.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new Ee(i[0],i[1]);return O.fromTimestamp(o)}(e.readTime)),n}function SS(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ch(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Tu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ns(o,s.version.toTimestamp()),createTime:ns(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:bi(e.version)};else{if(!e.isUnknownDocument())return x();r.unknownDocument={path:n.path.toArray(),version:bi(e.version)}}return r}function ch(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function bi(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Si(t){let e=new Ee(t.seconds,t.nanoseconds);return O.fromTimestamp(e)}function mi(t,e){let n=(e.baseMutations||[]).map(o=>Rv(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Rv(t.ct,o)),i=Ee.fromMillis(e.localWriteTimeMs);return new _u(e.batchId,i,n,r)}function au(t){let e=Si(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Si(t.lastLimboFreeSnapshotVersion):O.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return N(o.documents.length===1),pt(ps(zA(o.documents[0])))}(t.query):function(o){return pt(QA(o))}(t.query),new rs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,He.fromBase64String(t.resumeToken))}function XA(t,e){let n=bi(e.snapshotVersion),r=bi(e.lastLimboFreeSnapshotVersion),i;i=nh(e.target)?WA(t.ct,e.target):KA(t.ct,e.target).ut;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ti(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function n_(t){let e=QA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ih(e,e.limit,"L"):e}function Gy(t,e){return new Iu(e.largestBatchId,Rv(t.ct,e.overlayMutation))}function AS(t,e){let n=e.path.lastSegment();return[t,ft(e.path.popLast()),n]}function xS(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:bi(r.readTime),documentKey:ft(r.documentKey.path),largestBatchId:r.largestBatchId}}var Nv=class{getBundleMetadata(e,n){return MS(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Si(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return MS(e).put(function(i){return{bundleId:i.id,createTime:bi(Ne(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return RS(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:n_(o.bundledQuery),readTime:Si(o.readTime)}}(r)})}saveNamedQuery(e,n){return RS(e).put(function(i){return{name:i.name,readTime:bi(Ne(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function MS(t){return Ge(t,"bundles")}function RS(t){return Ge(t,"namedQueries")}var lh=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return nu(e).get(AS(this.userId,n)).next(r=>r?Gy(this.serializer,r):null)}getOverlays(e,n){let r=Tn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new Iu(n,s);i.push(this.ht(e,a))}),p.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(ft(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(nu(e).H("collectionPathOverlayIndex",a))}),p.waitFor(o)}getOverlaysForCollection(e,n,r){let i=Tn(),o=ft(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return nu(e).W("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let c=Gy(this.serializer,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=Tn(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return nu(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,c,l)=>{let d=Gy(this.serializer,c);o.size()<i||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):l.done()}).next(()=>o)}ht(e,n){return nu(e).put(function(i,o,s){let[a,u,c]=AS(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Cu(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function nu(t){return Ge(t,"documentOverlays")}var qn=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Te(e.integerValue));else if("doubleValue"in e){let r=Te(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),pu(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(br(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?gA(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):x()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),C.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};qn.bt=new qn;function Q4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function NS(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=Q4(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var Pv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){let n=this.Bt(e),r=NS(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Bt(e),r=NS(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},kv=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},Ov=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},yi=class{constructor(){this.Gt=new Pv,this.zt=new kv(this.Gt),this.jt=new Ov(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var vi=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function vr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=PS(t.arrayValue,e.arrayValue),n!==0?n:(n=PS(t.directionalValue,e.directionalValue),n!==0?n:C.comparator(t.documentKey,e.documentKey)))}function PS(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var dh=class{constructor(e){this.Yt=new he((n,r)=>Re.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(N(e.collectionGroup===this.collectionId),this.en)return!1;let n=rv(e);if(n!==void 0&&!this.nn(n))return!1;let r=pi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.rn(a,u)||!this.sn(this.Zt[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new he(Re.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Wo(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Wo(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Wo(r.field,r.dir==="asc"?0:1)));return new Zo(Zo.UNKNOWN_ID,this.collectionId,n,fu.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function e1(t){var e,n;if(N(t instanceof ee||t instanceof ce),t instanceof ee){if(t instanceof th){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>ee.create(t.field,"==",o)))||[];return ce.create(i,"or")}return t}let r=t.filters.map(i=>e1(i));return ce.create(r,t.op)}function Y4(t){if(t.getFilters().length===0)return[];let e=Vv(e1(t));return N(t1(e)),Fv(e)||Lv(e)?[e]:e.getFilters()}function Fv(t){return t instanceof ee}function Lv(t){return t instanceof ce&&Jw(t)}function t1(t){return Fv(t)||Lv(t)||function(n){if(n instanceof ce&&dv(n)){for(let r of n.getFilters())if(!Fv(r)&&!Lv(r))return!1;return!0}return!1}(t)}function Vv(t){if(N(t instanceof ee||t instanceof ce),t instanceof ee)return t;if(t.filters.length===1)return Vv(t.filters[0]);let e=t.filters.map(r=>Vv(r)),n=ce.create(e,t.op);return n=hh(n),t1(n)?n:(N(n instanceof ce),N(Xo(n)),N(n.filters.length>1),n.filters.reduce((r,i)=>r_(r,i)))}function r_(t,e){let n;return N(t instanceof ee||t instanceof ce),N(e instanceof ee||e instanceof ce),n=t instanceof ee?e instanceof ee?function(i,o){return ce.create([i,o],"and")}(t,e):kS(t,e):e instanceof ee?kS(e,t):function(i,o){if(N(i.filters.length>0&&o.filters.length>0),Xo(i)&&Xo(o))return wA(i,o.getFilters());let s=dv(i)?i:o,a=dv(i)?o:i,u=s.filters.map(c=>r_(c,a));return ce.create(u,"or")}(t,e),hh(n)}function kS(t,e){if(Xo(e))return wA(e,t.getFilters());{let n=e.filters.map(r=>r_(t,r));return ce.create(n,"or")}}function hh(t){if(N(t instanceof ee||t instanceof ce),t instanceof ee)return t;let e=t.getFilters();if(e.length===1)return hh(e[0]);if(yA(t))return t;let n=e.map(i=>hh(i)),r=[];return n.forEach(i=>{i instanceof ee?r.push(i):i instanceof ce&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ce.create(r,t.op)}var jv=class{constructor(){this._n=new bu}addToCollectionParentIndex(e,n){return this._n.add(n),p.resolve()}getCollectionParents(e,n){return p.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return p.resolve()}deleteFieldIndex(e,n){return p.resolve()}deleteAllFieldIndexes(e){return p.resolve()}createTargetIndexes(e,n){return p.resolve()}getDocumentsMatchingTarget(e,n){return p.resolve(null)}getIndexType(e,n){return p.resolve(0)}getFieldIndexes(e,n){return p.resolve([])}getNextCollectionGroupToUpdate(e){return p.resolve(null)}getMinOffset(e,n){return p.resolve($t.min())}getMinOffsetFromCollectionGroup(e,n){return p.resolve($t.min())}updateCollectionGroup(e,n,r){return p.resolve()}updateIndexEntries(e,n){return p.resolve()}},bu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new he(re.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new he(re.comparator)).toArray()}};var Ld=new Uint8Array(0),Uv=class{constructor(e,n){this.databaseId=n,this.an=new bu,this.un=new Mn(r=>Ti(r),(r,i)=>Fu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:r,parent:ft(i)};return OS(e).put(o)}return p.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[iA(n),""],!1,!0);return OS(e).W(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(Dn(s.parent))}return r})}addFieldIndex(e,n){let r=ru(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=jo(e);return o.next(a=>{s.put(xS(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=ru(e),i=jo(e),o=Vo(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=ru(e),r=Vo(e),i=jo(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return p.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new dh(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=Vo(e),i=!0,o=new Map;return p.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=H(),a=[];return p.forEach(o,(u,c)=>{I("IndexedDbIndexManager",`Using index ${function(A){return`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map($=>`${$.fieldPath}:${$.kind}`).join(",")}`}(u)} to execute ${Ti(n)}`);let l=function(A,$){let q=rv($);if(q===void 0)return null;for(let G of rh(A,q.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null}(c,u),d=function(A,$){let q=new Map;for(let G of pi($))for(let le of rh(A,G.fieldPath))switch(le.op){case"==":case"in":q.set(G.fieldPath.canonicalString(),le.value);break;case"not-in":case"!=":return q.set(G.fieldPath.canonicalString(),le.value),Array.from(q.values())}return null}(c,u),h=function(A,$){let q=[],G=!0;for(let le of pi($)){let mt=le.kind===0?pS(A,le.fieldPath,A.startAt):gS(A,le.fieldPath,A.startAt);q.push(mt.value),G&&(G=mt.inclusive)}return new xn(q,G)}(c,u),f=function(A,$){let q=[],G=!0;for(let le of pi($)){let mt=le.kind===0?gS(A,le.fieldPath,A.endAt):pS(A,le.fieldPath,A.endAt);q.push(mt.value),G&&(G=mt.inclusive)}return new xn(q,G)}(c,u),v=this.hn(u,c,h),y=this.hn(u,c,f),w=this.Pn(u,c,d),T=this.In(u.indexId,l,v,h.inclusive,y,f.inclusive,w);return p.forEach(T,L=>r.j(L,n.limit).next(A=>{A.forEach($=>{let q=C.fromSegments($.documentKey);s.has(q)||(s=s.add(q),a.push(q))})}))}).next(()=>a)}return p.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=Y4(ce.create(e.filters,"and")).map(r=>_v(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){let u=(n!=null?n.length:1)*Math.max(r.length,o.length),c=u/(n!=null?n.length:1),l=[];for(let d=0;d<u;++d){let h=n?this.Tn(n[d/c]):Ld,f=this.En(e,h,r[d%c],i),v=this.dn(e,h,o[d%c],s),y=a.map(w=>this.En(e,h,w,!0));l.push(...this.createRange(f,v,y))}return l}En(e,n,r,i){let o=new vi(e,C.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){let o=new vi(e,C.empty(),n,r);return i?o.Jt():o}ln(e,n){let r=new dh(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.cn(n);return p.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let c=new he(Re.comparator),l=!1;for(let d of u.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?l=!0:c=c.add(h.field));for(let d of u.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(l?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new yi;for(let i of pi(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);qn.bt.Pt(o,s)}return r.Wt()}Tn(e){let n=new yi;return qn.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new yi;return qn.bt.Pt(Ei(this.databaseId,n),r.Ht(function(o){let s=pi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new yi);let o=0;for(let s of pi(e)){let a=r[o++];for(let u of i)if(this.Vn(n,s.fieldPath)&&vu(a))i=this.mn(i,s,a);else{let c=u.Ht(s.kind);qn.bt.Pt(a,c)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new yi;u.seed(a.Wt()),qn.bt.Pt(s,u.Ht(n.kind)),o.push(u)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof ee&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=ru(e),i=jo(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{let s=[];return p.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(l,d){let h=d?new fu(d.sequenceNumber,new $t(Si(d.readTime),new C(Dn(d.documentKey)),d.largestBatchId)):fu.empty(),f=l.fields.map(([v,y])=>new Wo(Re.fromServerFormat(v),y));return new Zo(l.indexId,l.collectionGroup,f,h)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:z(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=ru(e),o=jo(e);return this.gn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>p.forEach(a,u=>o.put(xS(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return p.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?p.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),p.forEach(a,u=>this.pn(e,i,u).next(c=>{let l=this.yn(o,u);return c.isEqual(l)?p.resolve():this.wn(e,o,u,c,l)}))))})}Sn(e,n,r,i){return Vo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Vo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=Vo(e),o=new he(vr);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new vi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new he(vr),i=this.An(n,e);if(i==null)return r;let o=rv(n);if(o!=null){let s=e.data.field(o.fieldPath);if(vu(s))for(let a of s.arrayValue.values||[])r=r.add(new vi(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new vi(n.indexId,e.key,Ld,i));return r}wn(e,n,r,i,o){I("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(u,c,l,d,h){let f=u.getIterator(),v=c.getIterator(),y=Lo(f),w=Lo(v);for(;y||w;){let T=!1,L=!1;if(y&&w){let A=l(y,w);A<0?L=!0:A>0&&(T=!0)}else y!=null?L=!0:T=!0;T?(d(w),w=Lo(v)):L?(h(y),y=Lo(f)):(y=Lo(f),w=Lo(v))}}(i,o,vr,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),p.waitFor(s)}gn(e){let n=1;return jo(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>vr(s,a)).filter((s,a,u)=>!a||vr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=vr(s,e),u=vr(s,n);if(a===0)i[0]=e.Jt();else if(a>0&&u<0)i.push(s),i.push(s.Jt());else if(u>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Ld,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Ld,[]];o.push(IDBKeyRange.bound(a,u))}return o}Dn(e,n){return vr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(FS)}getMinOffset(e,n){return p.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||x())).next(FS)}};function OS(t){return Ge(t,"collectionParents")}function Vo(t){return Ge(t,"indexEntries")}function ru(t){return Ge(t,"indexConfiguration")}function jo(t){return Ge(t,"indexState")}function FS(t){N(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;Qw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new $t(e.readTime,e.documentKey,n)}var LS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ut=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function n1(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Y({range:s},(l,d,h)=>(a++,h.delete()));o.push(u.next(()=>{N(a===1)}));let c=[];for(let l of n.mutations){let d=cA(e,l.key.path,n.batchId);o.push(i.delete(d)),c.push(l.key)}return p.waitFor(o).next(()=>c)}function fh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw x();e=t.noDocument}return JSON.stringify(e).length}Ut.DEFAULT_COLLECTION_PERCENTILE=10,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ut.DEFAULT=new Ut(41943040,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ut.DISABLED=new Ut(-1,0,0);var ph=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){N(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wr(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=Ho(e),s=wr(e);return s.add({}).next(a=>{N(typeof a=="number");let u=new _u(a,n,r,i),c=function(f,v,y){let w=y.baseMutations.map(L=>Cu(f.ct,L)),T=y.mutations.map(L=>Cu(f.ct,L));return{userId:v,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:w,mutations:T}}(this.serializer,this.userId,u),l=[],d=new he((h,f)=>z(h.canonicalString(),f.canonicalString()));for(let h of i){let f=cA(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),l.push(s.put(c)),l.push(o.put(f,r4))}return d.forEach(h=>{l.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),p.waitFor(l).next(()=>u)})}lookupMutationBatch(e,n){return wr(e).get(n).next(r=>r?(N(r.userId===this.userId),mi(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?p.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return wr(e).Y({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(N(a.batchId>=r),o=mi(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return wr(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wr(e).W("userMutationsIndex",n).next(r=>r.map(i=>mi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Bd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Ho(e).Y({range:i},(s,a,u)=>{let[c,l,d]=s,h=Dn(l);if(c===this.userId&&n.path.isEqual(h))return wr(e).get(d).next(f=>{if(!f)throw x();N(f.userId===this.userId),o.push(mi(this.serializer,f))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new he(z),i=[];return n.forEach(o=>{let s=Bd(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Ho(e).Y({range:a},(c,l,d)=>{let[h,f,v]=c,y=Dn(f);h===this.userId&&o.path.isEqual(y)?r=r.add(v):d.done()});i.push(u)}),p.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=Bd(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new he(z);return Ho(e).Y({range:s},(u,c,l)=>{let[d,h,f]=u,v=Dn(h);d===this.userId&&r.isPrefixOf(v)?v.length===i&&(a=a.add(f)):l.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(wr(e).get(o).next(s=>{if(s===null)throw x();N(s.userId===this.userId),r.push(mi(this.serializer,s))}))}),p.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return n1(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),p.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return p.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Ho(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Dn(o[1]);i.push(u)}else a.done()}).next(()=>{N(i.length===0)})})}containsKey(e,n){return r1(e,this.userId,n)}xn(e){return i1(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function r1(t,e,n){let r=Bd(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ho(t).Y({range:o,J:!0},(a,u,c)=>{let[l,d,h]=a;l===e&&d===i&&(s=!0),c.done()}).next(()=>s)}function wr(t){return Ge(t,"mutations")}function Ho(t){return Ge(t,"documentMutations")}function i1(t){return Ge(t,"mutationQueues")}var is=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Bv=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new is(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>O.fromTimestamp(new Ee(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Uo(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(N(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return Uo(e).Y((s,a)=>{let u=au(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>p.waitFor(o)).next(()=>i)}forEachTarget(e,n){return Uo(e).Y((r,i)=>{let o=au(i);n(o)})}Bn(e){return VS(e).get("targetGlobalKey").next(n=>(N(n!==null),n))}kn(e,n){return VS(e).put("targetGlobalKey",n)}qn(e,n){return Uo(e).put(XA(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Ti(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Uo(e).Y({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let c=au(a);Fu(n,c.target)&&(o=c,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=_r(e);return n.forEach(s=>{let a=ft(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),p.waitFor(i)}removeMatchingKeys(e,n,r){let i=_r(e);return p.forEach(n,o=>{let s=ft(o.path);return p.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=_r(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=_r(e),o=H();return i.Y({range:r,J:!0},(s,a,u)=>{let c=Dn(s[1]),l=new C(c);o=o.add(l)}).next(()=>o)}containsKey(e,n){let r=ft(n.path),i=IDBKeyRange.bound([r],[iA(r)],!1,!0),o=0;return _r(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],u,c)=>{s!==0&&(o++,c.done())}).next(()=>o>0)}_t(e,n){return Uo(e).get(n).next(r=>r?au(r):null)}};function Uo(t){return Ge(t,"targets")}function VS(t){return Ge(t,"targetGlobal")}function _r(t){return Ge(t,"targetDocuments")}function jS([t,e],[n,r]){let i=z(t,n);return i===0?z(e,r):i}var $v=class{constructor(e){this.Kn=e,this.buffer=new he(jS),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();jS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},qv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){I("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>m(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Or(n)?I("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield kr(n)}yield this.zn(3e5)}))}},zv=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return p.resolve(Nt._e);let r=new $v(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(I("LruGarbageCollector","Garbage collection skipped; disabled"),p.resolve(LS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(I("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),LS):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,u,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(I("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(o=d,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),Bo()<=an.DEBUG&&I("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-l}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${d} documents in `+(c-u)+`ms
Total Duration: ${c-l}ms`),p.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}};function Z4(t,e){return new zv(t,e)}var Hv=class{constructor(e,n){this.db=e,this.garbageCollector=Z4(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return Vd(e,r)}removeReference(e,n,r){return Vd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Vd(e,n)}er(e,n){return function(i,o){let s=!1;return i1(i).Z(a=>r1(i,a,o).next(u=>(u&&(s=!0),p.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let u=this.er(e,s).next(c=>{if(!c)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,O.min()),_r(e).delete(function(d){return[0,ft(d.path)]}(s))))});i.push(u)}}).next(()=>p.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Vd(e,n)}Xn(e,n){let r=_r(e),i,o=Nt._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:c})=>{s===0?(o!==Nt._e&&n(new C(Dn(i)),o),o=c,i=u):o=Nt._e}).next(()=>{o!==Nt._e&&n(new C(Dn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Vd(t,e){return _r(t).put(function(r,i){return{targetId:0,path:ft(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var gh=class{constructor(){this.changes=new Mn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ve.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?p.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Gv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return fi(e).put(r)}removeEntry(e,n,r){return fi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ch(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Ve.newInvalidDocument(n);return fi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(iu(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:Ve.newInvalidDocument(n)};return fi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(iu(n))},(i,o)=>{r={document:this.nr(n,o),size:fh(o)}}).next(()=>r)}getEntries(e,n){let r=Et();return this.ir(e,n,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=Et(),i=new ge(C.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,fh(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return p.resolve();let i=new he($S);n.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(iu(i.first()),iu(i.last())),s=i.getIterator(),a=s.getNext();return fi(e).Y({index:"documentKeyIndex",range:o},(u,c,l)=>{let d=C.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&$S(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,c),a=s.hasNext()?s.getNext():null),a?l.U(iu(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),ch(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fi(e).W(IDBKeyRange.bound(a,u,!0)).next(c=>{o?.incrementDocumentReadCount(c.length);let l=Et();for(let d of c){let h=this.nr(C.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Vu(n,h)||i.has(h.key))&&(l=l.insert(h.key,h))}return l})}getAllFromCollectionGroup(e,n,r,i){let o=Et(),s=BS(n,r),a=BS(n,$t.max());return fi(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,c,l)=>{let d=this.nr(C.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(d.key,d),o.size===i&&l.done()}).next(()=>o)}newChangeBuffer(e){return new Wv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return US(e).get("remoteDocumentGlobalKey").next(n=>(N(!!n),n))}tr(e,n){return US(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=K4(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(O.min())))return r}return Ve.newInvalidDocument(e)}};function o1(t){return new Gv(t)}var Wv=class extends gh{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Mn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new he((o,s)=>z(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=SS(this.ar.serializer,s);i=i.add(o.path.popLast());let c=fh(u);r+=c-a.size,n.push(this.ar.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=SS(this.ar.serializer,s.convertToNoDocument(O.min()));n.push(this.ar.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),p.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function US(t){return Ge(t,"remoteDocumentGlobal")}function fi(t){return Ge(t,"remoteDocumentsV14")}function iu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function BS(t,e){let n=e.documentKey.path.toArray();return[t,ch(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function $S(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=z(n[o],r[o]),i)return i;return i=z(n.length,r.length),i||(i=z(n[n.length-2],r[r.length-2]),i||z(n[n.length-1],r[r.length-1]))}var Kv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var mh=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&lu(r.mutation,i,Pt.empty(),Ee.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,H()).next(()=>r))}getLocalViewOfDocuments(e,n,r=H()){let i=Tn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=su();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Tn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,H()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Et(),s=cu(),a=function(){return cu()}();return n.forEach((u,c)=>{let l=r.get(c.key);i.has(c.key)&&(l===void 0||l.mutation instanceof rn)?o=o.insert(c.key,c):l!==void 0?(s.set(c.key,l.mutation.getFieldMask()),lu(l.mutation,c,l.mutation.getFieldMask(),Ee.now())):s.set(c.key,Pt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,l)=>s.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new Kv(l,(d=s.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=cu(),i=new ge((s,a)=>s-a),o=H();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let c=n.get(u);if(c===null)return;let l=r.get(u)||Pt.empty();l=a.applyToLocalView(c,l),r.set(u,l);let d=(i.get(a.batchId)||H()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),c=u.key,l=u.value,d=AA();l.forEach(h=>{if(!o.has(h)){let f=FA(n.get(h),r.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return p.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return C.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Xw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):p.resolve(Tn()),a=-1,u=o;return s.next(c=>p.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?p.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,H())).next(l=>({batchId:a,changes:SA(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new C(n)).next(r=>{let i=su();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=su();return this.indexManager.getCollectionParents(e,o).next(a=>p.forEach(a,u=>{let c=function(d,h){return new nn(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,c)=>{let l=c.getKey();s.get(l)===null&&(s=s.insert(l,Ve.newInvalidDocument(l)))});let a=su();return s.forEach((u,c)=>{let l=o.get(u);l!==void 0&&lu(l.mutation,c,Pt.empty(),Ee.now()),Vu(n,c)&&(a=a.insert(u,c))}),a})}};var Qv=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return p.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ne(i.createTime)}}(n)),p.resolve()}getNamedQuery(e,n){return p.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:n_(i.bundledQuery),readTime:Ne(i.readTime)}}(n)),p.resolve()}};var Yv=class{constructor(){this.overlays=new ge(C.comparator),this.hr=new Map}getOverlay(e,n){return p.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Tn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),p.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),p.resolve()}getOverlaysForCollection(e,n,r){let i=Tn(),o=n.length+1,s=new C(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return p.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new ge((c,l)=>c-l),s=this.overlays.getIterator();for(;s.hasNext();){let c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=o.get(c.largestBatchId);l===null&&(l=Tn(),o=o.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}let a=Tn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return p.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Iu(n,r));let o=this.hr.get(n);o===void 0&&(o=H(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var Su=class{constructor(){this.Pr=new he(Oe.Ir),this.Tr=new he(Oe.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Oe(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Oe(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new C(new re([])),r=new Oe(n,e),i=new Oe(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new C(new re([])),r=new Oe(n,e),i=new Oe(n,e+1),o=H();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Oe(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Oe=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return C.comparator(e.key,n.key)||z(e.pr,n.pr)}static Er(e,n){return z(e.pr,n.pr)||C.comparator(e.key,n.key)}};var Zv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new he(Oe.Ir)}checkEmpty(e){return p.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new _u(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new Oe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return p.resolve(s)}lookupMutationBatch(e,n){return p.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return p.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return p.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return p.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Oe(n,0),i=new Oe(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),p.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new he(z);return n.forEach(i=>{let o=new Oe(i,0),s=new Oe(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),p.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;C.isDocumentKey(o)||(o=o.child(""));let s=new Oe(new C(o),0),a=new he(z);return this.wr.forEachWhile(u=>{let c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.pr)),!0)},s),p.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){N(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return p.forEach(n.mutations,i=>{let o=new Oe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Oe(n,0),i=this.wr.firstAfterOrEqual(r);return p.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,p.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Jv=class{constructor(e){this.vr=e,this.docs=function(){return new ge(C.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return p.resolve(r?r.document.mutableCopy():Ve.newInvalidDocument(n))}getEntries(e,n){let r=Et();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ve.newInvalidDocument(i))}),p.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Et(),s=n.path,a=new C(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:c,value:{document:l}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||Qw(sA(l),r)<=0||(i.has(l.key)||Vu(n,l))&&(o=o.insert(l.key,l.mutableCopy()))}return p.resolve(o)}getAllFromCollectionGroup(e,n,r,i){x()}Fr(e,n){return p.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Xv(this)}getSize(e){return p.resolve(this.size)}},Xv=class extends gh{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),p.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var ew=class{constructor(e){this.persistence=e,this.Mr=new Mn(n=>Ti(n),Fu),this.lastRemoteSnapshotVersion=O.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Su,this.targetCount=0,this.Lr=is.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),p.resolve()}getLastRemoteSnapshotVersion(e){return p.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return p.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),p.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),p.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new is(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,p.resolve()}updateTargetData(e,n){return this.qn(n),p.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,p.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),p.waitFor(o).next(()=>i)}getTargetCount(e){return p.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return p.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),p.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),p.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),p.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return p.resolve(r)}containsKey(e,n){return p.resolve(this.Nr.containsKey(n))}};var yh=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new Nt(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new ew(this),this.indexManager=new jv,this.remoteDocumentCache=function(i){return new Jv(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new uh(n),this.$r=new Qv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Yv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Zv(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){I("MemoryPersistence","Starting transaction:",e);let i=new tw(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return p.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},tw=class extends Yd{constructor(e){super(),this.currentSequenceNumber=e}},vh=class t{constructor(e){this.persistence=e,this.zr=new Su,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw x()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),p.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),p.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),p.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return p.forEach(this.Jr,r=>{let i=C.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,O.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return p.or([()=>p.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var nw=class{constructor(e){this.serializer=e}N(e,n,r,i){let o=new Zd("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oS,{unique:!0}),u.createObjectStore("documentMutations")}(e),qS(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=p.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),qS(e)),s=s.next(()=>function(u){let c=u.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:O.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",l)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,c){return c.store("mutations").W().next(l=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oS,{unique:!0});let d=c.store("mutations"),h=l.map(f=>d.put(f));return p.waitFor(h)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let c=u.createObjectStore("documentOverlays",{keyPath:g4});c.createIndex("collectionPathOverlayIndex",m4,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",y4,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let c=u.createObjectStore("remoteDocumentsV14",{keyPath:i4});c.createIndex("documentKeyIndex",o4),c.createIndex("collectionGroupIndex",s4)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:d4}).createIndex("sequenceNumberIndex",h4,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:f4}).createIndex("documentKeyIndex",p4,{unique:!1})}(e))),s}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=fh(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>p.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>p.forEach(a,u=>{N(u.userId===o.userId);let c=mi(this.serializer,u);return n1(e,o.userId,c).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.Y((s,a)=>{let u=new re(s),c=function(d){return[0,ft(d)]}(u);o.push(n.get(c).next(l=>l?p.resolve():(d=>n.put({targetId:0,path:ft(d),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>p.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:l4});let r=n.store("collectionParents"),i=new bu,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:ft(u)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{let u=new re(s);return o(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,u],c)=>{let l=Dn(a);return o(l.popLast())}))}ri(e){let n=e.store("targets");return n.Y((r,i)=>{let o=au(i),s=XA(this.serializer,o);return n.put(s)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{let a=n.store("remoteDocumentsV14"),u=function(d){return d.document?new C(re.fromString(d.document.name).popFirst(5)):d.noDocument?C.fromSegments(d.noDocument.path):d.unknownDocument?C.fromSegments(d.unknownDocument.path):x()}(s).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(c))}).next(()=>p.waitFor(i))}si(e,n){let r=n.store("mutations"),i=o1(this.serializer),o=new yh(vh.Hr,this.serializer.ct);return r.W().next(s=>{let a=new Map;return s.forEach(u=>{var c;let l=(c=a.get(u.userId))!==null&&c!==void 0?c:H();mi(this.serializer,u).keys().forEach(d=>l=l.add(d)),a.set(u.userId,l)}),p.forEach(a,(u,c)=>{let l=new Fe(c),d=lh.lt(this.serializer,l),h=o.getIndexManager(l),f=ph.lt(l,this.serializer,h,o.referenceDelegate);return new mh(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new gu(n,Nt._e),u).next()})})}};function qS(t){t.createObjectStore("targetDocuments",{keyPath:u4}).createIndex("documentTargetsIndex",c4,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",a4,{unique:!0}),t.createObjectStore("targetGlobal")}var Wy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rw=class t{constructor(e,n,r,i,o,s,a,u,c,l,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=c,this.ai=l,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!t.D())throw new _(g.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hv(this,i),this.Ti=n+"main",this.serializer=new uh(u),this.Ei=new Hn(this.Ti,this.ui,new nw(this.serializer)),this.Qr=new Bv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=o1(this.serializer),this.$r=new Nv,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,l===!1&&Me("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new _(g.FAILED_PRECONDITION,Wy);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Nt(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>m(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(n=>m(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>m(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Or(e))return I("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return I("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return ou(e).get("owner").next(n=>p.resolve(this.Si(n)))}bi(e){return jd(e).delete(this.clientId)}Di(){return m(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Ge(n,"clientMetadata");return r.W().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return p.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?p.resolve(!0):ou(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new _(g.FAILED_PRECONDITION,Wy);return!1}}return!(!this.networkEnabled||!this.inForeground)||jd(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&I("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return m(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new gu(e,Nt._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>jd(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return ph.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Uv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return lh.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){I("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(u){return u===15?w4:u===14?hA:u===13?dA:u===12?v4:u===11?lA:void x()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new gu(a,this.kr?this.kr.next():Nt._e),n==="readwrite-primary"?this.gi(s).next(u=>!!u||this.pi(s)).next(u=>{if(!u)throw Me(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new _(g.FAILED_PRECONDITION,aA);return r(s)}).next(u=>this.wi(s).next(()=>u)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return ou(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new _(g.FAILED_PRECONDITION,Wy)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ou(e).put("owner",n)}static D(){return Hn.D()}yi(e){let n=ou(e);return n.get("owner").next(r=>this.Si(r)?(I("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):p.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Me(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;uf()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return I("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Me("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Me("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function ou(t){return Ge(t,"owner")}function jd(t){return Ge(t,"clientMetadata")}function i_(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var iw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=H(),i=H();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var ow=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var wh=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return uf()?8:Hn.v(Ds())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new ow;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Bo()<=an.DEBUG&&I("QueryEngine","SDK will not create cache indexes for query:",$o(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),p.resolve()):(Bo()<=an.DEBUG&&I("QueryEngine","Query:",$o(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Bo()<=an.DEBUG&&I("QueryEngine","The SDK decides to create cache indexes for query:",$o(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pt(n))):p.resolve())}ji(e,n){if(mS(n))return p.resolve(null);let r=pt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ih(n,null,"F"),r=pt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=H(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let c=this.Zi(n,a);return this.Xi(n,c,s,u.readTime)?this.ji(e,ih(n,null,"F")):this.es(e,c,n,u)}))})))}Hi(e,n,r,i){return mS(n)||i.isEqual(O.min())?p.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?p.resolve(null):(Bo()<=an.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$o(n)),this.es(e,s,n,oA(i,-1)).next(a=>a))})}Zi(e,n){let r=new he(CA(e));return n.forEach((i,o)=>{Vu(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return Bo()<=an.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",$o(n)),this.zi.getDocumentsMatchingQuery(e,n,$t.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var sw=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new ge(z),this.rs=new Mn(o=>Ti(o),Fu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mh(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function s1(t,e,n,r){return new sw(t,e,n,r)}function a1(t,e){return m(this,null,function*(){let n=b(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=H();for(let c of i){s.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}for(let c of o){a.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:s,addedBatchIds:a}))})})})}function J4(t,e){let n=b(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,c,l){let d=c.batch,h=d.keys(),f=p.resolve();return h.forEach(v=>{f=f.next(()=>l.getEntry(u,v)).next(y=>{let w=c.docVersions.get(v);N(w!==null),y.version.compareTo(w)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),l.addEntry(y)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=H();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function u1(t){let e=b(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function X4(t,e){let n=b(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(o,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(o,l.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(He.EMPTY_BYTE_STRING,O.min()).withLastLimboFreeSnapshotVersion(O.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(y,w,T){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(h,f,l)&&a.push(n.Qr.updateTargetData(o,f))});let u=Et(),c=H();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(c1(o,s,e.documentUpdates).next(l=>{u=l.cs,c=l.ls})),!r.isEqual(O.min())){let l=n.Qr.getLastRemoteSnapshotVersion(o).next(d=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return p.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(n.ns=i,o))}function c1(t,e,n){let r=H(),i=H();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Et();return n.forEach((a,u)=>{let c=o.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(O.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):I("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{cs:s,ls:i}})}function e3(t,e){let n=b(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function os(t,e){let n=b(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,p.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new rs(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function ss(t,e,n){return m(this,null,function*(){let r=b(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Or(s))throw s;I("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function _h(t,e,n){let r=b(t),i=O.min(),o=H();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,l){let d=b(u),h=d.rs.get(l);return h!==void 0?p.resolve(d.ns.get(h)):d.Qr.getTargetData(c,l)}(r,s,pt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:O.min(),n?o:H())).next(a=>(h1(r,TA(e),a),{documents:a,hs:o})))}function l1(t,e){let n=b(t),r=b(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function d1(t,e){let n=b(t),r=n.ss.get(e)||O.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,oA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(h1(n,e,i),i))}function h1(t,e,n){let r=t.ss.get(e)||O.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function t3(t,e,n,r){return m(this,null,function*(){let i=b(t),o=H(),s=Et();for(let c of n){let l=e.Ps(c.metadata.name);c.document&&(o=o.add(l));let d=e.Is(c);d.setReadTime(e.Ts(c.metadata.readTime)),s=s.insert(l,d)}let a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield os(i,function(l){return pt(ps(re.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>c1(c,a,s).next(l=>(a.apply(c),l)).next(l=>i.Qr.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.Qr.addMatchingKeys(c,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,l.cs,l.ls)).next(()=>l.cs)))})}function n3(r,i){return m(this,arguments,function*(t,e,n=H()){let o=yield os(t,pt(n_(e.bundledQuery))),s=b(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Ne(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.$r.saveNamedQuery(a,e);let c=o.withResumeToken(He.EMPTY_BYTE_STRING,u);return s.ns=s.ns.insert(c.targetId,c),s.Qr.updateTargetData(a,c).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function zS(t,e){return`firestore_clients_${t}_${e}`}function HS(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ky(t,e){return`firestore_targets_${t}_${e}`}var Ih=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new _(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(Me("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},du=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new _(r.error.code,r.error.message))),o?new t(e,r.state,i):(Me("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Eh=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=e_();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=uA(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Me("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},aw=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Me("SharedClientState",`Failed to parse online state: ${e}`),null)}},Au=class{constructor(){this.activeTargetIds=e_()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},hu=class{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new ge(z),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=zS(this.persistenceKey,this.Vs),this.Ss=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Au),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return m(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(zS(this.persistenceKey,r));if(i){let o=Eh.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Ky(this.persistenceKey,e));if(r){let i=du.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ky(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return I("SharedClientState","READ",e,n),n}setItem(e,n){I("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){I("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(I("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Me("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>m(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(o){let s=Nt._e;if(o!=null)try{let a=JSON.parse(o);N(typeof a=="number"),s=a}catch(a){Me("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==Nt._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){let i=new Ih(this.currentUser,e,n,r),o=HS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){let n=HS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=Ky(this.persistenceKey,e),o=new du(e,n,r);this.setItem(i,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return Eh.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Ih.Es(new Fe(o),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return du.Es(i,n)}xs(e){return aw.Es(e)}Js(e){return JSON.parse(e)}zs(e){return m(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);I("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=e_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},Dh=class{constructor(){this.no=new Au,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Au,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var uw=class{io(e){}shutdown(){}};var Th=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ud=null;function Qy(){return Ud===null?Ud=function(){return 268435456+Math.round(2147483648*Math.random())}():Ud++,"0x"+Ud.toString(16)}var r3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var cw=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var st="WebChannelConnection",lw=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){let a=Qy(),u=this.bo(n,r.toUriEncodedString());I("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,s),this.Co(n,u,c,i).then(l=>(I("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw Bt("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){let i=r3[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let o=Qy();return new Promise((s,a)=>{let u=new eS;u.setWithCredentials(!0),u.listenOnce(Jb.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Fd.NO_ERROR:let l=u.getResponseJson();I(st,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case Fd.TIMEOUT:I(st,`RPC '${e}' ${o} timed out`),a(new _(g.DEADLINE_EXCEEDED,"Request time out"));break;case Fd.HTTP_ERROR:let d=u.getStatus();if(I(st,`RPC '${e}' ${o} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let v=function(w){let T=w.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(T)>=0?T:g.UNKNOWN}(f.status);a(new _(v,f.message))}else a(new _(g.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new _(g.UNAVAILABLE,"Connection failed."));break;default:x()}}finally{I(st,`RPC '${e}' ${o} completed.`)}});let c=JSON.stringify(i);I(st,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}Fo(e,n,r){let i=Qy(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Yb(),a=Zb(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let l=o.join("");I(st,`Creating RPC '${e}' stream ${i}: ${l}`,u);let d=s.createWebChannel(l,u),h=!1,f=!1,v=new cw({lo:w=>{f?I(st,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(h||(I(st,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),I(st,`RPC '${e}' stream ${i} sending:`,w),d.send(w))},ho:()=>d.close()}),y=(w,T,L)=>{w.listen(T,A=>{try{L(A)}catch($){setTimeout(()=>{throw $},0)}})};return y(d,tu.EventType.OPEN,()=>{f||I(st,`RPC '${e}' stream ${i} transport opened.`)}),y(d,tu.EventType.CLOSE,()=>{f||(f=!0,I(st,`RPC '${e}' stream ${i} transport closed`),v.Vo())}),y(d,tu.EventType.ERROR,w=>{f||(f=!0,Bt(st,`RPC '${e}' stream ${i} transport errored:`,w),v.Vo(new _(g.UNAVAILABLE,"The operation could not be completed")))}),y(d,tu.EventType.MESSAGE,w=>{var T;if(!f){let L=w.data[0];N(!!L);let A=L,$=A.error||((T=A[0])===null||T===void 0?void 0:T.error);if($){I(st,`RPC '${e}' stream ${i} received error:`,$);let q=$.status,G=function(of){let qu=ke[of];if(qu!==void 0)return jA(qu)}(q),le=$.message;G===void 0&&(G=g.INTERNAL,le="Unknown error status: "+q+" with message "+$.message),f=!0,v.Vo(new _(G,le)),d.close()}else I(st,`RPC '${e}' stream ${i} received:`,L),v.mo(L)}}),y(a,Xb.STAT_EVENT,w=>{w.stat===Hy.PROXY?I(st,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===Hy.NOPROXY&&I(st,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.Ro()},0),v}};function f1(){return typeof window<"u"?window:null}function Hd(){return typeof document<"u"?document:null}function ju(t){return new Sv(t,!0)}var xu=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&I("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var Ch=class{constructor(e,n,r,i,o,s,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new xu(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return m(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return m(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return m(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===g.RESOURCE_EXHAUSTED?(Me(n.toString()),Me("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new _(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>m(this,null,function*(){this.state=0,this.start()}))}__(e){return I("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},dw=class extends Ch{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=B4(this.serializer,e),r=function(o){if(!("targetChange"in o))return O.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?O.min():s.readTime?Ne(s.readTime):O.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=Mv(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=nh(u)?{documents:WA(o,u)}:{query:KA(o,u).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=BA(o,s.resumeToken);let c=Av(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(O.min())>0){a.readTime=ns(o,s.snapshotVersion.toTimestamp());let c=Av(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let r=q4(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=Mv(this.serializer),n.removeTarget=e,this.t_(n)}},hw=class extends Ch{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(N(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=$4(e.writeResults,e.commitTime),r=Ne(e.commitTime);return this.listener.T_(r,n)}return N(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=Mv(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Cu(this.serializer,r))};this.t_(n)}};var fw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new _(g.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,xv(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _(g.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,xv(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _(g.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var pw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Me(n),this.g_=!1):I("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var gw=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{r.enqueueAndForget(()=>m(this,null,function*(){Fr(this)&&(I("RemoteStore","Restarting streams for network reachability change."),yield function(u){return m(this,null,function*(){let c=b(u);c.v_.add(4),yield gs(c),c.x_.set("Unknown"),c.v_.delete(4),yield Uu(c)})}(this))}))}),this.x_=new pw(r,i)}};function Uu(t){return m(this,null,function*(){if(Fr(t))for(let e of t.F_)yield e(!0)})}function gs(t){return m(this,null,function*(){for(let e of t.F_)yield e(!1)})}function zh(t,e){let n=b(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),a_(n)?s_(n):ys(n).Jo()&&o_(n,e))}function as(t,e){let n=b(t),r=ys(n);n.C_.delete(e),r.Jo()&&p1(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Fr(n)&&n.x_.set("Unknown"))}function o_(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(O.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ys(t).c_(e)}function p1(t,e){t.O_.Oe(e),ys(t).l_(e)}function s_(t){t.O_=new bv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ys(t).start(),t.x_.p_()}function a_(t){return Fr(t)&&!ys(t).Ho()&&t.C_.size>0}function Fr(t){return b(t).v_.size===0}function g1(t){t.O_=void 0}function i3(t){return m(this,null,function*(){t.C_.forEach((e,n)=>{o_(t,e)})})}function o3(t,e){return m(this,null,function*(){g1(t),a_(t)?(t.x_.S_(e),s_(t)):t.x_.set("Unknown")})}function s3(t,e,n){return m(this,null,function*(){if(t.x_.set("Online"),e instanceof sh&&e.state===2&&e.cause)try{yield function(i,o){return m(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){I("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bh(t,r)}else if(e instanceof Qo?t.O_.$e(e):e instanceof oh?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(O.min()))try{let r=yield u1(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.O_.it(s);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){let l=o.C_.get(c);l&&o.C_.set(c,l.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,c)=>{let l=o.C_.get(u);if(!l)return;o.C_.set(u,l.withResumeToken(He.EMPTY_BYTE_STRING,l.snapshotVersion)),p1(o,u);let d=new rs(l.target,u,c,l.sequenceNumber);o_(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){I("RemoteStore","Failed to raise snapshot:",r),yield bh(t,r)}})}function bh(t,e,n){return m(this,null,function*(){if(!Or(e))throw e;t.v_.add(1),yield gs(t),t.x_.set("Offline"),n||(n=()=>u1(t.localStore)),t.asyncQueue.enqueueRetryable(()=>m(this,null,function*(){I("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Uu(t)}))})}function m1(t,e){return e().catch(n=>bh(t,n,e))}function ms(t){return m(this,null,function*(){let e=b(t),n=Pr(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;a3(e);)try{let i=yield e3(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,u3(e,i)}catch(i){yield bh(e,i)}y1(e)&&v1(e)})}function a3(t){return Fr(t)&&t.D_.length<10}function u3(t,e){t.D_.push(e);let n=Pr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function y1(t){return Fr(t)&&!Pr(t).Ho()&&t.D_.length>0}function v1(t){Pr(t).start()}function c3(t){return m(this,null,function*(){Pr(t).d_()})}function l3(t){return m(this,null,function*(){let e=Pr(t);for(let n of t.D_)e.I_(n.mutations)})}function d3(t,e,n){return m(this,null,function*(){let r=t.D_.shift(),i=Dv.from(r,e,n);yield m1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ms(t)})}function h3(t,e){return m(this,null,function*(){e&&Pr(t).P_&&(yield function(r,i){return m(this,null,function*(){if(function(s){return VA(s)&&s!==g.ABORTED}(i.code)){let o=r.D_.shift();Pr(r).Zo(),yield m1(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ms(r)}})}(t,e)),y1(t)&&v1(t)})}function GS(t,e){return m(this,null,function*(){let n=b(t);n.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");let r=Fr(n);n.v_.add(3),yield gs(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Uu(n)})}function mw(t,e){return m(this,null,function*(){let n=b(t);e?(n.v_.delete(2),yield Uu(n)):e||(n.v_.add(2),yield gs(n),n.x_.set("Unknown"))})}function ys(t){return t.N_||(t.N_=function(n,r,i){let o=b(n);return o.R_(),new dw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:i3.bind(null,t),To:o3.bind(null,t),u_:s3.bind(null,t)}),t.F_.push(e=>m(this,null,function*(){e?(t.N_.Zo(),a_(t)?s_(t):t.x_.set("Unknown")):(yield t.N_.stop(),g1(t))}))),t.N_}function Pr(t){return t.L_||(t.L_=function(n,r,i){let o=b(n);return o.R_(),new hw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:c3.bind(null,t),To:h3.bind(null,t),E_:l3.bind(null,t),T_:d3.bind(null,t)}),t.F_.push(e=>m(this,null,function*(){e?(t.L_.Zo(),yield ms(t)):(yield t.L_.stop(),t.D_.length>0&&(I("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.L_}var yw=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Le,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function vs(t,e){if(Me("AsyncQueue",`${e}: ${t}`),Or(t))return new _(g.UNAVAILABLE,`${e}: ${t}`);throw t}var Sh=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||C.comparator(n.key,r.key):(n,r)=>C.comparator(n.key,r.key),this.keyedMap=su(),this.sortedSet=new ge(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ah=class{constructor(){this.B_=new ge(C.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):x():this.B_=this.B_.insert(n,e)}k_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},us=class t{constructor(e,n,r,i,o,s,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Sh.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var vw=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}},ww=class{constructor(){this.queries=new Mn(e=>DA(e),Lu),this.onlineState="Unknown",this.W_=new Set}};function u_(t,e){return m(this,null,function*(){let n=b(t),r=3,i=e.query,o=n.queries.get(i);o?!o.K_()&&e.U_()&&(r=2):(o=new vw,r=e.U_()?0:1);try{switch(r){case 0:o.q_=yield n.onListen(i,!0);break;case 1:o.q_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=vs(s,`Initialization of query '${$o(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Q_.push(e),e.G_(n.onlineState),o.q_&&e.z_(o.q_)&&l_(n)})}function c_(t,e){return m(this,null,function*(){let n=b(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),o.Q_.length===0?i=e.U_()?0:1:!o.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function f3(t,e){let n=b(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Q_)a.z_(i)&&(r=!0);s.q_=i}}r&&l_(n)}function p3(t,e,n){let r=b(t),i=r.queries.get(e);if(i)for(let o of i.Q_)o.onError(n);r.queries.delete(e)}function l_(t){t.W_.forEach(e=>{e.next()})}var _w,WS;(WS=_w||(_w={})).j_="default",WS.Cache="cache";var Mu=class{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new us(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;let r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;let n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=us.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==_w.Cache}};var Iw=class{constructor(e,n){this.na=e,this.byteLength=n}ra(){return"metadata"in this.na}};var xh=class{constructor(e){this.serializer=e}Ps(e){return bn(this.serializer,e)}Is(e){return e.metadata.exists?GA(this.serializer,e.document,!1):Ve.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ne(e)}},Ew=class{constructor(e,n,r){this.ia=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=w1(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++n;let r=re.fromString(e.na.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}oa(e){let n=new Map,r=new xh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||H()).add(o);n.set(s,a)}}return n}complete(){return m(this,null,function*(){let e=yield t3(this.localStore,new xh(this.serializer),this.documents,this.ia.id),n=this.oa(this.documents);for(let r of this.queries)yield n3(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:e}})}};function w1(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Mh=class{constructor(e){this.key=e}},Rh=class{constructor(e){this.key=e}},Nh=class{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=H(),this.mutatedKeys=H(),this.ha=CA(e),this.Pa=new Sh(this.ha)}get Ia(){return this.ua}Ta(e,n){let r=n?n.Ea:new Ah,i=n?n.Pa:this.Pa,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=Vu(this.query,d)?d:null,v=!!h&&this.mutatedKeys.has(h.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),w=!1;h&&f?h.data.isEqual(f.data)?v!==y&&(r.track({type:3,doc:f}),w=!0):this.da(h,f)||(r.track({type:2,doc:f}),w=!0,(u&&this.ha(f,u)>0||c&&this.ha(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),w=!0):h&&!f&&(r.track({type:1,doc:h}),w=!0,(u||c)&&(a=!0)),w&&(f?(s=s.add(f),o=y?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Pa:s,Ea:r,Xi:a,mutatedKeys:o}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;let s=e.Ea.k_();s.sort((l,d)=>function(f,v){let y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return x()}};return y(f)-y(v)}(l.type,d.type)||this.ha(l.doc,d.doc)),this.Aa(r),i=i!=null&&i;let a=n&&!i?this.Ra():[],u=this.la.size===0&&this.current&&!i?1:0,c=u!==this.ca;return this.ca=u,s.length!==0||c?{snapshot:new us(this.query,e.Pa,o,s,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Ah,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];let e=this.la;this.la=H(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});let n=[];return e.forEach(r=>{this.la.has(r)||n.push(new Rh(r))}),this.la.forEach(r=>{e.has(r)||n.push(new Mh(r))}),n}fa(e){this.ua=e.hs,this.la=H();let n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return us.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},Dw=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Tw=class{constructor(e){this.key=e,this.pa=!1}},Cw=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new Mn(a=>DA(a),Lu),this.Sa=new Map,this.ba=new Set,this.Da=new ge(C.comparator),this.Ca=new Map,this.va=new Su,this.Fa={},this.Ma=new Map,this.xa=is.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function g3(t,e,n=!0){return m(this,null,function*(){let r=Hh(t),i,o=r.wa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ga()):i=yield _1(r,e,n,!0),i})}function m3(t,e){return m(this,null,function*(){let n=Hh(t);yield _1(n,e,!0,!1)})}function _1(t,e,n,r){return m(this,null,function*(){let i=yield os(t.localStore,pt(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield d_(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&zh(t.remoteStore,i),a})}function d_(t,e,n,r,i){return m(this,null,function*(){t.Na=(d,h,f)=>function(y,w,T,L){return m(this,null,function*(){let A=w.view.Ta(T);A.Xi&&(A=yield _h(y.localStore,w.query,!1).then(({documents:le})=>w.view.Ta(le,A)));let $=L&&L.targetChanges.get(w.targetId),q=L&&L.targetMismatches.get(w.targetId)!=null,G=w.view.applyChanges(A,y.isPrimaryClient,$,q);return bw(y,w.targetId,G.Va),G.snapshot})}(t,d,h,f);let o=yield _h(t.localStore,e,!0),s=new Nh(e,o.hs),a=s.Ta(o.documents),u=Du.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,u);bw(t,n,c.Va);let l=new Dw(e,n,s);return t.wa.set(e,l),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot})}function y3(t,e,n){return m(this,null,function*(){let r=b(t),i=r.wa.get(e),o=r.Sa.get(i.targetId);if(o.length>1)return r.Sa.set(i.targetId,o.filter(s=>!Lu(s,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ss(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&as(r.remoteStore,i.targetId),cs(r,i.targetId)}).catch(kr))):(cs(r,i.targetId),yield ss(r.localStore,i.targetId,!0))})}function v3(t,e){return m(this,null,function*(){let n=b(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),as(n.remoteStore,r.targetId))})}function w3(t,e,n){return m(this,null,function*(){let r=g_(t);try{let i=yield function(s,a){let u=b(s),c=Ee.now(),l=a.reduce((f,v)=>f.add(v.key),H()),d,h;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let v=Et(),y=H();return u.os.getEntries(f,l).next(w=>{v=w,v.forEach((T,L)=>{L.isValidDocument()||(y=y.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,v)).next(w=>{d=w;let T=[];for(let L of a){let A=k4(L,d.get(L.key).overlayedDocument);A!=null&&T.push(new rn(L.key,A,mA(A.value.mapValue),Ce.exists(!0)))}return u.mutationQueue.addMutationBatch(f,c,T,a)}).next(w=>{h=w;let T=w.applyToLocalDocumentSet(d,y);return u.documentOverlayCache.saveOverlays(f,w.batchId,T)})}).then(()=>({batchId:h.batchId,changes:SA(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let c=s.Fa[s.currentUser.toKey()];c||(c=new ge(z)),c=c.insert(a,u),s.Fa[s.currentUser.toKey()]=c}(r,i.batchId,n),yield Yn(r,i.changes),yield ms(r.remoteStore)}catch(i){let o=vs(i,"Failed to persist write");n.reject(o)}})}function I1(t,e){return m(this,null,function*(){let n=b(t);try{let r=yield X4(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Ca.get(o);s&&(N(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.pa=!0:i.modifiedDocuments.size>0?N(s.pa):i.removedDocuments.size>0&&(N(s.pa),s.pa=!1))}),yield Yn(n,r,e)}catch(r){yield kr(r)}})}function KS(t,e,n){let r=b(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.wa.forEach((o,s)=>{let a=s.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=b(s);u.onlineState=a;let c=!1;u.queries.forEach((l,d)=>{for(let h of d.Q_)h.G_(a)&&(c=!0)}),c&&l_(u)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _3(t,e,n){return m(this,null,function*(){let r=b(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Ca.get(e),o=i&&i.key;if(o){let s=new ge(C.comparator);s=s.insert(o,Ve.newNoDocument(o,O.min()));let a=H().add(o),u=new Eu(O.min(),new Map,new ge(z),s,a);yield I1(r,u),r.Da=r.Da.remove(o),r.Ca.delete(e),p_(r)}else yield ss(r.localStore,e,!1).then(()=>cs(r,e,n)).catch(kr)})}function I3(t,e){return m(this,null,function*(){let n=b(t),r=e.batch.batchId;try{let i=yield J4(n.localStore,e);f_(n,r,null),h_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Yn(n,i)}catch(i){yield kr(i)}})}function E3(t,e,n){return m(this,null,function*(){let r=b(t);try{let i=yield function(s,a){let u=b(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(N(d!==null),l=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,l,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>u.localDocuments.getDocuments(c,l))})}(r.localStore,e);f_(r,e,n),h_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Yn(r,i)}catch(i){yield kr(i)}})}function D3(t,e){return m(this,null,function*(){let n=b(t);Fr(n.remoteStore)||I("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=b(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Ma.get(r)||[];i.push(e),n.Ma.set(r,i)}catch(r){let i=vs(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function h_(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function f_(t,e,n){let r=b(t),i=r.Fa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function cs(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||E1(t,r)})}function E1(t,e){t.ba.delete(e.path.canonicalString());let n=t.Da.get(e);n!==null&&(as(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),p_(t))}function bw(t,e,n){for(let r of n)r instanceof Mh?(t.va.addReference(r.key,e),T3(t,r)):r instanceof Rh?(I("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||E1(t,r.key)):x()}function T3(t,e){let n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(I("SyncEngine","New document in limbo: "+n),t.ba.add(r),p_(t))}function p_(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){let e=t.ba.values().next().value;t.ba.delete(e);let n=new C(re.fromString(e)),r=t.xa.next();t.Ca.set(r,new Tw(n)),t.Da=t.Da.insert(n,r),zh(t.remoteStore,new rs(pt(ps(n.path)),r,"TargetPurposeLimboResolution",Nt._e))}}function Yn(t,e,n){return m(this,null,function*(){let r=b(t),i=[],o=[],s=[];r.wa.isEmpty()||(r.wa.forEach((a,u)=>{s.push(r.Na(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);let l=iw.Ki(u.targetId,c);o.push(l)}}))}),yield Promise.all(s),r.ya.u_(i),yield function(u,c){return m(this,null,function*(){let l=b(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>p.forEach(c,h=>p.forEach(h.qi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>p.forEach(h.Qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Or(d))throw d;I("LocalStore","Failed to update sequence numbers: "+d)}for(let d of c){let h=d.targetId;if(!d.fromCache){let f=l.ns.get(h),v=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(v);l.ns=l.ns.insert(h,y)}}})}(r.localStore,o))})}function C3(t,e){return m(this,null,function*(){let n=b(t);if(!n.currentUser.isEqual(e)){I("SyncEngine","User change. New user:",e.toKey());let r=yield a1(n.localStore,e);n.currentUser=e,function(o,s){o.Ma.forEach(a=>{a.forEach(u=>{u.reject(new _(g.CANCELLED,s))})}),o.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Yn(n,r.us)}})}function b3(t,e){let n=b(t),r=n.Ca.get(e);if(r&&r.pa)return H().add(r.key);{let i=H(),o=n.Sa.get(e);if(!o)return i;for(let s of o){let a=n.wa.get(s);i=i.unionWith(a.view.Ia)}return i}}function S3(t,e){return m(this,null,function*(){let n=b(t),r=yield _h(n.localStore,e.query,!0),i=e.view.fa(r);return n.isPrimaryClient&&bw(n,e.targetId,i.Va),i})}function A3(t,e){return m(this,null,function*(){let n=b(t);return d1(n.localStore,e).then(r=>Yn(n,r))})}function x3(t,e,n,r){return m(this,null,function*(){let i=b(t),o=yield function(a,u){let c=b(a),l=b(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.vn(d,u).next(h=>h?c.localDocuments.getDocuments(d,h):p.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield ms(i.remoteStore):n==="acknowledged"||n==="rejected"?(f_(i,e,r||null),h_(i,e),function(a,u){b(b(a).mutationQueue).Mn(u)}(i.localStore,e)):x(),yield Yn(i,o)):I("SyncEngine","Cannot apply mutation batch with id: "+e)})}function M3(t,e){return m(this,null,function*(){let n=b(t);if(Hh(n),g_(n),e===!0&&n.Oa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield QS(n,r.toArray());n.Oa=!0,yield mw(n.remoteStore,!0);for(let o of i)zh(n.remoteStore,o)}else if(e===!1&&n.Oa!==!1){let r=[],i=Promise.resolve();n.Sa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(cs(n,s),ss(n.localStore,s,!0))),as(n.remoteStore,s)}),yield i,yield QS(n,r),function(s){let a=b(s);a.Ca.forEach((u,c)=>{as(a.remoteStore,c)}),a.va.mr(),a.Ca=new Map,a.Da=new ge(C.comparator)}(n),n.Oa=!1,yield mw(n.remoteStore,!1)}})}function QS(t,e,n){return m(this,null,function*(){let r=b(t),i=[],o=[];for(let s of e){let a,u=r.Sa.get(s);if(u&&u.length!==0){a=yield os(r.localStore,pt(u[0]));for(let c of u){let l=r.wa.get(c),d=yield S3(r,l);d.snapshot&&o.push(d.snapshot)}}else{let c=yield l1(r.localStore,s);a=yield os(r.localStore,c),yield d_(r,D1(c),s,!1,a.resumeToken)}i.push(a)}return r.ya.u_(o),i})}function D1(t){return EA(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function R3(t){return function(n){return b(b(n).persistence).Bi()}(b(t).localStore)}function N3(t,e,n,r){return m(this,null,function*(){let i=b(t);if(i.Oa)return void I("SyncEngine","Ignoring unexpected query state notification.");let o=i.Sa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield d1(i.localStore,TA(o[0])),a=Eu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",He.EMPTY_BYTE_STRING);yield Yn(i,s,a);break}case"rejected":yield ss(i.localStore,e,!0),cs(i,e,r);break;default:x()}})}function P3(t,e,n){return m(this,null,function*(){let r=Hh(t);if(r.Oa){for(let i of e){if(r.Sa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){I("SyncEngine","Adding an already active target "+i);continue}let o=yield l1(r.localStore,i),s=yield os(r.localStore,o);yield d_(r,D1(o),s.targetId,!1,s.resumeToken),zh(r.remoteStore,s)}for(let i of n)r.Sa.has(i)&&(yield ss(r.localStore,i,!1).then(()=>{as(r.remoteStore,i),cs(r,i)}).catch(kr))}})}function Hh(t){let e=b(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=I1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_3.bind(null,e),e.ya.u_=f3.bind(null,e.eventManager),e.ya.La=p3.bind(null,e.eventManager),e}function g_(t){let e=b(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E3.bind(null,e),e}function k3(t,e,n){let r=b(t);(function(o,s,a){return m(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(f,v){let y=b(f),w=Ne(v.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",T=>y.$r.getBundleMetadata(T,v.id)).then(T=>!!T&&T.createTime.compareTo(w)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(w1(u));let c=new Ew(u,o.localStore,s.serializer),l=yield s.Ba();for(;l;){let h=yield c.sa(l);h&&a._updateProgress(h),l=yield s.Ba()}let d=yield c.complete();return yield Yn(o,d.aa,void 0),yield function(f,v){let y=b(f);return y.persistence.runTransaction("Save bundle","readwrite",w=>y.$r.saveBundleMetadata(w,v))}(o.localStore,u),a._completeWith(d.progress),Promise.resolve(d._a)}catch(u){return Bt("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Ru=class{constructor(){this.synchronizeTabs=!1}initialize(e){return m(this,null,function*(){this.serializer=ju(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return s1(this.persistence,new wh,e.initialUser,this.serializer)}createPersistence(e){return new yh(vh.Hr,this.serializer)}createSharedClientState(e){return new Dh}terminate(){return m(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Ph=class t extends Ru{constructor(e,n,r){super(),this.ka=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return m(this,null,function*(){yield sf(t.prototype,this,"initialize").call(this,e),yield this.ka.initialize(this,e),yield g_(this.ka.syncEngine),yield ms(this.ka.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return s1(this.persistence,new wh,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new qv(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new av(n,this.persistence);return new sv(e.asyncQueue,r)}createPersistence(e){let n=i_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ut.withCacheSize(this.cacheSizeBytes):Ut.DEFAULT;return new rw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,f1(),Hd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Dh}},Sw=class t extends Ph{constructor(e,n){super(e,n,!1),this.ka=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return m(this,null,function*(){yield sf(t.prototype,this,"initialize").call(this,e);let n=this.ka.syncEngine;this.sharedClientState instanceof hu&&(this.sharedClientState.syncEngine={Zs:x3.bind(null,n),Xs:N3.bind(null,n),eo:P3.bind(null,n),Bi:R3.bind(null,n),Ys:A3.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>m(this,null,function*(){yield M3(this.ka.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=f1();if(!hu.D(n))throw new _(g.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=i_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new hu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Nu=class{initialize(e,n){return m(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>KS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=C3.bind(null,this.syncEngine),yield mw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new ww}()}createDatastore(e){let n=ju(e.databaseInfo.databaseId),r=function(o){return new lw(o)}(e.databaseInfo);return function(o,s,a,u){return new fw(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new gw(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>KS(this.syncEngine,n,0),function(){return Th.D()?new Th:new uw}())}createSyncEngine(e,n){return function(i,o,s,a,u,c,l){let d=new Cw(i,o,s,a,u,c);return l&&(d.Oa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return m(this,null,function*(){var e;yield function(r){return m(this,null,function*(){let i=b(r);I("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield gs(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function YS(t,e=10240){let n=0;return{read(){return m(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return m(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ls=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Me("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Aw=class{constructor(e,n){this.Ka=e,this.serializer=n,this.metadata=new Le,this.buffer=new Uint8Array,this.$a=function(){return new TextDecoder("utf-8")}(),this.Ua().then(r=>{r&&r.ra()?this.metadata.resolve(r.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.na)}`))},r=>this.metadata.reject(r))}close(){return this.Ka.cancel()}getMetadata(){return m(this,null,function*(){return this.metadata.promise})}Ba(){return m(this,null,function*(){return yield this.getMetadata(),this.Ua()})}Ua(){return m(this,null,function*(){let e=yield this.Wa();if(e===null)return null;let n=this.$a.decode(e),r=Number(n);isNaN(r)&&this.Ga(`length string (${n}) is not valid number`);let i=yield this.za(r);return new Iw(JSON.parse(i),e.length+r)})}ja(){return this.buffer.findIndex(e=>e===123)}Wa(){return m(this,null,function*(){for(;this.ja()<0&&!(yield this.Ha()););if(this.buffer.length===0)return null;let e=this.ja();e<0&&this.Ga("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}za(e){return m(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ha())&&this.Ga("Reached the end of bundle when more is expected.");let n=this.$a.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Ga(e){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ha(){return m(this,null,function*(){let e=yield this.Ka.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var xw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return m(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new _(g.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return m(this,null,function*(){let s=b(i),a={documents:o.map(d=>Tu(s.serializer,d))},u=yield s.vo("BatchGetDocuments",s.serializer.databaseId,re.emptyPath(),a,o.length),c=new Map;u.forEach(d=>{let h=U4(s.serializer,d);c.set(h.key.toString(),h)});let l=[];return o.forEach(d=>{let h=c.get(d.toString());N(!!h),l.push(h)}),l})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Nr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return m(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=C.fromPath(r);this.mutations.push(new wu(i,this.precondition(i)))}),yield function(r,i){return m(this,null,function*(){let o=b(r),s={writes:i.map(a=>Cu(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,re.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw x();n=O.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new _(g.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(O.min())?Ce.exists(!1):Ce.updateTime(n):Ce.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(O.min()))throw new _(g.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ce.updateTime(n)}return Ce.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Mw=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Ja=r.maxAttempts,this.jo=new xu(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo(()=>m(this,null,function*(){let e=new xw(this.datastore),n=this.Xa(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.eu(i)}))}).catch(r=>{this.eu(r)})}))}Xa(e){try{let n=this.updateFunction(e);return!Ou(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(e)}tu(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!VA(n)}return!1}};var Rw=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Fe.UNAUTHENTICATED,this.clientId=Kd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>m(this,null,function*(){I("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(I("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Le;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=vs(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Gd(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>m(this,null,function*(){r.isEqual(i)||(yield a1(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Nw(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield m_(t);I("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>GS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>GS(e.remoteStore,i)),t._onlineComponents=e})}function T1(t){return t.name==="FirebaseError"?t.code===g.FAILED_PRECONDITION||t.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function m_(t){return m(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){I("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Gd(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!T1(n))throw n;Bt("Error using user provided cache. Falling back to memory cache: "+n),yield Gd(t,new Ru)}}else I("FirestoreClient","Using default OfflineComponentProvider"),yield Gd(t,new Ru);return t._offlineComponents})}function Gh(t){return m(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(I("FirestoreClient","Using user provided OnlineComponentProvider"),yield Nw(t,t._uninitializedComponentsProvider._online)):(I("FirestoreClient","Using default OnlineComponentProvider"),yield Nw(t,new Nu))),t._onlineComponents})}function C1(t){return m_(t).then(e=>e.persistence)}function y_(t){return m_(t).then(e=>e.localStore)}function b1(t){return Gh(t).then(e=>e.remoteStore)}function v_(t){return Gh(t).then(e=>e.syncEngine)}function O3(t){return Gh(t).then(e=>e.datastore)}function ds(t){return m(this,null,function*(){let e=yield Gh(t),n=e.eventManager;return n.onListen=g3.bind(null,e.syncEngine),n.onUnlisten=y3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=m3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=v3.bind(null,e.syncEngine),n})}function F3(t){return t.asyncQueue.enqueue(()=>m(this,null,function*(){let e=yield C1(t),n=yield b1(t);return e.setNetworkEnabled(!0),function(i){let o=b(i);return o.v_.delete(0),Uu(o)}(n)}))}function L3(t){return t.asyncQueue.enqueue(()=>m(this,null,function*(){let e=yield C1(t),n=yield b1(t);return e.setNetworkEnabled(!1),function(i){return m(this,null,function*(){let o=b(i);o.v_.add(0),yield gs(o),o.x_.set("Offline")})}(n)}))}function V3(t,e){let n=new Le;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(i,o,s){return m(this,null,function*(){try{let a=yield function(c,l){let d=b(c);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,l))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new _(g.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=vs(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield y_(t),e,n)})),n.promise}function S1(t,e,n={}){let r=new Le;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(o,s,a,u,c){let l=new ls({next:h=>{s.enqueueAndForget(()=>c_(o,d));let f=h.docs.has(a);!f&&h.fromCache?c.reject(new _(g.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&u&&u.source==="server"?c.reject(new _(g.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Mu(ps(a.path),l,{includeMetadataChanges:!0,ta:!0});return u_(o,d)}(yield ds(t),t.asyncQueue,e,n,r)})),r.promise}function j3(t,e){let n=new Le;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(i,o,s){return m(this,null,function*(){try{let a=yield _h(i,o,!0),u=new Nh(o,a.hs),c=u.Ta(a.documents),l=u.applyChanges(c,!1);s.resolve(l.snapshot)}catch(a){let u=vs(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield y_(t),e,n)})),n.promise}function A1(t,e,n={}){let r=new Le;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(o,s,a,u,c){let l=new ls({next:h=>{s.enqueueAndForget(()=>c_(o,d)),h.fromCache&&u.source==="server"?c.reject(new _(g.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Mu(a,l,{includeMetadataChanges:!0,ta:!0});return u_(o,d)}(yield ds(t),t.asyncQueue,e,n,r)})),r.promise}function U3(t,e){let n=new ls(e);return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(i,o){b(i).W_.add(o),o.next()}(yield ds(t),n)})),()=>{n.Qa(),t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(i,o){b(i).W_.delete(o)}(yield ds(t),n)}))}}function B3(t,e,n,r){let i=function(s,a){let u;return u=typeof s=="string"?UA().encode(s):s,function(l,d){return new Aw(l,d)}(function(l,d){if(l instanceof Uint8Array)return YS(l,d);if(l instanceof ArrayBuffer)return YS(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,ju(e));t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){k3(yield v_(t),i,r)}))}function $3(t,e){return t.asyncQueue.enqueue(()=>m(this,null,function*(){return function(r,i){let o=b(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield y_(t),e)}))}function x1(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var ZS=new Map;function w_(t,e,n){if(!n)throw new _(g.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function __(t,e,n,r){if(e===!0&&r===!0)throw new _(g.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function JS(t){if(!C.isDocumentKey(t))throw new _(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function XS(t){if(C.isDocumentKey(t))throw new _(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":x()}function ie(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Wh(t);throw new _(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function M1(t,e){if(e<=0)throw new _(g.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var kh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new _(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new _(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ai=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new _(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Yy;switch(r.type){case"firstParty":return new ev(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=ZS.get(n);r&&(I("ComponentProvider","Removing Datastore"),ZS.delete(n),r.terminate())}(this),Promise.resolve()}};function R1(t,e,n,r={}){var i;let o=(t=ie(t,Ai))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Bt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Fe.MOCK_USER;else{a=K_(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new _(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Fe(c)}t._authCredentials=new Zy(new Wd(a,u))}}var Je=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},fe=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Sn=class t extends Je{constructor(e,n,r){super(e,n,ps(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new fe(this.firestore,null,new C(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function I_(t,e,...n){if(t=ve(t),w_("collection","path",e),t instanceof Ai){let r=re.fromString(e,...n);return XS(r),new Sn(t,null,r)}{if(!(t instanceof fe||t instanceof Sn))throw new _(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(re.fromString(e,...n));return XS(r),new Sn(t.firestore,null,r)}}function N1(t,e){if(t=ie(t,Ai),w_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new _(g.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Je(t,null,function(r){return new nn(re.emptyPath(),r)}(e))}function Bu(t,e,...n){if(t=ve(t),arguments.length===1&&(e=Kd.newId()),w_("doc","path",e),t instanceof Ai){let r=re.fromString(e,...n);return JS(r),new fe(t,null,new C(r))}{if(!(t instanceof fe||t instanceof Sn))throw new _(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(re.fromString(e,...n));return JS(r),new fe(t.firestore,t instanceof Sn?t.converter:null,new C(r))}}function E_(t,e){return t=ve(t),e=ve(e),(t instanceof fe||t instanceof Sn)&&(e instanceof fe||e instanceof Sn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function D_(t,e){return t=ve(t),e=ve(e),t instanceof Je&&e instanceof Je&&t.firestore===e.firestore&&Lu(t._query,e._query)&&t.converter===e.converter}var Pw=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new xu(this,"async_queue_retry"),this.cu=()=>{let n=Hd();n&&I("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Hd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;let n=Hd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});let n=new Le;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){return m(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Or(e))throw e;I("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(e){let n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Me("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);let i=yw.createAndSchedule(this,e,n,r,o=>this.Iu(o));return this.su.push(i),i}lu(){this.ou&&x()}verifyOperationInProgress(){}Tu(){return m(this,null,function*(){let e;do e=this.nu,yield e;while(e!==this.nu)})}Eu(e){for(let n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){let n=this.su.indexOf(e);this.su.splice(n,1)}};function kw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var Ow=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Le,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var P1=-1,me=class extends Ai{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Pw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||k1(this),this._firestoreClient.terminate()}};function Ue(t){return t._firestoreClient||k1(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function k1(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,c,l){return new uv(a,u,c,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,x1(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Rw(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function O1(t,e){z1(t=ie(t,me));let n=Ue(t);if(n._uninitializedComponentsProvider)throw new _(g.FAILED_PRECONDITION,"SDK cache is already specified.");Bt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Nu;return L1(n,i,new Ph(i,r.cacheSizeBytes,e?.forceOwnership))}function F1(t){z1(t=ie(t,me));let e=Ue(t);if(e._uninitializedComponentsProvider)throw new _(g.FAILED_PRECONDITION,"SDK cache is already specified.");Bt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Nu;return L1(e,r,new Sw(r,n.cacheSizeBytes))}function L1(t,e,n){let r=new Le;return t.asyncQueue.enqueue(()=>m(this,null,function*(){try{yield Gd(t,n),yield Nw(t,e),r.resolve()}catch(i){let o=i;if(!T1(o))throw o;Bt("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function V1(t){if(t._initialized&&!t._terminated)throw new _(g.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Le;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{yield function(r){return m(this,null,function*(){if(!Hn.D())return Promise.resolve();let i=r+"main";yield Hn.delete(i)})}(i_(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function j1(t){return function(n){let r=new Le;return n.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return D3(yield v_(n),r)})),r.promise}(Ue(t=ie(t,me)))}function U1(t){return F3(Ue(t=ie(t,me)))}function B1(t){return L3(Ue(t=ie(t,me)))}function $1(t,e){let n=Ue(t=ie(t,me)),r=new Ow;return B3(n,t._databaseId,e,r),r}function q1(t,e){return $3(Ue(t=ie(t,me)),e).then(n=>n?new Je(t,null,n.query):null)}function z1(t){if(t._initialized||t._terminated)throw new _(g.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Rn=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(He.fromBase64String(e))}catch(n){throw new _(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(He.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var on=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Re(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Kn=class{constructor(e){this._methodName=e}};var xi=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return z(this._lat,e._lat)||z(this._long,e._long)}};var q3=/^__.*__$/,Fw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new rn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rr(e,this.data,n,this.fieldTransforms)}},Oh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new rn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function H1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw x()}}var Fh=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ru(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Lh(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(H1(this.Vu)&&q3.test(e))throw this.Su('Document fields cannot begin and end with "__"')}},Lw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ju(e)}Cu(e,n,r,i=!1){return new Fh({Vu:e,methodName:n,Du:r,path:Re.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Pi(t){let e=t._freezeSettings(),n=ju(t._databaseId);return new Lw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Kh(t,e,n,r,i,o={}){let s=t.Cu(o.merge||o.mergeFields?2:0,e,n,i);b_("Data must be an object, but it was:",s,r);let a=K1(r,s),u,c;if(o.merge)u=new Pt(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){let l=[];for(let d of o.mergeFields){let h=$w(e,d,n);if(!s.contains(h))throw new _(g.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Y1(l,h)||l.push(h)}u=new Pt(l),c=s.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=s.fieldTransforms;return new Fw(new at(a),u,c)}var Pu=class t extends Kn{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function G1(t,e,n){return new Fh({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Vw=class t extends Kn{_toFieldTransform(e){return new Ci(e.path,new xr)}isEqual(e){return e instanceof t}},jw=class t extends Kn{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){let n=G1(this,e,!0),r=this.vu.map(o=>ki(o,n)),i=new Gn(r);return new Ci(e.path,i)}isEqual(e){return e instanceof t&&cf(this.vu,e.vu)}},Uw=class t extends Kn{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){let n=G1(this,e,!0),r=this.vu.map(o=>ki(o,n)),i=new Wn(r);return new Ci(e.path,i)}isEqual(e){return e instanceof t&&cf(this.vu,e.vu)}},Bw=class t extends Kn{constructor(e,n){super(e),this.Fu=n}_toFieldTransform(e){let n=new Mr(e.serializer,RA(e.serializer,this.Fu));return new Ci(e.path,n)}isEqual(e){return e instanceof t&&this.Fu===e.Fu}};function T_(t,e,n,r){let i=t.Cu(1,e,n);b_("Data must be an object, but it was:",i,r);let o=[],s=at.empty();Ni(r,(u,c)=>{let l=S_(e,u,n);c=ve(c);let d=i.yu(l);if(c instanceof Pu)o.push(l);else{let h=ki(c,d);h!=null&&(o.push(l),s.set(l,h))}});let a=new Pt(o);return new Oh(s,a,i.fieldTransforms)}function C_(t,e,n,r,i,o){let s=t.Cu(1,e,n),a=[$w(e,r,n)],u=[i];if(o.length%2!=0)throw new _(g.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push($w(e,o[h])),u.push(o[h+1]);let c=[],l=at.empty();for(let h=a.length-1;h>=0;--h)if(!Y1(c,a[h])){let f=a[h],v=u[h];v=ve(v);let y=s.yu(f);if(v instanceof Pu)c.push(f);else{let w=ki(v,y);w!=null&&(c.push(f),l.set(f,w))}}let d=new Pt(c);return new Oh(l,d,s.fieldTransforms)}function W1(t,e,n,r=!1){return ki(n,t.Cu(r?4:3,e))}function ki(t,e){if(Q1(t=ve(t)))return b_("Unsupported field value:",e,t),K1(t,e);if(t instanceof Kn)return function(r,i){if(!H1(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=ki(a,i.wu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ee.fromDate(r);return{timestampValue:ns(i.serializer,o)}}if(r instanceof Ee){let o=new Ee(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ns(i.serializer,o)}}if(r instanceof xi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rn)return{bytesValue:BA(i.serializer,r._byteString)};if(r instanceof fe){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Su(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:t_(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${Wh(r)}`)}(t,e)}function K1(t,e){let n={};return fA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ni(t,(r,i)=>{let o=ki(i,e.fu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function Q1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ee||t instanceof xi||t instanceof Rn||t instanceof fe||t instanceof Kn)}function b_(t,e,n){if(!Q1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Wh(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function $w(t,e,n){if((e=ve(e))instanceof on)return e._internalPath;if(typeof e=="string")return S_(t,e);throw Lh("Field path arguments must be of type string or ",t,!1,void 0,n)}var z3=new RegExp("[~\\*/\\[\\]]");function S_(t,e,n){if(e.search(z3)>=0)throw Lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new on(...e.split("."))._internalPath}catch{throw Lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lh(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new _(g.INVALID_ARGUMENT,a+t+u)}function Y1(t,e){return t.some(n=>n.isEqual(e))}var Mi=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Qh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},qw=class extends Mi{data(){return super.data()}};function Qh(t,e){return typeof e=="string"?S_(t,e):e instanceof on?e._internalPath:e._delegate._internalPath}function Z1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ku=class{},Ri=class extends ku{};function Zn(t,e,...n){let r=[];e instanceof ku&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof zw).length,a=o.filter(u=>u instanceof Vh).length;if(s>1||s>0&&a>0)throw new _(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Vh=class t extends Ri{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return ax(e._query,n),new Je(e.firestore,e.converter,Iv(e._query,n))}_parse(e){let n=Pi(e.firestore);return function(o,s,a,u,c,l,d){let h;if(c.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new _(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){tA(d,l);let f=[];for(let v of d)f.push(eA(u,o,v));h={arrayValue:{values:f}}}else h=eA(u,o,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||tA(d,l),h=W1(a,s,d,l==="in"||l==="not-in");return ee.create(c,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function J1(t,e,n){let r=e,i=Qh("where",t);return Vh._create(i,r,n)}var zw=class t extends ku{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ce.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)ax(s,u),s=Iv(s,u)}(e._query,n),new Je(e.firestore,e.converter,Iv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Hw=class t extends Ri{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new _(g.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new _(g.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Di(o,s)}(e._query,this._field,this._direction);return new Je(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new nn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function X1(t,e="asc"){let n=e,r=Qh("orderBy",t);return Hw._create(r,n)}var jh=class t extends Ri{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Je(e.firestore,e.converter,ih(e._query,this._limit,this._limitType))}};function ex(t){return M1("limit",t),jh._create("limit",t,"F")}function tx(t){return M1("limitToLast",t),jh._create("limitToLast",t,"L")}var Uh=class t extends Ri{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=sx(e,this.type,this._docOrFields,this._inclusive);return new Je(e.firestore,e.converter,function(i,o){return new nn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function nx(...t){return Uh._create("startAt",t,!0)}function rx(...t){return Uh._create("startAfter",t,!1)}var Bh=class t extends Ri{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=sx(e,this.type,this._docOrFields,this._inclusive);return new Je(e.firestore,e.converter,function(i,o){return new nn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function ix(...t){return Bh._create("endBefore",t,!1)}function ox(...t){return Bh._create("endAt",t,!0)}function sx(t,e,n,r){if(n[0]=ve(n[0]),n[0]instanceof Mi)return function(o,s,a,u,c){if(!u)throw new _(g.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let l=[];for(let d of Ko(o))if(d.field.isKeyField())l.push(Ei(s,u.key));else{let h=u.data.field(d.field);if(qh(h))throw new _(g.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new _(g.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}l.push(h)}return new xn(l,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=Pi(t.firestore);return function(s,a,u,c,l,d){let h=s.explicitOrderBy;if(l.length>h.length)throw new _(g.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let v=0;v<l.length;v++){let y=l[v];if(h[v].field.isKeyField()){if(typeof y!="string")throw new _(g.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof y}`);if(!Xw(s)&&y.indexOf("/")!==-1)throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${y}' contains a slash.`);let w=s.path.child(re.fromString(y));if(!C.isDocumentKey(w))throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${w}' is not because it contains an odd number of segments.`);let T=new C(w);f.push(Ei(a,T))}else{let w=W1(u,c,y);f.push(w)}}return new xn(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function eA(t,e,n){if(typeof(n=ve(n))=="string"){if(n==="")throw new _(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xw(e)&&n.indexOf("/")!==-1)throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(re.fromString(n));if(!C.isDocumentKey(r))throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ei(t,new C(r))}if(n instanceof fe)return Ei(t,n._key);throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wh(n)}.`)}function tA(t,e){if(!Array.isArray(t)||t.length===0)throw new _(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ax(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new _(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var hs=class{convertValue(e,n="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Te(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw x()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ni(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new xi(Te(e.latitude),Te(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Zw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mu(e));default:return null}}convertTimestamp(e){let n=Cr(e);return new Ee(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=re.fromString(e);N(JA(r));let i=new Sr(r.get(1),r.get(3)),o=new C(r.popFirst(5));return i.isEqual(n)||Me(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Yh(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Gw=class extends hs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new fe(this.firestore,null,n)}};var zn=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},qt=class extends Mi{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Dr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Qh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Dr=class extends qt{data(e={}){return super.data(e)}},sn=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new zn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Dr(this._firestore,this._userDataWriter,r.key,r,new zn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Dr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new zn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Dr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new zn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),c=-1,l=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:H3(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function H3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return x()}}function A_(t,e){return t instanceof qt&&e instanceof qt?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof sn&&e instanceof sn&&t._firestore===e._firestore&&D_(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function ux(t){t=ie(t,fe);let e=ie(t.firestore,me);return S1(Ue(e),t._key).then(n=>N_(e,t,n))}var Qn=class extends hs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new fe(this.firestore,null,n)}};function cx(t){t=ie(t,fe);let e=ie(t.firestore,me),n=Ue(e),r=new Qn(e);return V3(n,t._key).then(i=>new qt(e,r,t._key,i,new zn(i!==null&&i.hasLocalMutations,!0),t.converter))}function lx(t){t=ie(t,fe);let e=ie(t.firestore,me);return S1(Ue(e),t._key,{source:"server"}).then(n=>N_(e,t,n))}function dx(t){t=ie(t,Je);let e=ie(t.firestore,me),n=Ue(e),r=new Qn(e);return Z1(t._query),A1(n,t._query).then(i=>new sn(e,r,t,i))}function hx(t){t=ie(t,Je);let e=ie(t.firestore,me),n=Ue(e),r=new Qn(e);return j3(n,t._query).then(i=>new sn(e,r,t,i))}function fx(t){t=ie(t,Je);let e=ie(t.firestore,me),n=Ue(e),r=new Qn(e);return A1(n,t._query,{source:"server"}).then(i=>new sn(e,r,t,i))}function x_(t,e,n){t=ie(t,fe);let r=ie(t.firestore,me),i=Yh(t.converter,e,n);return ws(r,[Kh(Pi(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ce.none())])}function M_(t,e,n,...r){t=ie(t,fe);let i=ie(t.firestore,me),o=Pi(i),s;return s=typeof(e=ve(e))=="string"||e instanceof on?C_(o,"updateDoc",t._key,e,n,r):T_(o,"updateDoc",t._key,e),ws(i,[s.toMutation(t._key,Ce.exists(!0))])}function px(t){return ws(ie(t.firestore,me),[new Nr(t._key,Ce.none())])}function gx(t,e){let n=ie(t.firestore,me),r=Bu(t),i=Yh(t.converter,e);return ws(n,[Kh(Pi(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ce.exists(!1))]).then(()=>r)}function R_(t,...e){var n,r,i;t=ve(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||kw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(kw(e[s])){let d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let u,c,l;if(t instanceof fe)c=ie(t.firestore,me),l=ps(t._key.path),u={next:d=>{e[s]&&e[s](N_(c,t,d))},error:e[s+1],complete:e[s+2]};else{let d=ie(t,Je);c=ie(d.firestore,me),l=d._query;let h=new Qn(c);u={next:f=>{e[s]&&e[s](new sn(c,h,d,f))},error:e[s+1],complete:e[s+2]},Z1(t._query)}return function(h,f,v,y){let w=new ls(y),T=new Mu(f,w,v);return h.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return u_(yield ds(h),T)})),()=>{w.Qa(),h.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return c_(yield ds(h),T)}))}}(Ue(c),l,a,u)}function mx(t,e){return U3(Ue(t=ie(t,me)),kw(e)?e:{next:e})}function ws(t,e){return function(r,i){let o=new Le;return r.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return w3(yield v_(r),i,o)})),o.promise}(Ue(t),e)}function N_(t,e,n){let r=n.docs.get(e._key),i=new Qn(t);return new qt(t,i,e._key,r,new zn(n.hasPendingWrites,n.fromCache),e.converter)}var G3={maxAttempts:5};var $h=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Pi(e)}set(e,n,r){this._verifyNotCommitted();let i=Ir(e,this._firestore),o=Yh(i.converter,n,r),s=Kh(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ce.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=Ir(e,this._firestore),s;return s=typeof(n=ve(n))=="string"||n instanceof on?C_(this._dataReader,"WriteBatch.update",o._key,n,r,i):T_(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Ce.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Ir(e,this._firestore);return this._mutations=this._mutations.concat(new Nr(n._key,Ce.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _(g.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ir(t,e){if((t=ve(t)).firestore!==e)throw new _(g.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Ww=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Pi(n)}get(n){let r=Ir(n,this._firestore),i=new Gw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return x();let s=o[0];if(s.isFoundDocument())return new Mi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Mi(this._firestore,i,r._key,null,r.converter);throw x()})}set(n,r,i){let o=Ir(n,this._firestore),s=Yh(o.converter,r,i),a=Kh(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=Ir(n,this._firestore),a;return a=typeof(r=ve(r))=="string"||r instanceof on?C_(this._dataReader,"Transaction.update",s._key,r,i,o):T_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=Ir(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Ir(e,this._firestore),r=new Qn(this._firestore);return super.get(e).then(i=>new qt(this._firestore,r,n._key,i._document,new zn(!1,!1),n.converter))}};function yx(t,e,n){t=ie(t,me);let r=Object.assign(Object.assign({},G3),n);return function(o){if(o.maxAttempts<1)throw new _(g.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new Le;return o.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){let c=yield O3(o);new Mw(o.asyncQueue,c,a,s,u).Ya()})),u.promise}(Ue(t),i=>e(new Ww(t,i)),r)}function vx(){return new Pu("deleteField")}function wx(){return new Vw("serverTimestamp")}function _x(...t){return new jw("arrayUnion",t)}function Ix(...t){return new Uw("arrayRemove",t)}function Ex(t){return new Bw("increment",t)}(function(e,n=!0){(function(i){fs=i})(Z_),Ts(new Lr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new me(new Jy(r.getProvider("auth-internal")),new nv(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new _(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sr(c.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Jn(nS,"4.5.1",e),Jn(nS,"4.5.1","esm2017")})();var W3="@firebase/firestore-compat",K3="0.3.28";function V_(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new _("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function Dx(){if(typeof Uint8Array>"u")throw new _("unimplemented","Uint8Arrays are not available in this environment.")}function Tx(){if(!pA())throw new _("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Zh=class t{constructor(e){this._delegate=e}static fromBase64String(e){return Tx(),new t(Rn.fromBase64String(e))}static fromUint8Array(e){return Dx(),new t(Rn.fromUint8Array(e))}toBase64(){return Tx(),this._delegate.toBase64()}toUint8Array(){return Dx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function P_(t){return Q3(t,["next","error","complete"])}function Q3(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var k_=class{enableIndexedDbPersistence(e,n){return O1(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return F1(e._delegate)}clearIndexedDbPersistence(e){return V1(e._delegate)}},Jh=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Sr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Bt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){R1(this._delegate,e,n,r)}enableNetwork(){return U1(this._delegate)}disableNetwork(){return B1(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,__("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return j1(this._delegate)}onSnapshotsInSync(e){return mx(this._delegate,e)}get app(){if(!this._appCompat)throw new _("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Es(this,I_(this._delegate,e))}catch(n){throw gt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Nn(this,Bu(this._delegate,e))}catch(n){throw gt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vi(this,N1(this._delegate,e))}catch(n){throw gt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return yx(this._delegate,n=>e(new Xh(this,n)))}batch(){return Ue(this._delegate),new ef(new $h(this._delegate,e=>ws(this._delegate,e)))}loadBundle(e){return $1(this._delegate,e)}namedQuery(e){return q1(this._delegate,e).then(n=>n?new Vi(this,n):null)}},_s=class extends hs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zh(new Rn(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Nn.forKey(n,this.firestore,null)}};function Y3(t){nA(t)}var Xh=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new _s(e)}get(e){let n=Oi(e);return this._delegate.get(n).then(r=>new Fi(this._firestore,new qt(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=Oi(e);return r?(V_("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Oi(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Oi(e);return this._delegate.delete(n),this}},ef=class{constructor(e){this._delegate=e}set(e,n,r){let i=Oi(e);return r?(V_("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Oi(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Oi(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Is=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Dr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Li(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new _s(e),n),i.set(n,o)),o}};Is.INSTANCES=new WeakMap;var Nn=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new _s(e)}static forPath(e,n,r){if(e.length%2!==0)throw new _("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new fe(n._delegate,r,new C(e)))}static forKey(e,n,r){return new t(n,new fe(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Es(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Es(this.firestore,I_(this._delegate,e))}catch(n){throw gt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ve(e),e instanceof fe?E_(this._delegate,e):!1}set(e,n){n=V_("DocumentReference.set",n);try{return n?x_(this._delegate,e,n):x_(this._delegate,e)}catch(r){throw gt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?M_(this._delegate,e):M_(this._delegate,e,n,...r)}catch(i){throw gt(i,"updateDoc()","DocumentReference.update()")}}delete(){return px(this._delegate)}onSnapshot(...e){let n=Cx(e),r=bx(e,i=>new Fi(this.firestore,new qt(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return R_(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=cx(this._delegate):e?.source==="server"?n=lx(this._delegate):n=ux(this._delegate),n.then(r=>new Fi(this.firestore,new qt(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Is.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function gt(t,e,n){return t.message=t.message.replace(e,n),t}function Cx(t){for(let e of t)if(typeof e=="object"&&!P_(e))return e;return{}}function bx(t,e){var n,r;let i;return P_(t[0])?i=t[0]:P_(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Fi=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Nn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return A_(this._delegate,e._delegate)}},Li=class extends Fi{data(e){let n=this._delegate.data(e);return this._delegate._converter||rA(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Vi=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new _s(e)}where(e,n,r){try{return new t(this.firestore,Zn(this._delegate,J1(e,n,r)))}catch(i){throw gt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,Zn(this._delegate,X1(e,n)))}catch(r){throw gt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,Zn(this._delegate,ex(e)))}catch(n){throw gt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,Zn(this._delegate,tx(e)))}catch(n){throw gt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,Zn(this._delegate,nx(...e)))}catch(n){throw gt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,Zn(this._delegate,rx(...e)))}catch(n){throw gt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,Zn(this._delegate,ix(...e)))}catch(n){throw gt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,Zn(this._delegate,ox(...e)))}catch(n){throw gt(n,"endAt()","Query.endAt()")}}isEqual(e){return D_(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=hx(this._delegate):e?.source==="server"?n=fx(this._delegate):n=dx(this._delegate),n.then(r=>new $u(this.firestore,new sn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=Cx(e),r=bx(e,i=>new $u(this.firestore,new sn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return R_(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Is.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},O_=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Li(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},$u=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Vi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Li(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new O_(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Li(this._firestore,r))})}isEqual(e){return A_(this._delegate,e._delegate)}},Es=class t extends Vi{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Nn(this.firestore,e):null}doc(e){try{return e===void 0?new Nn(this.firestore,Bu(this._delegate)):new Nn(this.firestore,Bu(this._delegate,e))}catch(n){throw gt(n,"doc()","CollectionReference.doc()")}}add(e){return gx(this._delegate,e).then(n=>new Nn(this.firestore,n))}isEqual(e){return E_(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Is.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Oi(t){return ie(t,fe)}var F_=class t{constructor(...e){this._delegate=new on(...e)}static documentId(){return new t(Re.keyField().canonicalString())}isEqual(e){return e=ve(e),e instanceof on?this._delegate._internalPath.isEqual(e._internalPath):!1}};var L_=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=wx();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=vx();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=_x(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=Ix(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=Ex(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var Z3={Firestore:Jh,GeoPoint:xi,Timestamp:Ee,Blob:Zh,Transaction:Xh,WriteBatch:ef,DocumentReference:Nn,DocumentSnapshot:Fi,Query:Vi,QueryDocumentSnapshot:Li,QuerySnapshot:$u,CollectionReference:Es,FieldPath:F_,FieldValue:L_,setLogLevel:Y3,CACHE_SIZE_UNLIMITED:P1};function J3(t,e){t.INTERNAL.registerComponent(new Lr("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Z3)))}function X3(t){J3(t,(e,n)=>new Jh(e,n,new k_)),t.registerVersion(W3,K3)}X3(yt);function ej(t,e=As){return new J(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function Sx(t,e){return ej(t,e)}function tj(t,e){return Sx(t,e).pipe($r(void 0),Ms(),V(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function B_(t,e){return Sx(t,e).pipe(V(n=>({payload:n,type:"query"})))}var tf=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=Nx(r,n);return new rf(i,o,this.afs)}snapshotChanges(){return tj(this.ref,this.afs.schedulers.outsideAngular).pipe(It)}valueChanges(e={}){return this.snapshotChanges().pipe(V(({payload:n})=>e.idField?ye(M({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return se(this.ref.get(e)).pipe(It)}};function nf(t,e){return B_(t,e).pipe($r(void 0),Ms(),V(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let c=o.find(d=>d.doc.ref.isEqual(a.ref)),l=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&l&&JSON.stringify(l.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function Ax(t,e,n){return nf(t,n).pipe(Br((r,i)=>nj(r,i.map(o=>o.payload),e),[]),Af(),V(r=>r.map(i=>({type:i.type,payload:i}))))}function nj(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=rj(t,r))}),t}function j_(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function rj(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return j_(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return j_(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return j_(t,e.oldIndex,1);break}return t}function xx(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var rf=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=nf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(V(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe($r(void 0),Ms(),Be(([r,i])=>i.length>0||!r),V(([,r])=>r),It)}auditTrail(e){return this.stateChanges(e).pipe(Br((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=xx(e);return Ax(this.query,n,this.afs.schedulers.outsideAngular).pipe(It)}valueChanges(e={}){return B_(this.query,this.afs.schedulers.outsideAngular).pipe(V(n=>n.payload.docs.map(r=>e.idField?ye(M({},r.data()),{[e.idField]:r.id}):r.data())),It)}get(e){return se(this.query.get(e)).pipe(It)}add(e){return this.ref.add(e)}doc(e){return new tf(this.ref.doc(e),this.afs)}},U_=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?nf(this.query,this.afs.schedulers.outsideAngular).pipe(It):nf(this.query,this.afs.schedulers.outsideAngular).pipe(V(n=>n.filter(r=>e.indexOf(r.type)>-1)),Be(n=>n.length>0),It)}auditTrail(e){return this.stateChanges(e).pipe(Br((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=xx(e);return Ax(this.query,n,this.afs.schedulers.outsideAngular).pipe(It)}valueChanges(e={}){return B_(this.query,this.afs.schedulers.outsideAngular).pipe(V(r=>r.payload.docs.map(i=>e.idField?M({[e.idField]:i.id},i.data()):i.data())),It)}get(e){return se(this.query.get(e)).pipe(It)}},Mx=new R("angularfire2.enableFirestorePersistence"),Rx=new R("angularfire2.firestore.persistenceSettings"),ij=new R("angularfire2.firestore.settings"),oj=new R("angularfire2.firestore.use-emulator");function Nx(t,e=n=>n){return{query:e(t),ref:t}}var $_=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,c,l,d,h,f,v,y,w,T,L){this.schedulers=u;let A=Na(n,a,r),$=l;d&&ty(A,a,h,v,y,w,f,T),[this.firestore,this.persistenceEnabled$]=ad(`${A.name}.firestore`,"AngularFirestore",A.name,()=>{let q=a.runOutsideAngular(()=>A.firestore());if(o&&q.settings(o),$&&q.useEmulator(...$),i&&!ri(s)){let G=()=>{try{return se(q.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(le){return typeof console<"u"&&console.warn(le),k(!1)}};return[q,a.runOutsideAngular(G)]}else return[q,k(!1)]},[o,$,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=Nx(i,r),a=this.schedulers.ngZone.run(()=>o);return new rf(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new U_(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new tf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(D(xo),D(Mo,8),D(Mx,8),D(ij,8),D(rt),D(X),D(id),D(Rx,8),D(oj,8),D(kC,8),D(Qm,8),D(Ym,8),D(Zm,8),D(Jm,8),D(Xm,8),D(ey,8),D(ai,8))};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),Px=(()=>{class t{constructor(){yt.registerVersion("angularfire",Ao.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:Mx,useValue:!0},{provide:Rx,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=nt({type:t});static \u0275inj=tt({providers:[$_]})}return t})();var aj=(t,e)=>e.title,uj=()=>({title:"Explore the Docs",link:"https://angular.dev"}),cj=()=>({title:"Learn with Tutorials",link:"https://angular.dev/tutorials"}),lj=()=>({title:"CLI Docs",link:"https://angular.dev/tools/cli"}),dj=()=>({title:"Angular Language Service",link:"https://angular.dev/tools/language-service"}),hj=()=>({title:"Angular DevTools",link:"https://angular.dev/tools/devtools"}),fj=(t,e,n,r,i)=>[t,e,n,r,i];function pj(t,e){if(t&1&&(xe(0,"li",33),dt(1,"img",34),Qe()),t&2){let n=e.$implicit;ho(),oa("src",n.url,ag)}}function gj(t,e){if(t&1&&(xe(0,"a",22)(1,"span"),Tl(2),Qe(),co(),xe(3,"svg",35),dt(4,"path",36),Qe()()),t&2){let n=e.$implicit;oa("href",n.link,ag),ho(2),bg(n.title)}}var kx=(()=>{let e=class e{constructor(r){this.firestore=r,this.title="NASAFAN",this.items$=this.firestore.collection("nasa_pics").valueChanges()}};e.\u0275fac=function(i){return new(i||e)(mn($_))},e.\u0275cmp=nl({type:e,selectors:[["app-root"]],decls:42,vars:15,consts:[[1,"main"],[1,"content"],[1,"left-side"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 982 239","fill","none",1,"angular-logo"],["clip-path","url(#a)"],["fill","url(#b)","d","M388.676 191.625h30.849L363.31 31.828h-35.758l-56.215 159.797h30.848l13.174-39.356h60.061l13.256 39.356Zm-65.461-62.675 21.602-64.311h1.227l21.602 64.311h-44.431Zm126.831-7.527v70.202h-28.23V71.839h27.002v20.374h1.392c2.782-6.71 7.2-12.028 13.255-15.956 6.056-3.927 13.584-5.89 22.503-5.89 8.264 0 15.465 1.8 21.684 5.318 6.137 3.518 10.964 8.673 14.319 15.382 3.437 6.71 5.074 14.81 4.992 24.383v76.175h-28.23v-71.92c0-8.019-2.046-14.237-6.219-18.819-4.173-4.5-9.819-6.791-17.102-6.791-4.91 0-9.328 1.063-13.174 3.272-3.846 2.128-6.792 5.237-9.001 9.328-2.046 4.009-3.191 8.918-3.191 14.728ZM589.233 239c-10.147 0-18.82-1.391-26.103-4.091-7.282-2.7-13.092-6.382-17.511-10.964-4.418-4.582-7.528-9.655-9.164-15.219l25.448-6.136c1.145 2.372 2.782 4.663 4.991 6.954 2.209 2.291 5.155 4.255 8.837 5.81 3.683 1.554 8.428 2.291 14.074 2.291 8.019 0 14.647-1.964 19.884-5.81 5.237-3.845 7.856-10.227 7.856-19.064v-22.665h-1.391c-1.473 2.946-3.601 5.892-6.383 9.001-2.782 3.109-6.464 5.645-10.965 7.691-4.582 2.046-10.228 3.109-17.101 3.109-9.165 0-17.511-2.209-25.039-6.545-7.446-4.337-13.42-10.883-17.757-19.474-4.418-8.673-6.628-19.473-6.628-32.565 0-13.091 2.21-24.301 6.628-33.383 4.419-9.082 10.311-15.955 17.839-20.7 7.528-4.746 15.874-7.037 25.039-7.037 7.037 0 12.846 1.145 17.347 3.518 4.582 2.373 8.182 5.236 10.883 8.51 2.7 3.272 4.746 6.382 6.137 9.327h1.554v-19.8h27.821v121.749c0 10.228-2.454 18.737-7.364 25.447-4.91 6.709-11.538 11.7-20.048 15.055-8.509 3.355-18.165 4.991-28.884 4.991Zm.245-71.266c5.974 0 11.047-1.473 15.302-4.337 4.173-2.945 7.446-7.118 9.573-12.519 2.21-5.482 3.274-12.027 3.274-19.637 0-7.609-1.064-14.155-3.274-19.8-2.127-5.646-5.318-10.064-9.491-13.255-4.174-3.11-9.329-4.746-15.384-4.746s-11.537 1.636-15.792 4.91c-4.173 3.272-7.365 7.772-9.492 13.418-2.128 5.727-3.191 12.191-3.191 19.392 0 7.2 1.063 13.745 3.273 19.228 2.127 5.482 5.318 9.736 9.573 12.764 4.174 3.027 9.41 4.582 15.629 4.582Zm141.56-26.51V71.839h28.23v119.786h-27.412v-21.273h-1.227c-2.7 6.709-7.119 12.191-13.338 16.446-6.137 4.255-13.747 6.382-22.748 6.382-7.855 0-14.81-1.718-20.783-5.237-5.974-3.518-10.72-8.591-14.075-15.382-3.355-6.709-5.073-14.891-5.073-24.464V71.839h28.312v71.921c0 7.609 2.046 13.664 6.219 18.083 4.173 4.5 9.655 6.709 16.365 6.709 4.173 0 8.183-.982 12.111-3.028 3.927-2.045 7.118-5.072 9.655-9.082 2.537-4.091 3.764-9.164 3.764-15.218Zm65.707-109.395v159.796h-28.23V31.828h28.23Zm44.841 162.169c-7.61 0-14.402-1.391-20.457-4.091-6.055-2.7-10.883-6.791-14.32-12.109-3.518-5.319-5.237-11.946-5.237-19.801 0-6.791 1.228-12.355 3.765-16.773 2.536-4.419 5.891-7.937 10.228-10.637 4.337-2.618 9.164-4.664 14.647-6.055 5.4-1.391 11.046-2.373 16.856-3.027 7.037-.737 12.683-1.391 17.102-1.964 4.337-.573 7.528-1.555 9.574-2.782 1.963-1.309 3.027-3.273 3.027-5.973v-.491c0-5.891-1.718-10.391-5.237-13.664-3.518-3.191-8.51-4.828-15.056-4.828-6.955 0-12.356 1.473-16.447 4.5-4.009 3.028-6.71 6.546-8.183 10.719l-26.348-3.764c2.046-7.282 5.483-13.336 10.31-18.328 4.746-4.909 10.638-8.59 17.511-11.045 6.955-2.455 14.565-3.682 22.912-3.682 5.809 0 11.537.654 17.265 2.045s10.965 3.6 15.711 6.71c4.746 3.109 8.51 7.282 11.455 12.6 2.864 5.318 4.337 11.946 4.337 19.883v80.184h-27.166v-16.446h-.9c-1.719 3.355-4.092 6.464-7.201 9.328-3.109 2.864-6.955 5.237-11.619 6.955-4.828 1.718-10.229 2.536-16.529 2.536Zm7.364-20.701c5.646 0 10.556-1.145 14.729-3.354 4.173-2.291 7.364-5.237 9.655-9.001 2.292-3.763 3.355-7.854 3.355-12.273v-14.155c-.9.737-2.373 1.391-4.5 2.046-2.128.654-4.419 1.145-7.037 1.636-2.619.491-5.155.9-7.692 1.227-2.537.328-4.746.655-6.628.901-4.173.572-8.019 1.472-11.292 2.781-3.355 1.31-5.973 3.11-7.855 5.401-1.964 2.291-2.864 5.318-2.864 8.918 0 5.237 1.882 9.164 5.728 11.782 3.682 2.782 8.51 4.091 14.401 4.091Zm64.643 18.328V71.839h27.412v19.965h1.227c2.21-6.955 5.974-12.274 11.292-16.038 5.319-3.763 11.456-5.645 18.329-5.645 1.555 0 3.355.082 5.237.163 1.964.164 3.601.328 4.91.573v25.938c-1.227-.41-3.109-.819-5.646-1.146a58.814 58.814 0 0 0-7.446-.49c-5.155 0-9.738 1.145-13.829 3.354-4.091 2.209-7.282 5.236-9.655 9.164-2.373 3.927-3.519 8.427-3.519 13.5v70.448h-28.312ZM222.077 39.192l-8.019 125.923L137.387 0l84.69 39.192Zm-53.105 162.825-57.933 33.056-57.934-33.056 11.783-28.556h92.301l11.783 28.556ZM111.039 62.675l30.357 73.803H80.681l30.358-73.803ZM7.937 165.115 0 39.192 84.69 0 7.937 165.115Z"],["fill","url(#c)","d","M388.676 191.625h30.849L363.31 31.828h-35.758l-56.215 159.797h30.848l13.174-39.356h60.061l13.256 39.356Zm-65.461-62.675 21.602-64.311h1.227l21.602 64.311h-44.431Zm126.831-7.527v70.202h-28.23V71.839h27.002v20.374h1.392c2.782-6.71 7.2-12.028 13.255-15.956 6.056-3.927 13.584-5.89 22.503-5.89 8.264 0 15.465 1.8 21.684 5.318 6.137 3.518 10.964 8.673 14.319 15.382 3.437 6.71 5.074 14.81 4.992 24.383v76.175h-28.23v-71.92c0-8.019-2.046-14.237-6.219-18.819-4.173-4.5-9.819-6.791-17.102-6.791-4.91 0-9.328 1.063-13.174 3.272-3.846 2.128-6.792 5.237-9.001 9.328-2.046 4.009-3.191 8.918-3.191 14.728ZM589.233 239c-10.147 0-18.82-1.391-26.103-4.091-7.282-2.7-13.092-6.382-17.511-10.964-4.418-4.582-7.528-9.655-9.164-15.219l25.448-6.136c1.145 2.372 2.782 4.663 4.991 6.954 2.209 2.291 5.155 4.255 8.837 5.81 3.683 1.554 8.428 2.291 14.074 2.291 8.019 0 14.647-1.964 19.884-5.81 5.237-3.845 7.856-10.227 7.856-19.064v-22.665h-1.391c-1.473 2.946-3.601 5.892-6.383 9.001-2.782 3.109-6.464 5.645-10.965 7.691-4.582 2.046-10.228 3.109-17.101 3.109-9.165 0-17.511-2.209-25.039-6.545-7.446-4.337-13.42-10.883-17.757-19.474-4.418-8.673-6.628-19.473-6.628-32.565 0-13.091 2.21-24.301 6.628-33.383 4.419-9.082 10.311-15.955 17.839-20.7 7.528-4.746 15.874-7.037 25.039-7.037 7.037 0 12.846 1.145 17.347 3.518 4.582 2.373 8.182 5.236 10.883 8.51 2.7 3.272 4.746 6.382 6.137 9.327h1.554v-19.8h27.821v121.749c0 10.228-2.454 18.737-7.364 25.447-4.91 6.709-11.538 11.7-20.048 15.055-8.509 3.355-18.165 4.991-28.884 4.991Zm.245-71.266c5.974 0 11.047-1.473 15.302-4.337 4.173-2.945 7.446-7.118 9.573-12.519 2.21-5.482 3.274-12.027 3.274-19.637 0-7.609-1.064-14.155-3.274-19.8-2.127-5.646-5.318-10.064-9.491-13.255-4.174-3.11-9.329-4.746-15.384-4.746s-11.537 1.636-15.792 4.91c-4.173 3.272-7.365 7.772-9.492 13.418-2.128 5.727-3.191 12.191-3.191 19.392 0 7.2 1.063 13.745 3.273 19.228 2.127 5.482 5.318 9.736 9.573 12.764 4.174 3.027 9.41 4.582 15.629 4.582Zm141.56-26.51V71.839h28.23v119.786h-27.412v-21.273h-1.227c-2.7 6.709-7.119 12.191-13.338 16.446-6.137 4.255-13.747 6.382-22.748 6.382-7.855 0-14.81-1.718-20.783-5.237-5.974-3.518-10.72-8.591-14.075-15.382-3.355-6.709-5.073-14.891-5.073-24.464V71.839h28.312v71.921c0 7.609 2.046 13.664 6.219 18.083 4.173 4.5 9.655 6.709 16.365 6.709 4.173 0 8.183-.982 12.111-3.028 3.927-2.045 7.118-5.072 9.655-9.082 2.537-4.091 3.764-9.164 3.764-15.218Zm65.707-109.395v159.796h-28.23V31.828h28.23Zm44.841 162.169c-7.61 0-14.402-1.391-20.457-4.091-6.055-2.7-10.883-6.791-14.32-12.109-3.518-5.319-5.237-11.946-5.237-19.801 0-6.791 1.228-12.355 3.765-16.773 2.536-4.419 5.891-7.937 10.228-10.637 4.337-2.618 9.164-4.664 14.647-6.055 5.4-1.391 11.046-2.373 16.856-3.027 7.037-.737 12.683-1.391 17.102-1.964 4.337-.573 7.528-1.555 9.574-2.782 1.963-1.309 3.027-3.273 3.027-5.973v-.491c0-5.891-1.718-10.391-5.237-13.664-3.518-3.191-8.51-4.828-15.056-4.828-6.955 0-12.356 1.473-16.447 4.5-4.009 3.028-6.71 6.546-8.183 10.719l-26.348-3.764c2.046-7.282 5.483-13.336 10.31-18.328 4.746-4.909 10.638-8.59 17.511-11.045 6.955-2.455 14.565-3.682 22.912-3.682 5.809 0 11.537.654 17.265 2.045s10.965 3.6 15.711 6.71c4.746 3.109 8.51 7.282 11.455 12.6 2.864 5.318 4.337 11.946 4.337 19.883v80.184h-27.166v-16.446h-.9c-1.719 3.355-4.092 6.464-7.201 9.328-3.109 2.864-6.955 5.237-11.619 6.955-4.828 1.718-10.229 2.536-16.529 2.536Zm7.364-20.701c5.646 0 10.556-1.145 14.729-3.354 4.173-2.291 7.364-5.237 9.655-9.001 2.292-3.763 3.355-7.854 3.355-12.273v-14.155c-.9.737-2.373 1.391-4.5 2.046-2.128.654-4.419 1.145-7.037 1.636-2.619.491-5.155.9-7.692 1.227-2.537.328-4.746.655-6.628.901-4.173.572-8.019 1.472-11.292 2.781-3.355 1.31-5.973 3.11-7.855 5.401-1.964 2.291-2.864 5.318-2.864 8.918 0 5.237 1.882 9.164 5.728 11.782 3.682 2.782 8.51 4.091 14.401 4.091Zm64.643 18.328V71.839h27.412v19.965h1.227c2.21-6.955 5.974-12.274 11.292-16.038 5.319-3.763 11.456-5.645 18.329-5.645 1.555 0 3.355.082 5.237.163 1.964.164 3.601.328 4.91.573v25.938c-1.227-.41-3.109-.819-5.646-1.146a58.814 58.814 0 0 0-7.446-.49c-5.155 0-9.738 1.145-13.829 3.354-4.091 2.209-7.282 5.236-9.655 9.164-2.373 3.927-3.519 8.427-3.519 13.5v70.448h-28.312ZM222.077 39.192l-8.019 125.923L137.387 0l84.69 39.192Zm-53.105 162.825-57.933 33.056-57.934-33.056 11.783-28.556h92.301l11.783 28.556ZM111.039 62.675l30.357 73.803H80.681l30.358-73.803ZM7.937 165.115 0 39.192 84.69 0 7.937 165.115Z"],["id","c","cx","0","cy","0","r","1","gradientTransform","rotate(118.122 171.182 60.81) scale(205.794)","gradientUnits","userSpaceOnUse"],["stop-color","#FF41F8"],["offset",".707","stop-color","#FF41F8","stop-opacity",".5"],["offset","1","stop-color","#FF41F8","stop-opacity","0"],["id","b","x1","0","x2","982","y1","192","y2","192","gradientUnits","userSpaceOnUse"],["stop-color","#F0060B"],["offset","0","stop-color","#F0070C"],["offset",".526","stop-color","#CC26D5"],["offset","1","stop-color","#7702FF"],["id","a"],["fill","#fff","d","M0 0h982v239H0z"],["class","text",4,"ngFor","ngForOf"],["role","separator","aria-label","Divider",1,"divider"],[1,"right-side"],[1,"pill-group"],["target","_blank","rel","noopener",1,"pill",3,"href"],[1,"social-links"],["href","https://github.com/angular/angular","aria-label","Github","target","_blank","rel","noopener"],["width","25","height","24","viewBox","0 0 25 24","fill","none","xmlns","http://www.w3.org/2000/svg","alt","Github"],["d","M12.3047 0C5.50634 0 0 5.50942 0 12.3047C0 17.7423 3.52529 22.3535 8.41332 23.9787C9.02856 24.0946 9.25414 23.7142 9.25414 23.3871C9.25414 23.0949 9.24389 22.3207 9.23876 21.2953C5.81601 22.0377 5.09414 19.6444 5.09414 19.6444C4.53427 18.2243 3.72524 17.8449 3.72524 17.8449C2.61064 17.082 3.81137 17.0973 3.81137 17.0973C5.04697 17.1835 5.69604 18.3647 5.69604 18.3647C6.79321 20.2463 8.57636 19.7029 9.27978 19.3881C9.39052 18.5924 9.70736 18.0499 10.0591 17.7423C7.32641 17.4347 4.45429 16.3765 4.45429 11.6618C4.45429 10.3185 4.9311 9.22133 5.72065 8.36C5.58222 8.04931 5.16694 6.79833 5.82831 5.10337C5.82831 5.10337 6.85883 4.77319 9.2121 6.36459C10.1965 6.09082 11.2424 5.95546 12.2883 5.94931C13.3342 5.95546 14.3801 6.09082 15.3644 6.36459C17.7023 4.77319 18.7328 5.10337 18.7328 5.10337C19.3942 6.79833 18.9789 8.04931 18.8559 8.36C19.6403 9.22133 20.1171 10.3185 20.1171 11.6618C20.1171 16.3888 17.2409 17.4296 14.5031 17.7321C14.9338 18.1012 15.3337 18.8559 15.3337 20.0084C15.3337 21.6552 15.3183 22.978 15.3183 23.3779C15.3183 23.7009 15.5336 24.0854 16.1642 23.9623C21.0871 22.3484 24.6094 17.7341 24.6094 12.3047C24.6094 5.50942 19.0999 0 12.3047 0Z"],["href","https://twitter.com/angular","aria-label","Twitter","target","_blank","rel","noopener"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg","alt","Twitter"],["d","M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"],["href","https://www.youtube.com/channel/UCbn1OgGei-DV7aSRo_HaAiw","aria-label","Youtube","target","_blank","rel","noopener"],["width","29","height","20","viewBox","0 0 29 20","fill","none","xmlns","http://www.w3.org/2000/svg","alt","Youtube"],["fill-rule","evenodd","clip-rule","evenodd","d","M27.4896 1.52422C27.9301 1.96749 28.2463 2.51866 28.4068 3.12258C29.0004 5.35161 29.0004 10 29.0004 10C29.0004 10 29.0004 14.6484 28.4068 16.8774C28.2463 17.4813 27.9301 18.0325 27.4896 18.4758C27.0492 18.9191 26.5 19.2389 25.8972 19.4032C23.6778 20 14.8068 20 14.8068 20C14.8068 20 5.93586 20 3.71651 19.4032C3.11363 19.2389 2.56449 18.9191 2.12405 18.4758C1.68361 18.0325 1.36732 17.4813 1.20683 16.8774C0.613281 14.6484 0.613281 10 0.613281 10C0.613281 10 0.613281 5.35161 1.20683 3.12258C1.36732 2.51866 1.68361 1.96749 2.12405 1.52422C2.56449 1.08095 3.11363 0.76113 3.71651 0.596774C5.93586 0 14.8068 0 14.8068 0C14.8068 0 23.6778 0 25.8972 0.596774C26.5 0.76113 27.0492 1.08095 27.4896 1.52422ZM19.3229 10L11.9036 5.77905V14.221L19.3229 10Z"],[1,"text"],["alt","Girl in a jacket","width","200","height","200",3,"src"],["xmlns","http://www.w3.org/2000/svg","height","14","viewBox","0 -960 960 960","width","14","fill","currentColor"],["d","M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h560v-280h80v280q0 33-23.5 56.5T760-120H200Zm188-212-56-56 372-372H560v-80h280v280h-80v-144L388-332Z"]],template:function(i,o){i&1&&(xe(0,"main",0)(1,"div",1)(2,"div",2),co(),xe(3,"svg",3)(4,"g",4),dt(5,"path",5)(6,"path",6),Qe(),xe(7,"defs")(8,"radialGradient",7),dt(9,"stop",8)(10,"stop",9)(11,"stop",10),Qe(),xe(12,"linearGradient",11),dt(13,"stop",12)(14,"stop",13)(15,"stop",14)(16,"stop",15),Qe(),xe(17,"clipPath",16),dt(18,"path",17),Qe()()(),ea(),xe(19,"h1"),Tl(20),Qe(),xe(21,"p"),Tl(22,"Congratulations! Your app is running. \u{1F389}"),Qe(),xe(23,"ul"),Gs(24,pj,2,1,"li",18),kD(25,"async"),Qe()(),dt(26,"div",19),xe(27,"div",20)(28,"div",21),SD(29,gj,5,2,"a",22,aj),Qe(),xe(31,"div",23)(32,"a",24),co(),xe(33,"svg",25),dt(34,"path",26),Qe()(),ea(),xe(35,"a",27),co(),xe(36,"svg",28),dt(37,"path",29),Qe()(),ea(),xe(38,"a",30),co(),xe(39,"svg",31),dt(40,"path",32),Qe()()()()()(),ea(),dt(41,"router-outlet")),i&2&&(ho(20),Cl("Hello, ",o.title,""),ho(4),oa("ngForOf",OD(25,2,o.items$)),ho(5),AD(PD(9,fj,fo(4,uj),fo(5,cj),fo(6,lj),fo(7,dj),fo(8,hj))))},dependencies:[rT,Pm,iT],styles:[`[_nghost-%COMP%] {
    --bright-blue: oklch(51.01% 0.274 263.83);
    --electric-violet: oklch(53.18% 0.28 296.97);
    --french-violet: oklch(47.66% 0.246 305.88);
    --vivid-pink: oklch(69.02% 0.277 332.77);
    --hot-red: oklch(61.42% 0.238 15.34);
    --orange-red: oklch(63.32% 0.24 31.68);

    --gray-900: oklch(19.37% 0.006 300.98);
    --gray-700: oklch(36.98% 0.014 302.71);
    --gray-400: oklch(70.9% 0.015 304.04);

    --red-to-pink-to-purple-vertical-gradient: linear-gradient(
      180deg,
      var(--orange-red) 0%,
      var(--vivid-pink) 50%,
      var(--electric-violet) 100%
    );

    --red-to-pink-to-purple-horizontal-gradient: linear-gradient(
      90deg,
      var(--orange-red) 0%,
      var(--vivid-pink) 50%,
      var(--electric-violet) 100%
    );

    --pill-accent: var(--bright-blue);

    font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
      "Segoe UI Symbol";
    box-sizing: border-box;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1[_ngcontent-%COMP%] {
    font-size: 3.125rem;
    color: var(--gray-900);
    font-weight: 500;
    line-height: 100%;
    letter-spacing: -0.125rem;
    margin: 0;
    font-family: "Inter Tight", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
      "Segoe UI Symbol";
  }

  p[_ngcontent-%COMP%] {
    margin: 0;
    color: var(--gray-700);
  }

  main[_ngcontent-%COMP%] {
    width: 100%;
    min-height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 1rem;
    box-sizing: inherit;
    position: relative;
  }

  .angular-logo[_ngcontent-%COMP%] {
    max-width: 9.2rem;
  }

  .content[_ngcontent-%COMP%] {
    display: flex;
    justify-content: space-around;
    width: 100%;
    max-width: 700px;
    margin-bottom: 3rem;
  }

  .content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {
    margin-top: 1.75rem;
  }

  .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {
    margin-top: 1.5rem;
  }

  .divider[_ngcontent-%COMP%] {
    width: 1px;
    background: var(--red-to-pink-to-purple-vertical-gradient);
    margin-inline: 0.5rem;
  }

  .pill-group[_ngcontent-%COMP%] {
    display: flex;
    flex-direction: column;
    align-items: start;
    flex-wrap: wrap;
    gap: 1.25rem;
  }

  .pill[_ngcontent-%COMP%] {
    display: flex;
    align-items: center;
    --pill-accent: var(--bright-blue);
    background: color-mix(in srgb, var(--pill-accent) 5%, transparent);
    color: var(--pill-accent);
    padding-inline: 0.75rem;
    padding-block: 0.375rem;
    border-radius: 2.75rem;
    border: 0;
    transition: background 0.3s ease;
    font-family: var(--inter-font);
    font-size: 0.875rem;
    font-style: normal;
    font-weight: 500;
    line-height: 1.4rem;
    letter-spacing: -0.00875rem;
    text-decoration: none;
  }

  .pill[_ngcontent-%COMP%]:hover {
    background: color-mix(in srgb, var(--pill-accent) 15%, transparent);
  }

  .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n + 1) {
    --pill-accent: var(--bright-blue);
  }
  .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n + 2) {
    --pill-accent: var(--french-violet);
  }
  .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n + 3), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n + 4), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n + 5) {
    --pill-accent: var(--hot-red);
  }

  .pill-group[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {
    margin-inline-start: 0.25rem;
  }

  .social-links[_ngcontent-%COMP%] {
    display: flex;
    align-items: center;
    gap: 0.73rem;
    margin-top: 1.5rem;
  }

  .social-links[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {
    transition: fill 0.3s ease;
    fill: var(--gray-400);
  }

  .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {
    fill: var(--gray-900);
  }

  @media screen and (max-width: 650px) {
    .content[_ngcontent-%COMP%] {
      flex-direction: column;
      width: max-content;
    }

    .divider[_ngcontent-%COMP%] {
      height: 1px;
      width: 100%;
      background: var(--red-to-pink-to-purple-horizontal-gradient);
      margin-block: 1.5rem;
    }
  }`]});let t=e;return t})();var Ox={production:!1,firebase:{apiKey:"AIzaSyAzqWqyJ7Lz_kpdpOrP9O3Ud_A-e8hdDUQ",authDomain:"fudencioland.firebaseapp.com",projectId:"fudencioland",storageBucket:"fudencioland.appspot.com",messagingSenderId:"724726627630",appId:"1:724726627630:web:03084dfdff99df5f8e4ebf"}};var Fx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=nt({type:e,bootstrap:[kx]}),e.\u0275inj=tt({providers:[ST()],imports:[CT,yC,Px,PC.initializeApp(Ox.firebase)]});let t=e;return t})();TT().bootstrapModule(Fx).catch(t=>console.error(t));
